# 2.1 â€” Filosofia: Compilador vs Runtime

> A diferenÃ§a fundamental que define tudo o mais.

## Objetivos da Aula

- Entender a diferenÃ§a entre abordagem de compilador e runtime
- Compreender o que significa "Svelte desaparece"
- Analisar o impacto no tamanho do bundle e performance

---

## A Grande DivisÃ£o

A diferenÃ§a mais fundamental entre Svelte e React estÃ¡ na **quando** o trabalho Ã© feito:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 QUANDO O TRABALHO ACONTECE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  REACT (Runtime)                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Seu      â”‚â”€â”€â”€â–¶â”‚ Bundle   â”‚â”€â”€â”€â–¶â”‚ Runtime  â”‚â”€â”€â”€â–¶â”‚ DOM      â”‚     â”‚
â”‚  â”‚ CÃ³digo   â”‚    â”‚ (React + â”‚    â”‚ executa  â”‚    â”‚ atualizadoâ”‚     â”‚
â”‚  â”‚ JSX      â”‚    â”‚ seu app) â”‚    â”‚ no       â”‚    â”‚           â”‚     â”‚
â”‚  â”‚          â”‚    â”‚          â”‚    â”‚ navegadorâ”‚    â”‚           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                     â”‚
â”‚  Trabalho: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â”‚
â”‚            Build             Navegador (runtime pesado)             â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  SVELTE (Compilador)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Seu      â”‚â”€â”€â”€â–¶â”‚ Compiladorâ”‚â”€â”€â”€â–¶â”‚ JS       â”‚â”€â”€â”€â–¶â”‚ DOM      â”‚     â”‚
â”‚  â”‚ CÃ³digo   â”‚    â”‚ Svelte   â”‚    â”‚ otimizadoâ”‚    â”‚ atualizadoâ”‚     â”‚
â”‚  â”‚ .svelte  â”‚    â”‚ (build)  â”‚    â”‚ (zero    â”‚    â”‚           â”‚     â”‚
â”‚  â”‚          â”‚    â”‚          â”‚    â”‚ runtime) â”‚    â”‚           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                     â”‚
â”‚  Trabalho: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                  â”‚
â”‚            Build (compilaÃ§Ã£o pesada)   Navegador (leve)             â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## React: O Caminho do Runtime

### Como React Funciona

1. VocÃª escreve **JSX** (uma extensÃ£o de sintaxe)
2. Babel transforma JSX em chamadas `React.createElement()`
3. O **React Runtime** (biblioteca) Ã© enviado ao navegador
4. O runtime gerencia o **Virtual DOM**
5. A cada mudanÃ§a de estado, o runtime:
   - Re-executa a funÃ§Ã£o do componente
   - Gera nova Ã¡rvore Virtual DOM
   - Compara com a anterior (diffing)
   - Aplica mudanÃ§as mÃ­nimas ao DOM real

```jsx
// O que vocÃª escreve
function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(c => c + 1)}>
    {count}
  </button>
}

// O que vai para o navegador (simplificado)
function Counter() {
  const [count, setCount] = React.useState(0);
  return React.createElement(
    "button",
    { onClick: () => setCount(c => c + 1) },
    count
  );
}

// + 40KB+ do React Runtime
// + 10KB+ do ReactDOM
// = 50KB+ antes do seu cÃ³digo
```

### O Custo do Runtime

```javascript
// React Runtime precisa:
// 1. Sistema de Virtual DOM
// 2. Algoritmo de ReconciliaÃ§Ã£o (diffing)
// 3. Sistema de Hooks
// 4. Scheduler (Concurrent Mode)
// 5. Sistema de Eventos SintÃ©ticos

// Tudo isso: ~50KB+ gzipped
```

---

## Svelte: O Caminho do Compilador

### Como Svelte Funciona

1. VocÃª escreve cÃ³digo **`.svelte`**
2. O **Compilador Svelte** analisa seu cÃ³digo no build
3. Gera **JavaScript vanilla otimizado**
4. **Nenhum runtime** Ã© enviado ao navegador
5. O cÃ³digo gerado manipula o DOM **diretamente**

```svelte
<!-- O que vocÃª escreve -->
<script>
  let count = 0
</script>

<button on:click={() => count++}>
  {count}
</button>
```

```javascript
// O que o compilador gera (simplificado)
function create_fragment(ctx) {
  let button;
  let t;

  return {
    c() {
      button = element("button");
      t = text(ctx[0]); // count
    },
    m(target, anchor) {
      insert(target, button, anchor);
      append(button, t);
      // Event listener direto, sem sistema de eventos sintÃ©ticos
      button.addEventListener("click", ctx[1]);
    },
    p(ctx, [dirty]) {
      // AtualizaÃ§Ã£o cirÃºrgica - sÃ³ muda o texto se count mudou
      if (dirty & 1) set_data(t, ctx[0]);
    },
    d(detaching) {
      if (detaching) detach(button);
      button.removeEventListener("click", ctx[1]);
    }
  };
}

// Helpers mÃ­nimos: ~2KB
// Seu componente: ~0.5KB
// Total: ~2.5KB
```

### O que "Svelte Desaparece" Significa

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SVELTE DESAPARECE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Tempo de Build:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Seu cÃ³digo  â”€â”€â”€â–¶  Compilador Svelte  â”€â”€â”€â–¶  JS puro    â”‚        â”‚
â”‚  â”‚  .svelte           (faz todo trabalho)      (output)   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                     â”‚
â”‚  Runtime (navegador):                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Apenas o JS gerado executa                            â”‚        â”‚
â”‚  â”‚  NÃ£o existe "Svelte" rodando                           â”‚        â”‚
â”‚  â”‚  SÃ³ JavaScript vanilla manipulando DOM                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                     â”‚
â”‚  "Svelte desaparece" = O framework nÃ£o existe em runtime            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ComparaÃ§Ã£o Visual: Virtual DOM vs DOM Direto

### React (Virtual DOM)

```
Estado muda: count = 1 â†’ count = 2

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  1. Re-executa toda a funÃ§Ã£o do componente                         â”‚
â”‚     â†“                                                               â”‚
â”‚  2. Cria NOVA Ã¡rvore Virtual DOM                                   â”‚
â”‚     { type: 'button', props: { children: 2 } }                     â”‚
â”‚     â†“                                                               â”‚
â”‚  3. COMPARA com Ã¡rvore anterior (diffing)                          â”‚
â”‚     { type: 'button', props: { children: 1 } }                     â”‚
â”‚     â†’ Encontra diferenÃ§a: children mudou                           â”‚
â”‚     â†“                                                               â”‚
â”‚  4. Aplica mudanÃ§a mÃ­nima ao DOM real                              â”‚
â”‚     textNode.textContent = 2                                        â”‚
â”‚                                                                     â”‚
â”‚  Trabalho: Re-render + Diff + Patch = 3 passos                     â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Svelte (DOM Direto)

```
Estado muda: count = 1 â†’ count = 2

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  1. Compilador JÃ SABE que `count` afeta o textNode               â”‚
â”‚     (anÃ¡lise estÃ¡tica em tempo de build)                           â”‚
â”‚     â†“                                                               â”‚
â”‚  2. CÃ³digo gerado atualiza DIRETAMENTE                             â”‚
â”‚     if (dirty & 1) textNode.data = count                           â”‚
â”‚                                                                     â”‚
â”‚  Trabalho: Update direto = 1 passo                                 â”‚
â”‚                                                                     â”‚
â”‚  NÃ£o existe:                                                        â”‚
â”‚  âœ— Re-execuÃ§Ã£o de funÃ§Ã£o                                           â”‚
â”‚  âœ— CriaÃ§Ã£o de objetos Virtual DOM                                  â”‚
â”‚  âœ— Algoritmo de diff                                               â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## O Poder da AnÃ¡lise EstÃ¡tica

O compilador Svelte faz **anÃ¡lise estÃ¡tica** do seu cÃ³digo:

```svelte
<script>
  let name = 'mundo'        // â† VariÃ¡vel reativa
  let count = 0             // â† VariÃ¡vel reativa
  const PI = 3.14159        // â† Constante (nÃ£o precisa rastrear)

  function increment() {
    count += 1              // â† Compilador sabe que isso muda `count`
  }
</script>

<h1>OlÃ¡, {name}!</h1>        <!-- Depende de `name` -->
<p>Contagem: {count}</p>     <!-- Depende de `count` -->
<p>Pi: {PI}</p>              <!-- Depende de `PI` (constante) -->
<button on:click={increment}>+</button>
```

O compilador **sabe em tempo de build**:
- Quais variÃ¡veis sÃ£o reativas
- Quais partes do DOM dependem de cada variÃ¡vel
- Quais atualizaÃ§Ãµes sÃ£o necessÃ¡rias quando algo muda

```javascript
// CÃ³digo gerado (simplificado)
p(ctx, [dirty]) {
  // `dirty` Ã© um bitmask indicando O QUE mudou

  // Se `name` mudou (bit 0)
  if (dirty & 1) set_data(t0, ctx[0]); // Atualiza "OlÃ¡, {name}!"

  // Se `count` mudou (bit 1)
  if (dirty & 2) set_data(t1, ctx[1]); // Atualiza "Contagem: {count}"

  // PI nunca muda, entÃ£o nÃ£o hÃ¡ cÃ³digo para atualizÃ¡-lo!
}
```

---

## ImplicaÃ§Ãµes PrÃ¡ticas

### Tamanho do Bundle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AplicaÃ§Ã£o "Hello World" com contador                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  React:                                                      â”‚
â”‚  â”œâ”€â”€ react.production.min.js      ~2.5 KB (gzip)            â”‚
â”‚  â”œâ”€â”€ react-dom.production.min.js  ~40 KB (gzip)             â”‚
â”‚  â””â”€â”€ seu cÃ³digo                   ~0.5 KB                    â”‚
â”‚  TOTAL: ~43 KB                                               â”‚
â”‚                                                              â”‚
â”‚  Svelte:                                                     â”‚
â”‚  â”œâ”€â”€ runtime helpers              ~2 KB (gzip)              â”‚
â”‚  â””â”€â”€ seu cÃ³digo compilado         ~1.5 KB                    â”‚
â”‚  TOTAL: ~3.5 KB                                              â”‚
â”‚                                                              â”‚
â”‚  DiferenÃ§a: Svelte Ã© ~12x menor!                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Escalabilidade do Bundle

```
Conforme sua aplicaÃ§Ã£o cresce:

React:
  Base: ~43 KB (runtime fixo)
  + Componentes: cresce linearmente
  + Bibliotecas (Redux, etc): +30-50 KB

Svelte:
  Base: ~2 KB (helpers mÃ­nimos)
  + Componentes: cresce linearmente (mas cÃ³digo mais eficiente)
  + Stores nativos: 0 KB adicional

Em apps grandes, a diferenÃ§a diminui proporcionalmente,
mas Svelte sempre comeÃ§a menor.
```

### Performance de AtualizaÃ§Ã£o

```javascript
// Benchmark: Atualizar 1000 itens em uma lista

// React (Virtual DOM)
// 1. Cria 1000 objetos Virtual DOM novos
// 2. Compara com 1000 objetos anteriores
// 3. Identifica mudanÃ§as
// 4. Aplica ao DOM
// Tempo: ~15-25ms

// Svelte (DOM Direto)
// 1. Atualiza diretamente os elementos que mudaram
// Tempo: ~3-8ms
```

---

## Quando Cada Abordagem Brilha

### React (Runtime) Ã© Melhor Quando:

- ğŸ¢ **Ecossistema Ã© prioridade** â€” milhares de bibliotecas
- ğŸ‘¥ **Time grande** â€” mais fÃ¡cil encontrar desenvolvedores
- ğŸ”„ **MudanÃ§as dinÃ¢micas intensas** â€” Virtual DOM amortiza custo
- ğŸ§ª **PadrÃµes estabelecidos** â€” arquiteturas bem documentadas

### Svelte (Compilador) Ã© Melhor Quando:

- âš¡ **Performance Ã© crÃ­tica** â€” apps que precisam ser rÃ¡pidos
- ğŸ“± **Mobile/Low-end devices** â€” menos JS = mais rÃ¡pido
- ğŸ“¦ **Bundle size importa** â€” landing pages, widgets, embeds
- ğŸ¯ **DX Ã© prioridade** â€” menos boilerplate, cÃ³digo mais limpo
- ğŸ†• **Projeto novo** â€” sem bagagem de cÃ³digo legado

---

## Exemplo Comparativo Completo

### React

```jsx
// Counter.jsx
import { useState, useCallback, useMemo } from 'react'
import './Counter.css'

export function Counter({ initialValue = 0, step = 1 }) {
  const [count, setCount] = useState(initialValue)

  const increment = useCallback(() => {
    setCount(c => c + step)
  }, [step])

  const decrement = useCallback(() => {
    setCount(c => c - step)
  }, [step])

  const isEven = useMemo(() => count % 2 === 0, [count])

  return (
    <div className="counter">
      <span className={isEven ? 'even' : 'odd'}>
        {count}
      </span>
      <button onClick={decrement}>-{step}</button>
      <button onClick={increment}>+{step}</button>
    </div>
  )
}

// Linhas: 24
// Imports: 3 hooks
// Bundle: +43KB base + cÃ³digo
```

### Svelte

```svelte
<!-- Counter.svelte -->
<script>
  export let initialValue = 0
  export let step = 1

  let count = initialValue

  function increment() {
    count += step
  }

  function decrement() {
    count -= step
  }

  $: isEven = count % 2 === 0
</script>

<div class="counter">
  <span class:even={isEven} class:odd={!isEven}>
    {count}
  </span>
  <button on:click={decrement}>-{step}</button>
  <button on:click={increment}>+{step}</button>
</div>

<style>
  .counter { /* estilos */ }
  .even { color: green; }
  .odd { color: blue; }
</style>

<!-- Linhas: 28 (incluindo CSS!)
     Imports: 0
     Bundle: ~3KB base + cÃ³digo -->
```

---

## âœ… Desafio da Aula

### Objetivo
Analisar o output do compilador Svelte para entender o que ele gera.

### InstruÃ§Ãµes

1. VÃ¡ para [svelte.dev/repl](https://svelte.dev/repl)
2. Escreva um componente simples com uma variÃ¡vel e um botÃ£o
3. Clique na aba "JS output" para ver o cÃ³digo gerado
4. Identifique:
   - Onde o elemento Ã© criado
   - Onde o evento Ã© adicionado
   - Onde a atualizaÃ§Ã£o acontece

### Spec de VerificaÃ§Ã£o

- [ ] VocÃª consegue identificar a funÃ§Ã£o `create_fragment`
- [ ] VocÃª encontrou onde o `addEventListener` Ã© chamado
- [ ] VocÃª encontrou a funÃ§Ã£o de update (`p`)
- [ ] VocÃª entende que nÃ£o hÃ¡ Virtual DOM no cÃ³digo gerado

### ReflexÃ£o

Responda mentalmente:
1. O cÃ³digo gerado usa `document.createElement` ou React.createElement?
2. Existe algum "diff" sendo feito?
3. Onde estÃ¡ o "Svelte" no cÃ³digo gerado?

---

## ğŸ“š Recursos Adicionais

- [Svelte: Rethinking Reactivity (Rich Harris)](https://www.youtube.com/watch?v=AdNJ3fydeao)
- [Virtual DOM is pure overhead](https://svelte.dev/blog/virtual-dom-is-pure-overhead)
- [Svelte REPL](https://svelte.dev/repl) â€” veja o output do compilador

---

**PrÃ³xima aula:** [2.2 â€” Reatividade: atribuiÃ§Ã£o vs hooks](./2.2-reatividade-atribuicao-vs-hooks.md)
