 Yeah, thanks for the introduction. I'm going to talk about the visualization framework that I've been working on over the past year or so. I hope that the projector won't fail me. I heard it's about the background color, so I tried to change a few slides to black. However there is, I put the slides online, So if you want, you can scan this and open them on your laptop or phone or later in case we're running out of screen time here. Give you just a moment. All set? All right. So, hello. First, a little bit about myself. I'm Gregor, I'm from Berlin, and I've both been visualizing data and building visualization tools for about 15 years now. It started as a freelance business, and during that time, I built, together with a few colleagues, I built a tool called Data Wrapper, a user-facing tool for creating charts. I also built a library a year later for color computations. It's called ChromaJazz. And inexplicably to me, it has like a million weekly downloads on NPM. I don't know who's downloading this every week. After my freelance time, I got a job at the New York Times in 2014, where I started at the graphics department. I worked on a lot of fun projects. and let's see if that works. So I counted them. It's published almost 100 stories in these four years that I've worked there, which amounts to about two or three graphics per month, which is a crazy pace when you're working like this. And so sometimes a graphic would take like a month. Sometimes it would take just a day to work on something. And to survive in this environment as a developer, you have to be really fast and you have to have the right tools that let you be fast And after the New York Times I went back to work on Data Rover which we then turned into a real company with a real office hiring real people some of which are here today And that was the time where my journey with Svelte begins. So we started using it in a few places around the time when we started the company, which was still version one. So we have basically been on an endless migration journey since then, but also a very fun one. And I've grown very fond of Svelte. Fast forward seven years later, I took a break from DataWebber and I decided to go back to news, which is what I'm doing now at the German Newsroom Die Zeit. And this little break in between gave me an opportunity to think about what kind of tools I would be using now. because the way we've been working at the times since then, like the whole front-end development world has changed a lot. And this is what brought me here today. So that is the motivational part. Like, why the heck do we need yet another visualization framework? That's always when you hear about a new framework, you feel like there's already this and this and this, and this is what I want to address at this point. So also, personally for me, like, why ruin my perfectly, my perfect sabbatical from my data visualization job by working on a data visualization library? Yeah, I was supposed to do something else. And the reason is that the, like, the charting toolbox that we used by the time I left the Times was, like, mostly using R. Some used Python for, like, the data analysis and scraping and refinement part, ggplot for visual prototyping, so trying out ideas for charts, seeing them not just on a piece of paper, like maybe how it could be, but with the actual data, trying out different forms to see which one works, and then either going from there to a static visualization via Illustrator or going through Vanilla.js and D3.js for production code. And so I'm not sure who's been using R and tidyverse here. Okay so good I have the slide So the way this works is you read some data and then you have different functions that you can use For instance, this is a data set of Olympic medal winners. And here are the group by nationality and gender. And then we summarize and count the number of winners for each country and gender. We can then compute the percentage of female athletes, female medal winners per country, and sort that by this. So this is sort of a normal way to refine data in the Tidyverse. You then end up with a nice table, and you see that in this data set, Cameroon had the highest percentage of female athletes. You can then pipe this into a ggplot command, which lets you create thousands of different visualizations. Here I'm just using this data that I just created, mapping the percentage female that we just computed to the x aesthetic or the x axis, you could also say. I'm adding the sum of female and male, so the total number of athletes per country as the y axis. and then I'm just using the geometry, the point geometry and the log scale and get the chart like this. And so writing this takes 10 seconds and then I can try another one. Maybe this is not the plot that we're gonna publish so I'm changing it and changing it and changing it. This sort of rapid prototyping approach is what makes this tool so useful. Once we were at the point that we found one, I found an image that works. It was about recreating this chart in D3 at the time. So again, who has worked with D3 here? So that's a lot. So I'm probably telling you nothing new when you know that creating a bar chart in D3 is a lot of work. So you need to first set up your SVG element, some margins and the width and height. Then you get up to create your scales. So you need a band scale for the labels. You need the Y scale for the length of the bars. You then create the elements. You have to create the axis. There a helper in D3 that you can use the axis bottom Then there another one for the Y axis and at the very end you get to finally create the bars So the rectangles for the bars, which have the width computed by the X scale and so forth. And that's obviously not a way you can easily prototype in, which is why back then we've been using ggplot, but it's a very flexible way to structure visualizations. And there's probably, there's no limit in what you can do. But the big question is, what is the best visualization, that I face is what is the best visualization stack in 2022, 2025? So obviously I'm not gonna, I won't gonna go back to like writing vanilla JavaScript and D3, but what is it? So I used this break that I had to take a survey on all the visualization frameworks, specifically for Svelte that are out there because that's, as I said, the framework that I've grown to love the most. And yes, and as a quick disclaimer, I am not here to trash talk other frameworks. So first things first, I highly appreciate everyone who's working on open source. We've heard a lot about why it's so important to work on open source. And I've been doing this long enough to know just how much work this is. And sadly, most people have to do this on top of their day jobs. So thank you to everyone who's creating or supporting open source work, and you are all my heroes. We still have to take a critical look. So obvious first attempt, just use Svelte and D3.js. I've been using this like when I was working like on stuff in between. Also in DataRapper we've been using Svelte NT3 as a combination. And let's see how this works. I'm going to zoom in a little bit. So here's a bar chart created using Svelte NT3. Same kind of thing. I have to still create, set up my margins, set up my dimensions, create the scales. But then instead of going through the select append DOM management using D3, Svelte can do all this for us. I create the axis and then finally I create the bars.

 Simple as this. But it's still very verbose. So this is not a good way to prototype. So let's look at another one, this Layer Cake. Layer Cake tries to solve this problem that you have to essentially this basic setup around your chart. You have different layers. You might have a SVG layer, a canvas layer, an HTML layer, and they all want to share the same scales. So in a layer chart, bar chart, you can use this convenient layer cake component that you pass your scales. It will also auto detect scales based on the data to some degree, but it does not detect that this is a bar chart. So the fact that you're using a scale band, I have to pass the scale manually. then I get from layer card I get this SVG layer component and the rest I have to do myself there's like a whole component library on the layer cake website where I get like some inspirations but the framework itself does not contain any of these so in practice I would have to do this again so go through compute my ticks and iterate over them create the grid lines and create the text labels for each of these ticks that are displayed here. And the same for the bars, I have to loop over my data, create the reg nodes, and then compute the scale, the width and the height of them, and put them in. So this bar component, for instance, is not, it's good for this kind of bar chart that start at the zero axis, but if I had a bar chart where if the bars would, some of like a Gantt chart like would start at another number, I would have to modify this component. So it's not a generalized component that I could use anywhere. So let me see if I go back here. Layer chart is another framework that I think was presented last year at the Svelte Summit. It looks very promising. and you said a lot of interesting part, but this one major flaw is that it's based on Tailwind, and we're not using Tailwind, and there no way to make this work So that was a no But maybe a brief step back like what was that what made all these other frameworks work so nicely And let me take the time a little bit. Yeah, good. So I think it is no accident that frameworks like D3 or GGplot are so popular and are so flexible, and I think it's time to explain why that is, because even for me, working in data viz for so long, it took me a while to realize the power of the grammar of graphics. Another show of hands. Who knows about the grammar of graphics? So that's just a few of you, so it's good that I have this. This is Leland Wilkinson, and he's somewhat... He was an American statistician and computer scientist, and I think we should all refer to him as the godfather of visualization software because in the late 70s, he got this computer, it's a Z2 computer which had one megabyte of RAM, four megahertz CPU, no hard drive, two floppy drives. And he used this, and I think he took this photo around 2008 and it was still running then, the computer. He kept this in his basement. And so in the late 1970s, he used this computer to follow a very sophisticated goal, which is he wanted to produce a software package that could draw every statistical graphic that he had ever seen on this computer. And he went about and did it. So his first attempt was called SysStat. it's sort of like a UI program that would let you create all of these he spent 15 years doing this, he founded a company grew it to over 50 employees and then sold it to SPSS in 1995 after this he had another shot with a library that he called the graphics production library GPL, he obviously had to rename it after a while for some conflict So he renamed it to VisML. And it introduced a new architecture that had helped him to reduce the size from this whole software bundle from the staggering 1 megabyte to down to 500 kilobytes. So he was really driven by this attempt of making the code more efficient to run and to maintain And then he wrote this book in 1999 The Grammar of Graphics, which is the combination of almost 20 years of his making visualization tools. And in this, he described that rather than using names like Scatterplot or Candlestick or Stack Bar Chart or whatever to describe graphics or charts, he presented this approach of describing, rather describing how they are made of. So of independent components like axis, scales, the geometry, how the data is being mapped on. In this book, there's a whole chapter about how pie charts are constructed. And he goes chapter for chapter through this process of you have the data, and then you map the data to scales. You use statistics, for instance, to compute the counts per group, and then you map the aesthetics to the geometry nodes, map that to a coordinate system, and then you end up at the rendering. I have the book at home. It's not an easy read, but I think it's one of the most transformative books in the field. just a very quick run through what came out of this one there's two computer scientists at Stanford took his ideas built this tool system called Polaris and the next year they turned it into a company and it's Tableau obviously a very big success there's GG plot came out in 2005 based on these principles by a statistician from New Zealand named Hedley Wickham He wrote a paper where he refined this concept. So there's not this one grammar of graphics, there's different approaches of this, but they all share the same idea. Then we enter the JavaScript world in 2009. Mike Bostock and Jeffrey here came up with this with his protovis visualization framework with sort of the predecessor for D3.js, which then Mike worked on since 2011. D3 is a very low grammar of graphics but it supports nearly every visualization imaginer hence its success Jeff here on the other hand went on to work on Vega which is a different approach to a visualization grammar, describing the charts in a big JSON blob rather than code. There's a second attempt, Vega-Lite. And the final one that we are at now is called ObservablePlot, which is observables of a company that Mike Bostock, the creator of D3, is now working at. And I think this, I saw ObservablePlot and was like, this is the framework that I want to be using. So to create a bar chart in ObservablePlot, it's these three lines of code. To create a more complicated plot, like an area chart with a line and a baseline, you have you just add these they are called marks so the area y is the mark there's a line mark and the rule y mark and you can use transforms so this is a histogram again there's no like plot dot histogram but you create the rect y mark and use the bin x transform to in the same Olympians datasets here we are binning on the weight axis and computing the counts for each of the bins but what i wanted to so the next thing i tried is using observer plot in svelte and so what i did was i created this little i hope you can see it i created a little wrapper component it essentially gets this whole like svelte plot options observer plot options as as a prop and then it uses this my plot action to essentially just call redraw the plot every time the options change in a way i tried it out and it works it works nice so here's the plot it when the width changes, I can do everything that I can do in observer plot, I can now do in Svelte. But there is a problem that I ran into. And so back here. And that is that

 So this is my first attempt, essentially adjust the component and pass all the options. And as these plots get more complicated and more complex over the course of iteration, you end up throwing more and more marks in there and refining the marks using the transforms to do more statistical alterations of your data. and it feels like I'm not in the right language here. So essentially I'm writing this long JavaScript object here. I thought about maybe moving it up one step so that the props are being passed directly. So here, instead of passing the title as the object, I can pass it right here. But there's still this long marks array. And what I really wanted is it to be like this. So I can just use the marks as Svelte components, which not only looks a little bit nicer, but it also uses the Svelte control flow. And Svelte would now manage the DOM for me. So whenever I have things that have changed after user interaction, like if or each block's Svelte would handle the removal and adding of the marks, which means I could also do something like a fading of a line if I do it. And this, so I thought long about, should I just try to find a like a Syntrax sugary solution that makes, allows me to just write code like this and translate it into this options that I pass into observable plot. And I thought, ah, let's try it. And that is what Svelteplot is. And without further ado, hello. Hello. Let's see. I put the repo right after the, repo live after the talk. So this is Svelteplot. Thanks for the confetti, Svelte confetti. What is Svelteplot? The simple definition is it's the framework for creating data visualization as well. It very closely based on the API of observable plot but it implemented from scratch as well five components um this is the website you can check it out later um here a plot in svelteplot so same thing i have the plot and then each of the marks that are consistent that the plus consists of are components and i just pass the data and the aesthetic mappings as props and this is the chart. Svelteplot is smart enough to realize that this is an area component, so it extends the scale to zero, for instance. What's also nice about SvelteManaged DOM is that I'm just inside SVG now. As with Layer Cake and the other SVG frameworks, I can just create a gradient and use it as fill, and then I have this gradient chart. there's a few interactivity helpers, so there's a pointer mark that doesn't paint anything by itself, but it just tracks your mouse and you pass it a data set and say, I wanna track the X axis. And then whenever I hover over the chart, this snippet will get the data array, which is either empty when I'm not over the chart, and then here I'm just creating a rect mark. So what this does is just fills this while I'm hovering, and since it's all svg i can use this as a clip clip path for instance so here i can then use this interaction to uh to hide parts of my plot um quick how we're doing the transfer so how the transforms are being done in in svelte plot so in observable the transform here the bin transform which is, again, taking a continuous variable like the weight of the Olympic medal winner weights and then creating a bunch of bins, so from one kilogram to two kilogram, et cetera, and then producing a count. In Swerdplot, I decided to just make this a function that returns the props that I can just directly feed into the component. The syntax is okay-ish, I feel. I also have a little bit of a, I very confused how the binx transform in observer plot knows about the data because it not being passed into the function it somehow returns something that then the plot the the main plot comes but this is how it is in the observer plot this is how it's in svelte plot um svelte plot is is extensible so here's an example for a line chart the line mark has a has the the feature for markers so that means every data point you can create a marker there's There's a few built-in markers for circles and ticks, but what if you want to have your own? So here's the same line chart, but instead of setting the marker here, I'm passing a snippet called marker, and then I can just, so this is the marker component here, this is just the marker tag in SVG, and this is the path that has been drawn for every marker, So whatever I have here will change the thing. And what's nice is now I can again use all this magic here. So here I have, it's silly, but I have like a thing that's changed from true to false. And then it's just using the fly duration and the fade duration to get them out just to see. I just wanted to see if this is like an approach that makes sense or not. because often it's these little things that make the difference. We ran into a few issues, so all the styles are inline styles, there's no like, we're not using tailwinds or any CSS frameworks, so that makes it a little, that makes it a little hard to use external CSS to overwrite the marks, so for instance, say my tick marks, tick marks, I wanna use a different color for them, but I don't want to pass it as props to the access component. I would always have to use add important after it because if I have a class-based style, it's been overwritten by the style-based. So I added emotion CSS support. It's not part of Svelteplot, but if you pass it in instance of emotion CSS, it will put all the styles in extra classes, even for the generated styles that are based on data. How are we using salt plot? I still the person using it the most in our team there been some uses from other team members but I hope that after this there be more but the first example that I brought to you is a dashboard for German election polls that I've worked on so we had an existing dashboard that looked like this scroll down so it looks like this it's had this one chart for all the for the polls there's like a polling average that moves and then there's the dots for the individual polls and that was about it on the page and so we we had a big plan to to re redo this whole page and um uh make it nicer then uh the election was scheduled for september this year obviously this didn't happen uh the government collapsed right after the u.s election so we had to hurry up a little bit and i've wrote all of this in svelteplot so this is the the thing that we have on the page now it's the same kind of chart here's that's exactly the same thing i'm using the pointer the pointer mark and the clip mask because i want to i want to be able to roll back in time to see where the values were at this time there's little small multiples now um then we have the table is not i think we have a little bar chart comparing the current polling with the last election we also wanted to provide some context for the polls so this is there's little charts comparing um the average of the polling with the actual election result in 2021 now there's the result for 2025 because we want to see how good are the polls and finally we had this little table where we want to show how good each of the institutes are and this is where where the prototyping came in this was one day before we launched this page and all i had was this table this came out of like our our calculations where we look we were looking at all the past elections and all the past polls and then checking how far away from the election result was each where each of these institutes and we came up with this number of like how how much error they had in there and i i thought this is a little sad to just show this number. So what I did is I loaded this raw data. So again, all past selections that we had in our database, and then the polling error that each of the institutes had, and then just fired up Svelteplot on my page and could iterate over it. So one way to show them would be

 would be the tick mark, the tick X mark, which just maps the polling error to the X dimension, and then you get a line for each of the rows. Another way would be a histogram. So I use the histogram, because you sort of see the overall distribution, refined it a little bit by setting a different interval, removing the Y-axis, a little more refinement, adding the one in a rule x mark to show the average error, and this is what we publish then. So all these are little Svelteplot components. Also, this is also Svelteplot on the side. Another way we're using it is data scrollers, so the fabulous Sveltescroller plus tweens, the native Svelte tweens and Svelteplot is just magic. So here's a project that's just a couple weeks ago where we are going through all the chaos that Trump has created with his tariffs. And so as I'm scrolling through the page, I'm updating the data on the page with a tween and then Svelteplot just automatically changes the plot. And yeah. Okay, but it's not all gold and shiny, so there's time for critical reflections, because we already had a lot of discussions about Svelteplot and our team, and a few issues we ran into, one being bundle sizes. So this is three lines of code creating a very simple area chart, but it comes at a staggering 110 kilobytes, which is, why is it? So this is a code of the plot component. So all this magic that Svelteplot is doing is now can only be done because it's importing a lot of stuff that it may need, but maybe not need. So I'm importing the color legend component, the grid components, the frame component. There's code that automatically detects scales. So if you pass in data that has dates and you map the dates to a positional scale, it will use the time scale but it has to import all of the stuff before and if you look at the auto scale it looks like this so i having like this huge import statement and um this can right now this cannot be tree shaked away because it's uh it's just dependent on the data so i uh we added an uh alternative um so there's a alternative plot component that is removing all of this implicit magic which means now i again move one step towards the d3 approach where i have to create the scales myself i pass the scales pretty much as it is in layer cake and then have to import all of the components so in the by default third pop will always create the axis because that's what's most useful for most of the plots that we're using but anyway by doing this i I got it down to 72 kilobytes, but just as comparison, if I would just rewrite this in Svelte, NT3 without any other magical framework, I'm down to 20 kilobytes. So this is a trade-off, and it's a trade-off between being able to iterate very fast and trying out other ideas. And then, so what we did in one case, it was for a dashboard that was on the homepage for a while, So then we decided to just, after the whole iteration phase was over, and we knew this is the form we're going to run with, we then reimplemented it in D3. Another issue is performance. I haven't done extensive performance benchmarking, but I can say that's definitely slower than observable plot. So observable plot is just a synchronous function that creates the, you give it the data and all the options, and then it returns an SVG DOM. and you can do all sorts of optimizations that so far I haven't been able to do in SveltePod. I guess Svelte itself has a little overhead for every DOM node it creates. So far, SveltePod mostly supports SVG layers, so it's not as nice as layer charts, for instance, where you have the SVG and the canvas layer, and then in layer charts you can use the same components like the bar component, and it will automatically know in which context it has been created. Like here in layer chart, I can use the bars component and it will just detect now I'm in a canvas context and use a different rendering So that very nice Svelteplot doesn have that In Svelteplot basically everything is svg there is the i think the dot node and the geo node a mark they have they have a canvas mode where then they create a little image that's just embedded in svg that kind of works but for for html i use snippets there's a few things that i think are missing from svelte or that would help a framework-like Svelteplot. One thing I'm excited about is the async stuff that has been teased a little bit because I saw that using async, I could just asynchronously load components based on the runtime. I don't know if it will work, but it will be fun to try. Also transitions on Sveltecomponents because what I really want to do is something like this. So I have a line component that is aware of the plot and the data and the scales, and I can just pass in the transition as I would with the pass. I just want to pass this over. And I tried so many things to just pass all this down and nothing was really happy. And one thing that I miss is the let directive. I know it's done, but this was just so much nicer. So the pointer, the let data, and I could just use the children. It's always the children, and now I always have to write the snippet children, the curly braces. But yeah. Summary, Svelteplot is not a library, but it's a grammar of graphics. That means it is a language for describing graphics and you can create thousands of things. There's no point of showing like 10 or 20 examples. You have to use it and to get to learn it like a language and then you will be, you know what you can do with it. It's not a complete grammar yet. So one thing that is missing both in observable plot and in Svelteplot is the polar coordinates. So any fun radar plots or pie charts you cannot do with Svelteplot yet. Svelteplot is really nice for rapid prototyping and seamless prototype to production transition, which is what is very useful in a news environment where you show an idea and essentially the next day or two days later, you want to have it on the page. So this helps us or helps me to be more innovative and not always use the same thing that we done last time Svelteplot is not ideal if you need high performance and the smallest footprints of your app. It's definitely not production ready yet, sorry. We are using it in production, but it's still in an early stage, so the API may change and you will likely encounter some bugs, so be aware of that. It's also not backed by a big benevolent tech company, so it's mostly just me doing it on my free time. And since I'm also maintaining a few other open source libraries, I'm well aware that this is not a sustainable model for the long time. This means we have to do the old-fashioned way and work together. So Svelte.org needs contributors. So if anyone got excited about this, please get in contact. I set up a Discord where I'm basically sitting in all myself until now. So feel free to join. Also, if you're not coding, there's a lot of stuff like documentation and testing that everyone can help with. And finally, Svelteplot is an idea. So I'm super excited about it, but that doesn't mean that it has to be the thing that is just... So I don't know if it'll be around for the next five years. Maybe the idea wasn't the best to reimplement ObservablePlot and Svelte. I don't know yet. Perhaps there's too much work. Maybe a better framework will come out. There's a new version of Layer Chart coming up shortly. But I'm still excited. And I want to thank everyone who helped me. Obviously, I want to thank ObservablePlot for making their plotting library open source, which is not a given anymore as it used to be. Thank you to all the V3 contributors. Thank you to all the Svelte contributors. Thank you to SveltePress, the little project that I use for the documentation. It's just like VPress but in Svelte. Very fun. Also, thank you to Layer Cake and Layer Chart maintainers for their work and their inspiration. Finally, thank you to SvelteReveal.js, which I've been using in this presentation. And thank you, everyone, for listening. Thank you.