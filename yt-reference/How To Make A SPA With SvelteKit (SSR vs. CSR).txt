 Hey friends, what's up? Today I want to talk to you about how to make a single page application in SvelteKit. That's right, this is something that I often see people misunderstand. They think they have to use server-side rendering with SvelteKit, but that's really false. You can build any type of app with SvelteKit. But even if you're not interested in making single page applications, you're still going to learn a lot because I'm going to explain the difference between server-side rendering, client-side rendering, all of these buzzwords that people throw around like they mean something, but no one actually knows what they are, right? Alright, but before I get started, don't forget to like and subscribe, and you can also support me by becoming a patron. Alright friends, so let's look at this diagram here. So this is your traditional website that uses server-side rendering. You might have heard of the term multi-page application or MPA, which sounds really fancy, but it's just a regular website. So when you click on a link, the entire site refreshes. And basically that's it. So here we have your client, which is your browser. But a client can be anything. It can be your wristwatch or whatever, right? the kiosk where you get some information or etc. That's what a client is. So when you make the initial request to the server, which can be anything, in this case it might be Node.js, you're always going to get a fresh HTML file that has all of the markup inside of it. So here in this example, I have a body here and this is the content. So that's really how that works. And this is what SwellKit is by default. It's server first. So you're going to always get the HTML when you first open a page. So let's talk about single page applications or a spa. and this is basically where javascript takes over so again you have this client and you do an initial request so now in this case you no longer have a long running process like a node or something serverless functions really it's just really some random server and it just serves you a blank html file and javascript hooks into this file so in this example here we have this app div so this is your react svelte view and etc by default without using a meta framework right It's just a single page application. So in this example, it's really not the same code that the framework uses, but you can imagine this is something like that. So you're creating these elements with JavaScript. JavaScript also takes care of everything like the routing using the browser history API and etc. And SwellKit is also a spa. And that might sound confusing to you at first. So which one of these is it, right? And that's a trick question because SwellKit is both. And what do I mean by that? So if you look at this example here, I just have this title SvelteKit Spa, and then if I go inside of the developer tools and open the network tab let me just refresh this entire site so as i said your first request is going to server render this using svelte kit so here you see why server site rendering is so popular for something like search engine optimization because a bot can now easily crawl your site and index it and even if you go and view page source if i do ctrl f i can search for svelte kit spa and you can see here it's server side render so we get the actual markup here But you might have noticed something else. Look at all of these files here. So how is SwellKit as Pa? Well, basically, once your site is loaded, now all of this JavaScript is loaded. So now we can use client-side navigation and SwellKit becomes a single-page application for a smoother user experience. So now we can see that in action. If I close the network tab, if I go to any other route, you see there wasn't really any hard refresh. It just navigated using JavaScript. And I can also go back and show you that. so SwellKit also has preloading so when I hover over this link it's going to preload all of these assets you can see here is data JSON so now we're going to get all of this data inside of this node ahead of time so this is going to be a much perceived and faster site right so now when we go to our site we really don't get a HTML page because it's using JavaScript right but when you first visit the site it's going to actually server-side render so let's refresh this page and you're going to see we're going to get these things as a HTML response and here inside of this selkie project let me just really show you i have this routes and here i have this special plus layout ts file at the root you can also name it plus layout dot server ts so let me just really show you so these are like the defaults and of course you don't have to include this by default this is something that i have done so that i can show you so server-side rendering is enabled by default client-side routing is enabled of course and pre-rendering is disabled. But now in this case if I disable client-side rendering, if I say that this is false, now we're only going to rely on server-side rendering. So if I go here and let's go to our site, so now you're going to see this is going to hard refresh. So pay attention when I go to this link. As you can see the spinner on top, here I have this client-side rendering route which isn't even going to work because I disabled client-side routing, right? And here I have this also endpoint and this dynamic route that you're going to look at later but as you can see now when we navigate through our site it just using server rendering it a regular multi application but this is where swellkit brings that nicer user experience and has a router on top of SwellKit So now we can say true and everything is going to work the same as before But going back to our example, maybe thinking, okay, if server-side rendering is so much better, a nicer user experience, why in the world would I make a single page application? And in most cases, you don't. If you don't need a single page application, just use the regular server-side rendered SwellKit app with a spa on top because you're going to know when you need a single page application and when it is well that can be for a variety of reasons you might already have a backend and you're building something like a dashboard where you really don't care about seo or that it's public facing right you also might be working on a browser extension where it doesn't make sense that you ship a server right or you might be working on a desktop application using something like electron or tori right and again this is where it makes perfect sense to use a single page application or you might want to build an app or an embedded device like a watch or something. I don't know what you crazy kids are up to these days, right? It can be anything. And you really don't have to worry when you should create a single page application or not because it's really going to be natural when you get to that point. But another strength of SwellKit is that you can have all of these things. You don't have to pick one thing. So for example, here I'm inside of routes. You can, for example, have an app and this can be, I don't know, something like XCollegeRoss. So you're working on a drawing app and etc. And this can be a SPI. You can really specify for this page that it should be a single page application. You can disable server-side rendering for specific routes. And then you can go again to routes and maybe you have docs. And now inside of here where you have your docs, inside of these docs, you can pre-render them. So you can have all of these things on a per route basis or inside of this layout file, you can specify it for your entire app. But in this case, I'm just going to delete these examples. Alright, but let's look at the difference between server-side rendering and client-side rendering in SwellKit. You might be familiar with this plus page.server.ts file in SwellKit. This is where your load function lives. So in this load function, I'm just fetching some quotes from dummy.json, and then I'm just going to return it, and this data becomes available to this page. So now if I open this page.swell file, this is available to us over the export data. So now we can loop over the quotes, and we can output them like normal. and this is really a nice user experience because it just loads instantly and this is probably going to be cached or you can pre this you can do whatever you want but now let look at the client side rendered version so here I have this CSR route and you can do one thing you can still use this loader when you're working on a spawn something else you can get some data and you can output this on the page usually what you're going to do if you're working on a spa you can use fetch inside of your component so here I have this component get quotes and I have this artificial delay set timeout. And here I'm just doing the same thing, fetching the data, and I'm using this await block to get the quotes installed. And that's basically it. But let me show you why this is a worse user experience. So when I go here, you're going to see first, we get this loading spinner, it takes a second. And this really isn't great, because first, you have to load the page, you have to wait for your JavaScript to load. And now you can fetch the resource. And you might be thinking, but I can have the same problem with server side rendering, In this case, it's even worse. I get a blank page. And that's really a good problem to have because that's really a problem with your infrastructure. And in most cases, it's going to be instantly fast because it's already cached and it's a much nicer user experience. And I also want to show you something else when you go to dummy JSON. So I know a lot of people are going to have a question, okay, how do I do off with Svelkit using a spa? And that's basically just something you're going to have to Google yourself. So Google Svelkit spa off or whatever, if that's something you need. But I'm just going to show you quickly in dummy JSON in their docs, how something like that might look like. So here in their off example, you're just going to have to authenticate things always using a fetch, right? So you're going to make sure the user is authenticated. You can use a Svelte store for that if you want. So that's how you can deal with off in a single page application. But as you can see, I have some things here that aren't going to work in a single page application like this server-side render route or this endpoint, right? We're just generating a random number. So if you're curious about this, I just have this number route, and then actually where it is number, so this is plus server TS, so I can open this, and this is just a random number. So of course, when you make a single page application, you don't have a server, you don't have an actual endpoint anymore. So any file that has server in it, it's not going to work when you make a single page application. So you lose a lot of those nice things when you're not using server-side rendering. But of course, other things like this dynamic route, where we have some number and etc. or whatever else like slug, right? where you're doing something, of course, that is going to work because it's just using client-side routing, right? So here you can see if I open this page, I just have this page, which is a store, and then I'm going to just show the data on the page. Alright.

 So let's actually look at how we can make a single page application. All right. So to make a single page app in SwellKit, you first consult the documentation, right? And this is what SwellKit already tells you. You can turn any SwellKit app using any adapter into a fully client rendered single page app. This is a mouthful. A spa by disabling server-side rendering at the root. And this is exactly what I've shown you before. So we can specify that server-side rendering is disabled for the entire app. Boom. That's how simple that is. Now we have a spa. All right. So now we can go here. Let me just close all of these files. Now I can go to the layout here, and I can just say server-side rendering false. All right. All right, so now you have another option. This really tells you what to do. So you can use the static adapter if you want, if you don't want to ship any server, right? If you just want a static HTML file where your Svelte app is going to live in. So to do this, you can add this adapter. So you can go to a terminal, you can say npm i, and you can say, let's see, what do they tell you? Svelte.js adapters, you can say Svelte.js and slash adapter and you can do that and then it's going to be installed but we already done that step and you can also include the d flag here. So it's a development dependencies and that's going to be basically it. Now we can do that but I'm just going to ignore this and let me start again the development server. And now inside of our config here so let me find this. If I go here you can see so I'll config. So now inside of here we just read the docs they just tell you what to do. They just tell you okay, replace this adapter auto by default with this adapter setting, which are already done. So what is really a fallback page? Well, that's any route that you hit that's going to redirect to this HTML file. And this can be anything depending on where you're hosting. They use an example search and search really has this documentation for adding a 200 page for client-side routing. And they actually explain it better than me. So now because you added this file into the root of your project, now when a request or a URL comes in where you don't have a static HTML page, it will reach your 200 page instead. So you can use your client-side route. And that's basically why you need this page. And this depends on where you're hosting this. And yeah, that's basically it. So now there's a couple of steps and you have a single page application you can host anywhere. But you're going to see you might run into some problems. And this is another lesson that you have to keep in mind. We're running this development server and everything looks fine. I might have told you that server-side rendering isn't going to work right, but you can see it works perfectly And this is because this is just development So when you build this page when you host it you might run into another reality This is why the greatest tip I can give you whatever you building the moment you can, just host it on whatever platform you're using before you use any fancy API, just so that you know immediately if you can use it or not. Otherwise, you're going to run into a nasty surprise later, right? But let me actually show you something. So here we have this config that looks beautiful. And now here is going to be a build folder, which is going to output for us but you're going to see you might run into a problem i'm going to say npm run build and let me just increase the size of this so this just takes a second really simple page and then we can even run npm run preview so we can preview our page and then instead of 5173 it's 4173 so we can look at our build page and now we can see swell kits pass when you go to server-side rendering everything still works you can see client-side rendering this is our endpoint this still works right even though this is not going to work when we host it but as you can see this is why it's important to host these projects and see what works and what doesn't so let me just close this quickly and another thing i have inside of here you can also use this to check for your params so you can check hey if this id is a number or whatever else you want so even when we go to another route that's not supported here like nope we can have this error page and then we can see not found so here i have this error page inside these routes so you can customize this however you want and that's really going to work the same as before but yeah if i go here and now for this route id number the problem is going to come if you want to pre-render this so it might be okay let's just pre-render everything let's see what happens i'm just going to say true because if you look at the build output you can see you have this 200 html so this is your cell kit app and inside your app here you have your assets and etc these are entries so this is your entire app bundle together but you might want to pre-render things and then you might run into unexpected problems but let's just see what problem you might run into so let's just run npm run build and then give it a second all right so now we run into a problem so it says the following routes were marked as pre-renderable but were not pre-rendered because they were not found while crawling your app and this might be cryptic at first when you see something like this because spellkit has to know which routes to pre and it does that by crawling your site for links So if you go to the Swell documentation for page options you can see that it tells you here what you can do So if you don't have a link to your dynamic route, which Swell doesn't have to pick up, you can specify it using entries. So you can specify these entries in your dynamic route, just like this, or you can do it inside of the SwellKit configuration. But I honestly prefer to do it this way. So let me show you what I mean. And you honestly don't want to pre-render your entire app in this case. So let's just say here false. So this is going to be default. And remember how I told you how SwellKit is awesome that you can do this on a per route basis. Well, we can actually go to source, routes. And let me just look at this. Where is the ID number? So here I'm just going to open this plus page.server.ts file. And now you can see, you can just specify the entries. So you can say, okay, I want to pre-render these pages in advance. It's going to be ID 1. you can also say id2 and you can specify it on a per route basis now we can say for this route hey export cons pre-render is true and this is also a great tip if you're not even making a single page application but are just pre-rendering your site you also might run into this problem and now inside the terminal let me just press ctrl c now you can say npm run build and this should build these pages all right so give it a second and awesome just expected so let's see what's in the build directory. You can see here it's app. Here is your entire app, your entry, app start, nodes, if you're not important what's inside of here, it's important that now we have these pre-rendered pages. So now we have this page which is just pre-rendered in advance for us. So now you can host this or whatever else you want. But yeah, basically you can do something like that. You can see it's really simple. So here we have this one, two. So this is the data for the page. If you look at this, if you have something here, then this is just going to work. And now we can see just by looking at the directory or this folder this is just really static assets of course it's going to work if you just put it on a regular server because there is no long running process right it's just serving these files and javascript takes over but of course your routing is going to work regardless and actually for the last part now that we have built this we can just host this on search so let me show you how to do that and i'm going to use search as an example because that's what Svelky does in their docs. Alright friends, so let's host this site on search, which is really simple, and again I want to emphasize inside of our config here in this case we already using the static adapter which is going to pre our site so it really doesn make sense inside of routes that we specify pre to true because it already going to pre these things and I just wanted to show you that that is an option, right? So now we have all of this configured, again double check everything, right? You have the proper adapter, you have this thing specified here for the fallback page, and now we can just go to the other documentation. Again, we always need to read documentation, right? So let me just close all of these files, just so it's easier to read. And I'm just going to open search sh. And again, we're going to go to their docs. And let's see, are we zoomed in? So now we can do this. And let's see, getting started with search. So how simple is this, friends, right? The only thing you have to do is run search. And I don't want to install it. I'm just going to use npx search. So now we already built this site, right? We have this build output here. The only thing I'm going to do inside our terminal is just going to say cd build. and I'm going to run npx search. Cool. So now in this stage, if you're following along, you're going to have to register. You can see I already registered and I'm just going to specify, okay, this is the path. You're going to get a random URL. I don't know if you can change this. You probably can, but you can see the URL is going to be fascinated camera. Okay, right. Now you just press enter and boom, that's it. Just give it a second and your site is hosted. This is just static HTML. So we can go to this URL and we can go to this URL You can see it just took a second. As you can see, our app is hosted live on the internet. How awesome is this, friends? And I already told you why it's really important to test your site because this server-side render route isn't going to even work. It's going to cause these weird issues, right? So you always have to test and then you're going to see it doesn't work. So of course, this works. Client-side rendering works. Of course, no problem. Here it is. Our endpoint is not going to work, right? because like what is it? Like we don't have a server, right? So we're always going to get nasty surprises if you don't test your page. As you can see, our default error page works beautifully. Again, you can use this dynamic route so we can go to one, we can pass it other numbers, two, three, four, and et cetera. So you can get things from the URL, you can do whatever else you need to do. And of course, if you're tired of your site, you tried it, let's see. We can also remove it. So we can tear down a project. If you go to search, and we can just say search teardown and the name of the project. So let me just see. So this is fascinated camera and we can just

 just go here to our terminal clear everything ctrl l and we can say npx search tear down and we can just paste our site without the url of course and then it's going to be gone let's see and boom that's it friends so now this site has been removed and it's really easy now you can share this with your mom or whoever else you want to right and yeah that's basically it all right friends so if you like what you've seen don't forget to like and subscribe and you can also support me by becoming a patron. Thank you for watching and catch you in the next one. Peace!