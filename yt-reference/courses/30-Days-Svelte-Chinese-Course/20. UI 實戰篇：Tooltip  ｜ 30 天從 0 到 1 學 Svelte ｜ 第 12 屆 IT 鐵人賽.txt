Hello 大家好 我是凱凱 歡迎收看凱凱學程室今天是IT田的賽 第二十天了今天我們一樣是UI實戰篇今天我們要介紹的UI是TooltipTooltip在前端當中的使用情景也很多像是有時候你想要幫你的標題或者是你的UI做一點額外說明然後這個額外說明可能是一個可選的就是當使用者有需要使用到或者是想要更多補充說明的時候才去顯示像這種情境我們就可以使用Tooltip來幫助我們的UI好那麼實際上我們要怎麼實作呢所以我們現在馬上就來試做看看吧這次的URL感覺起來是比較簡單一點不過我們來看一下裡面會有什麼細節首先我們先新增一個tooltip.svelte然後先把骨架寫出來之後我們就可以直接開始寫了首先我們先給一個tooltip的class name然後裡面我們放兩個東西一個是button當作一個trigger就是當作一個觸發點然後我們再放一個content來代表裡頭的內容好那我们先把它引入在app把它引入到app当中tooltip from tooltip.svelte之后呢我们直接去引用它好的所以我们可以来决定一下我们可能想要的属性有哪些第一个是我們可能會想要讓它有標題然後跟description body本身那大概是這兩個就可以了好 我們先試試看再來我們就可以來寫一下style好 style的話我們tooltip這邊就先省略好了我們先把button的樣式寫出來這邊的話一般你可能會使用icon來表示那我們這邊就比較簡單一點我們直接用一個問號來表示好所以這邊打trigger那這邊的部分我們把它做得像tooltip一點首先我們先給寬更高然後呢我們把backgroundcorder and transparent我們把背光拿掉然後把Boulder也先呃我們Boulder Radius給50%好 這樣子再來我們Boulder的部分我們給它3pxSolid然後AAA讓它看起來比較灰一點我們給999好了999然後呢在這邊在這邊我們可能要調一下Light Height的部分大概18pxFound Size可能要調一下Found Size我們給1em看看然後Align, Text Align我們給Center好,這樣子那我们稍微把它定位一下然后呢我们顺便把box sizing改成boulder box好这样比较好定位一点你看这边有一个这个button里面预设的padding跟margin被吃掉了所以我们把它都重新设一遍padding等于0margin也等于0好,這樣子就比較置中一點了那我們把Corder的部分也把它變得就是跟Boulder邊界的顏色是一樣的然後我們把它變成FoundWeigh位置把它變成粗體好,這樣看起來比較像對不對好這樣我們就有一個button然後呢,我想要讓它的cursor變成pointer這樣就會有一個手指頭的符號好這樣我們就有一個基本的雛形了再來這邊呢 我們想要放content嘛 對不對所以我們這邊可以放description不過呢 在使用場景當中你可能會想要 欸 自己額外做這個tooltip的樣式所以我們這邊呢 可以透過svelte裡面的slots來幫助我們做到這邊的話你可以這樣寫我們的預設就可以這樣子裡面放一個p 然後再給樣式然後點content這邊我們可以做一些調整一樣我們先給一些padding 10px然後border-radius讓它看起來遠一點8px好了再來我們給box-shadow1px3px8pxrgba我們給它白一點這樣看起來比較不會那麼的顯眼0.2 好吧好 2然後 y 我覺得太多了所以我們這邊把它調成 2 好吧 11 感覺不錯 好這樣子這樣子就是一個最基本的雛形了然後呢 因為我們現在的 content它的這個它並不是一個絕對定文啊 所以呢你可能會出現說 欸 我原本是假設我在 app 這邊加了一個h4然後叫做 吧吧吧然後再放一個 tool-chip 進來的話呢 你會發現說欸 可能放這樣會比較明顯放在這裡然後我再把 content 這邊拿掉你會發現這個 head這個文字的部分它一直在跳動啊對不對那這對使用者體驗來說是不太好的所以在這邊我們想要把content的部分變成一個絕對定位讓他不會讓其他的內容一起跳來跳去好,所以我們現在就來試做首先我們先把tooltip變成這個相對定位relative然後呢在content這邊我們加上position等於absolute好,這樣子就吸進來了對不對那我們力index稍微調整一下假設調成2好了把ToolTip的部分全部調高一點這樣應該會比較好一點然後呢然後我們調整一下這個Content的部分我們的left給0然後top給100%然後margin top我們給一點讓它有一點間距 看起來會比較好看一點好 大概像這樣子就可以了好 這樣子一個最簡單的這個tooltip就完成了然後你這邊就可以放比如說標題這樣子不過呢你會發現啊 現在我想要它在這邊嘛它在最後面所以我們這邊可以再加上一個在外層再包一個diff讓它可以做定位不要tooltip-wrapper所以我們這邊給tooltip-wrapper然後我們把它的Display變成Inline Block讓它可以塞在中間然後我們讓它這樣子的間距應該OK不過這邊我們可能想要調整一下讓它的寬度跟高度可以跟標題一樣高所以我們這邊可以調整成1em好,會有點太小1.25好了1.31.2,1.2感覺比較好那這邊的話我們可能會想要把form size再調嗯

稍微調整一下14 1515 應該OK然後這邊可能還想要再小一點好 這樣子看起來差不多那這邊就是細部的UI也這邊就不跟大家做太多的調整了我們主要的重點是在於這個Tooltip的邏輯操作的部分這個tooltip的邏輯操作的部分好那這邊就可以隨便你放什麼東西了對不對所以我們這邊呢把content.p的margin先拿掉讓它看起來不會那麼大然後我們把font-size也變小一點好了yeahok然後你會發現它這邊竟然會變成粗鐵那是因為我現在把它放在h4裡頭了對不對所以它會吃到這個H4預設的style所以第一個要馬是你去調整你的Dong的結構或者是你可以在這邊去加一個這個all initial把所有的樣式都先初始化所以它現在會變成這樣子那我們在這邊加入一些這個內容比如說hello這是標題好,一個優秀的標題好,假設這樣好,那你會發現現在的寬度它沒辦法撐開啦,對不對所以呢,我們在這邊在content這邊這邊給一個寬度好了假設我們給300px那這邊也是一樣就是在實務上的部分你可能不想要歇斯你的寬度或者是你想用PASO或者是Macflip等等的替代那我們這邊就不再多提就是看大家的場景需要去做使用好好 接下來我們可以來寫一下邏輯的部分首先呢 我想要讓我的Tooltip在Hover的時候才會被打開所以呢第一個你可以用這個css 像這樣寫然後 displayblock 這樣子然後這邊我們就給一個display null這樣子就顯示出來了或者是當你的trigger當你的button在focus的時候才把他顯示出來比如說像這樣子不過呢這邊會有一個小缺點就是說你看喔現在使用者在hover然後他慢慢往下慢慢往下他想要跟下面這個元素互動結果到這邊就不見了那這是因為呢你有沒有看到tooltip這個icon跟這個中間這邊有一點空隙所以HOVER就被取消了所以它當然就會不見所以這個時候用CSS的缺點是說可能你沒辦法透過JS去做到一些更細膩的控制所以在這邊我們可能沒辦法使用這一招我們這個就先拿掉好然後我們先把樣式都拿回來然後另外一點就是說啊 比如說在我hover進來的時候 我想要讓我的tooltip有transition就是轉場動畫對不對 不過透過css當中的話透過css的話 你可能就要自己去實作transition的機制而沒辦法透過svelte內建的機制來做使用所以我們這邊可能就沒辦法這樣寫所以我們這邊就採用這個JavaScript來做操作吧首先我們在這邊寫一個Active的變數剛開始我們先給False然後呢在Trigger這邊我們去監聽一個函數叫MouseEnter好,那我在這邊宣告一個函數mouseEnter然後呢,在這邊我想要做的事情就是把active變成true嘛對不對所以handleMouseEnter跟 mouseLeavehandleMouseLeave一樣active 跟 false所以你可以發現我還沒有把那個變數拿進來這邊忘記拿掉所以你可以把你的改寫成 你可以把你的程式碼改寫成像這樣子if active 我們再把tooltip 顯示出來activeok 這樣子好 但是你會發現說 使用者可能滑鼠這樣亂晃 亂晃 亂晃晃到這裡 它就直接跑出來所以這樣就會有點礙眼嘛 對不對所以你可能會想要做一個操作是說只有當使用者到這裡然後可能過了幾秒鐘或者是零點幾秒確定使用者真的是想要跟這個元件做互動的時候我們再把ToolTip顯示出來所以我們在這邊可以做一個SetTimeout那我們在這邊做一個Enter Trigger好了Enter Trigger做的事情就是我們去SetTimeout然後呢把它放進來那這邊你可以把它當作一個profs做調整嗎當作一個屬性做調整假設叫timeout好了timeout感覺有點怪怪然後我們預設給400好那這邊就寫一個timeout400好像太400應該差不多了好 這樣子它就會過0.4秒再出來所以你就要在這 所以欸 不過你會發現好像不太對喔 這跟我們預期的行為不太一樣那這是因為呢你只要有進去的動作 它就會去做計數對不對 它就會開始做計時所以我們在這邊還要做一個操作是說如果mouse.leave的時候啊然後發現有計數器的話我們就去clear timeoutenter trigger然後同時我們把enter trigger然后呢同时我们把Enter Trigger变成NOR好同时呢我们在这边也去做一个Set I Out那这边是说当使用者离开然后过了0.4秒之后我们再去关闭它那原因是因为可能使用者可能只是想要跟這個互動想要跟你的原件互動等等好那我們等一下會繼續修正所以我們這邊呢為了這個之後可以使用所以我們一樣會用一個reference一個變數把它保存起來先把它記錄在這邊好所以呢這樣子就可以控制我們的原件開關了那还有一个情况是说可能使用者想要跟你的这个Tooltip里头的原件互动比如说我这里给一个标题点击查看教学假设长这样子好了然后这边是Tutorial这样子好那使用者可能会想要点进去看啊诶不过他一跑出来然后过了0.4秒这个Tooltip就关掉了对不对所以你會希望使用者如果停留在你的原件上的時候停留在你的原件上也就是content的時候你不想要去做active等於false就是把東西關掉所以這邊呢handle interaction那就是說如果使用者真的在跟我們的原件做互動的話如果現在有leaf的記憶體的話我們就把它拿掉clearTimeoutleafTrigger同時我們把leafTrigger也變成node為了預防萬一我們一樣再把active變成true不過這個其實也可以不用加所以呢在這邊就會長得像這樣子然後試試看進來了

那個Tooltip就不會再關掉了對不對然後等我真的要跳出去了欸?不過這邊有一個問題啦就是我跳出去了可是我的Tooltip沒有關掉因為現在跳出去的東西不是這個icon本身而是在我的原件裡頭所以呢你可以直接這樣寫mouse.leaf然後handle mouse.leaf這樣子嘿咻好 這樣子就可以了有沒有好 那再來我們加一點這個轉場的效果讓它看起來比較順一點那我們直接用最常用的transition fade好 那我們在這邊content這邊直接加入一個transition fade這樣子好 這樣子就有一個簡單的鍵入鍵出的效果然後進來然後再跳出來好這樣子你就完成了一個簡單的Tooltip接下來我們來看一下比較進階的功能首先當你在施作這個Tooltip的時候一定要記得說使用者並不一定總是會使用滑鼠來操作你的原件所以你可能想要這樣子比如說使用者點一下这时候呢它也可以打开那这要实作很简单我们就直接click去注册这个监听器那同时我们这边呢也要记得把它加上type等于button然后在这边我们就直接把它变成trueactive等于true点下去就可以了然后呢现在因为我把这个按钮的预设样式拿掉所以它现在没有这个focus的样式所以我们现在呢把focus的樣式也加一下那它叫做trigger對不對所以trigger.focus我們這邊就直接給它一個outline假設2px這樣子好了像這樣 雖然有點醜啦這樣子打開好 那打開的同時你可能也會想要用一個keydump來確保使用者可以按下esc來把你的Tooltip關掉所以你可以直接這樣寫比如說,e.t.e.scape如果是的話呢,就active等於false不然就直接什麼都不做好這樣子,所以當我按下esc的時候它就把我的Tooltip關掉了ok,然後當我比如說我用這個tab做導航到我的icon這邊 然後按下Enter一樣我可以讓我的Tooltip被觸發然後按下esc的時候可以關閉好那在這邊我們可能還會想要做一點事情是在accessibility當中有一個Rule叫做Tooltip那它可以做的事情就是它可以去讓screenreader去感知到說你現在正在跟一個tooltip的元素互動那麼要怎麼實作呢在這邊你可以加上一個這個aria describe然後describe by然後這邊要對應到一個ID所以既然它要對應到一個ID的話你可能不會想要在這邊用這個if判斷式來使用因為這個describedBy這邊呢我們可能會想要在這邊加上一個id等於blah blah blah 然後讓他可以去做描述嘛 對不對所以呢 另外一個你可以做的事情是要嘛你去改變這邊的架構或者是你直接在這邊用arilabel不過用arilabel的話你可能就沒辦法做對應也就是說 他就找不到說這個button要對應到的tooltip是哪一個所以雖然麻煩一點我們還是用describe by的方法來寫所以在這邊我們要給一個ID同時我們可能要把這個active拿掉拿掉之後呢在這邊就可以給ID啦對不對不過呢比較麻煩的一點就是說那這個ID可能可以從外部給進來比如說這邊我就給ID然後describe by id這樣子不過你會發現既然我們把if的判斷式拿掉當然這個東西就會冒出來嘛對不對那這個時候呢你可能就會想要第一個再把if判斷式拿回來然後呢我們同時在外面也再包一層這個判斷式這樣子好 然後呢 當我的這個如果等於tooltip裡面是空的東西的時候呢我們直接把內容藏起來display.num這樣子這樣子就一樣有同樣的效果同時呢你可以看到這邊有一個對應好那記得要給id嘛對不對所以我們這邊給一下idid等於呃呃...叉叉叉ID...這邊的ID怎麼給都可以啊就記得要是一個獨立的呃...unique ID那我們這邊就先給一個Tooltip header好然後到這邊之後你就可以發現這邊...下面這邊有一個Tooltip header ID了對不對好不過我們還想要做一件事情是說我們只想要讓它是在active狀態的時候被這個screenreader給閱讀所以我們這邊可以再加一個aria喔 不是這裡 這邊aria hiddenactive就是說當我沒有顯示的時候就給 false呃 給 true然後 當我顯示的時候hidden就给false好那这样子呢就是一个这个比较完整一点的tooltip的应用那当然可能你还想要再做一些进阶的操作比如说左半部的空间不够的话那我就显示在右半部右半部的空间不够的话可能就显示在上面或者是下面等等那这个的话可能就需要一些动的操作那我们这边呢就不额外多做讲解了好那么今天的内容就差不多到这边结束了我是凯凯我们下次再见咯拜拜