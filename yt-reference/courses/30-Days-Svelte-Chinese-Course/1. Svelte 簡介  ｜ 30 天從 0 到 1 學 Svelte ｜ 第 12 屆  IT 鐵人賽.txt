哈囉大家好 我是凱凱歡迎收看凱凱寫程式好久沒有拍影片了最近我正在參加IT鐵人賽的影片教學這個主題我參加的主題是30天從0到1學SvelteSvelte是什麼呢第一天我們就來講一下Svelte的簡介好 Svelte是什麼Spheals是一个前端框架那像是Rare或者是Fuel等等Spheals比较没有这么热门不过呢其实它在Github上面有三万多颗星星那么Spheals它本身的概念又跟其他一些比较主流的前端框架不太一样所以我觉得它也是算是一个蛮值得关注的一个前端框架好那么刚好呢我发现啊就是在台湾这部分的资源可能比较少一些所以我想说刚好就透过这次的机会一起来介绍一下这个比较新或者是比较少人知道的前端框架好那么官方网站呢它上面有写说第一个它的概念是说Write Less Code那这是什么意思呢Svelte它尽量呢不去破坏也不是说破坏就是尽量保有了像是原生的HTMLCSS跟JavaScript的语法那么不像像是Reel你可能要知道Reel Hooks的概念可能要知道JSX的语法等等虽然spells当中你可能也是还是会需要去学习一些像是template之类的语法不过呢至少对于初学者或者是有一些经验的人来说不算是太难上手然后再来呢Svelte它并没有所谓的Virtual DOM的概念我们等一下会提到Virtual DOM的概念是什么那么为什么Svelte会特别提到这件事呢其实是因为呢Virtual DOM这个概念虽然它这个概念让Browser让浏览器呢不會盡量的去減少對於真正的DOM的操作不過呢Fertile DOM仰賴於背後所謂的DIFF的演算法那這個diff的演算法往往會讓library的bundle size變得比較大一些那svelte呢,並沒有所謂Fertile Dome的概念,所以呢當然bundle size也會小蠻多的再來他說的是Truly Reactive那是什麼意思呢?現代的前端框架的要素往往都會具備relative的概念那什麼是relative呢?我們就來看一下首先可以看一下這個這個Excel我覺得算是解釋relative最清楚的事情第一個,比如說我改變了,我現在把C這邊多一個我把C定義為A加B那麼當我的B的值變了之後我希望我的C也可以即時跟著改變我的A改變之後我的C也可以跟著一起改變那麼這個概念就叫做reactive就是說當我的變數變動了之後呢我的畫面也會即時的去反映這些變化我們就叫它reactive好那麼回到簡報按錯了回到簡報當中Spelt本身也是强调这些概念好那么讲到Spelt我觉得也要特别讲一下作者Rich Harris那么Rich Harris他同时也是RawUp的作者那么RawUp是继Webpack之外也是一个蛮热门的在前端的Bundler的解决方案任务管理器那么他同时也是Reactive的作者那么Reactive可能比较少人听过这个框架那么他也是一个前端框架只是比较冷门一些那么也可以说是Svelte的前身然后再来呢作者他现在在纽约时报担任Graphic Editor然后呢作者他本人并不是本科系出身他是哲学系毕业然后毕业之后呢担任记者然后为了现在做报道不是做什么互动式报道资料视觉化等等啊他为了写这些互动式的報導開始學習程式然後寫一寫 最後就變成工程師然後就做出一個Svelte的框架也是蠻神奇的好 那麼Svelte呢 跟其他框架比其他的前端框架比較的話呢第一個 它的Fertile DOM機制它沒有Fertile DOM機制嘛那麼我們剛剛提到了Fertile DOM的機制它雖然減少了浏览器对DOM的API的操作不过呢Virtual DOM本身还有Div机制本身都会让第一个Bundle Size变大第二个就是Runtime的负担也会变得比较大虽然说这样的差异是有点小没错可是当你的应用变得越来越大或者是你的DomTree变得越来越复杂的时候呢这些Div机制的演算可能也会造成Runtime的负担然后再来第二个对于中小型专案来说React和Fuel的Bundle Size会比较大那这点是说呢Spills它本身是以编译器为主那这是什么意思呢它会先把你写好的程式码先编译一次之后呢再执行也就是说任何可以在编译时期达到的事情我们等一下会提到什么样的东西可以在编译时期达到它会在编译时期先执行它会在编译时期先做好所以呢避免了Runtime的负担然后再来第二个就是说Spheres本身就是它只有在你用到的功能它才会把它bundle进去比如说Spheres本身有什么Motion啊有Animation啊有Lifecycle啊等等那这些如果你没有用到的话它本身是不会引入Boundary Size当中不过如果你使用React的话有用过React可能或多或少都会知道React真正大的地方不是React这个Library本身而是ReactDOM这个Library所以呢那为什么ReactDOM会那么大呢那就是为了刚刚提到的VirtualDOM的机制还有Deep机制还有當你的狀態改變之後的渲染機制等等這些都會造成Libraries的體積變得比較大一些當然這樣的差異會在你的應用變得越來越大之後這個差異就會越來越小不過對於中小型的專案來說Spilts的Bundle size可以說是真的蠻小的我們等一下會再看看幾個例子第三個就是初學者上手不易這個意思是說你現在學Ru-end可能要知道Ru-hooks的概念或者是你可能要知道这个JSX的语法等等然后使用Field的话呢你可能也要认识你可能也要知道Field的template的语法或者是Field的写法等等那这些虽然说它也不是说这么不容易上手不过我觉得跟Spelt比起来其他的前端框架可能对初学者来说还是比较不容易上手然后再来最后就是我们刚刚有提到Spills它会先将程式码先做编译之后再执行来避免Runtime造成的负担那么为什么我们会想要ForgioDome呢这个是作者写的一篇文章那么连结的话你可以在投影片当中找到他说It allows you to build appswithout thinking about state transition他意思是说有了FertileDome之后我们就可以不用去太担心state transition变化也就是说这些东西都可以被隐藏在这个框架的实作当中然后他也说他的performance是足够好那足够好他的意思是说不是最好当然就是可以接受但是呢作者提出了一个概念就是说我们也可以用其他的方法来达到同样的事情而不需要使用Virtual DOM那这就是Svelte本身想要提供的事情好那么现在的前端框架所要具备的要素有哪些呢我们一起来看一下第一个它会提供一套Reactivity的机制像是react本身有sysday然后fuel本身你可以直接做变速的Simon等等嘛Spills本身也提供一套reactivity的机制然后再来是这些框架可能或多或少都有事

做一個diff的演算法來避免不必要的動更新然後再來是事件綁定像是unclick啊或者是unkeydown等等這些事件然後再來是生命週期方法像是amount unupdate或者是對destroy等等這些生命週期的方法來提供你說哦你的原件在剛掛載的時候要做哪些事然後被amount的時候要做哪些事情等等再來最後一個是狀態管理的機制像是context或者是store等等好那麼svelte本身它也提供了這些東西然後再來呢這個是svelte本身大概就是大概具有的功能我们在之后的单元当中也会一一的讲解好那么接下来我们来看一下我们这30天会做哪些事情呢第一个我们会介绍Svelte的基本语法还有功能那这些功能就是我们刚刚前面提到的这些功能然后呢我们会用Svelte来完成前端常见的一些UI还有功能像是API的处理啊资料视觉化互动式的UI等等那当然了这些都还是草案所以如果大家有任何意见的话欢迎在影片下方或者是在这个铁人帮的文章下方留言然后再来是Spelt的经验谈还有专案的实作我自己本身有贡献过一支Poll Request到Spelt这个library在这个就是在经验谈当中我也会稍微谈一下这件事情还有专案的实作我有使用过Spelt做过一些专案所以也会把这些专案做的经验分享给大家然后再来最后一个是进阶的Spelt这个进阶的Spelt就是身为一位工程师我们可能就是会想了解一下这个框架背后的原理是什么所以最后的七天可能会更少也说不定就是我们会一起来理解Spelt本身它是怎么做到的然後我們最後會實作一個非常非常簡單的版本的svelte好 那就請大家敬請期待囉那在最後我們都還沒有看過Svelte本身到底怎麼寫所以今天我們就用Svelte來寫一個計時器那Svelte本身它其實有提供一個計時的案然後這個是我在幾個月之前寫的一篇文章所以大家如果有興趣的話可以看一下這邊的文章講了我對Svelte的這個心得好 那麼如果你要在線上玩Svelte的話你可以到他們的官方網站然後點這邊 這邊有一個REPL嘛點進來就可以直接來寫了好你看喔這邊你只要直接宣告變數然後你在這邊用html的語法你就可以直接然後這邊變數呢用大括弧把它包起來就可以直接渲染過來好那麼今天呢我們就用spills來寫一個計時器的功能那這個計時器我們就簡單做就好然後我們之後呢再慢慢的加更多功能好 第一個 計時器嘛 所以要有一個countdown那我們現在 假設10秒鐘就好然後呢 我們希望呢 在原件被註冊的時候要開始做計時這時候你可以用這個amount這個方法在這邊呼叫一個timer用一個變數來保存一下timer等於setInterval每一秒要做一次計數先把這個註解掉 不然會一直噴錯誤然後呢這邊我們就直接讓cowdown-1就可以了-1那減到0的時候呢他就會自己他不會自己停止我們要自己設定,那麼第一個呢這邊你可以發現說我如果想要讓Svelte去感知到變數的變化,你只要直接-1就好所以,可能比較有經驗的公司都會知道說Svelte本身一定做了一些特殊的處理來達到這件事情好,那我們先看一下Spills是不是真的會更新所以我們就先看看Countdown喔 你看你看這邊真的在更新了 對不對所以比起像是Re-add的寫法像是什麼Saturday 然後Countdown我們用C然後C減E等等這樣的寫法其實是直覺蠻多的啦好好,我們看一下它會怎麼樣你會發現它數到0還在繼續數所以我們要做一個機制是說當我們數到0的時候就不要再數了所以在這邊我們可以用after update這個方法Factor Update來告訴Spell說如果我的Countdown等於0的話就不要再數了Time好,我們來看一下他是不是真的會停順便把time變成nullOK2 1 停好 他停了 太好了在這邊我們要再做一件事情如果使用者中途就不看倒數計時了我們要做一個貼心的設定就是說在原件被銷毀的時候呢我們也要記得停止Timer所以如果Timer還在的話呢就記得把它欸?他說Undestroy等一下喔S-T-O-R-Y 吧undestroy啊! str我這邊是不好意思 英文沒學好這樣子好 那因為這邊我沒辦法 我現在沒辦法因為它這個是線上版本我現在沒辦法讓原件被刪除掉不過呢 大概就是長這樣子 所以一個簡單的倒數計時的app就完成啦大家看看这个程式码是不是很直觉呢不知道请大家在留言在下方告诉我你对这段程式码的想法然后呢如果你想要加style的话你也可以很轻松的在这边加比如说我的color要叫red好了那它就变成那你会发现哦spells本身呢它会帮你建立一個class name做hash所以呢你也不用去擔心說什麼命名衝突的問題不需要你看這邊這個是spell本身幫你建出來的所以呢從這邊可以知道spell其實在背後幫我們做了很多事情第一個他在變數這邊一定做了奇怪的事情啊所以他才能感知到做了怪怪的事情所以他才知道說我要幫這個h1的tag加一個class甚至呢 你看喔 如果我沒有h1他會跟你說unuse CSS selector那從這邊呢就可以蠻清楚的知道說svelte本身他是compile這個概念也就是說他會先幫你看一遍你的程式碼然後呢看說你這個變數沒有用到假設我這個countdown也不用好了因為這邊有用到這邊有用到 所以這邊還是會有用到所以我們如果把這邊全部都拿掉

欸他不會跟你說好 沒關係反正就是 從這邊大概大家就可以很了解說spills本身是compile的這個概念好 那麼以上就是我們今天第一天的教學還請大家多多期待如果喜歡這個影片的話呢別忘了給我一個讚然後如果想要關注更多關於寫程式的影片的話呢别忘了订阅我的频道我是凯凯我们下次再见拜拜