哈囉大家好 我是凱凱歡迎收看凱凱寫程式今天是IT鐵人賽的第22天了UI實戰篇跟我們昨天提到的資料視覺化也都告一段落在進入Svelte進階篇跟實作篇之前我想要先來談一下Svelte裡頭的經驗談包含我自己做过一些专案啊或者是大家对Svelte的一些问题啊等等就在这边一一帮大家解答第一个很多人会说Svelte是一个编译器吗没错它是但是它不完全是在官方网站上你可以看到说Svelte宣称它自己是一个编译器没错不过呢有时候会出现一个误解是说既然它是一个编译器所以代表它没有任何这个函式库的程式码或者是没有任何Runtime的程式码那么我想要说明的一点是说这一个理解它并不是完全正确的怎么说呢它虽然会帮你去做编译程式码的动作不过啊你看哦它并不是完全没有Runtime而是你看这边这些都是Svelte里头的函式库里面实做的东西所以这些东西里面的实做它就是会在Runtime的时候去做然后这边都是编译好的程式所以就如同大家所看到它并不是一个完全的编译器或者是它并不是大家所想象中的把你的code全部变成没有任何library的程式并不是这样子的希望大家有這個認知在好那再來呢是我們接下來會提到為什麼是file跟其他的前容框架比起來它的bundle size會比較小一點第一個呢是因為它在runtime的時候沒有deep的演算法我們再看一下前面的例子當你去修改變數的時候然后待会我们稍微看一下这邊有修改變數嗎?好像沒有耶好那我們寫一個程式假設長這樣好了Nand等於Kellen好當你去修改變數的時候然後當Spells偵測到或是感知到那他要怎麼感知呢?就是在編譯的時期他可以知道說,喔!這邊有一個NAND這邊有一個NAND,所以這兩個是有使用到的嘛,對不對所以他們的關係就被建立起來了只要Svelte有感知到這件事情呢他就會去幫你做這邊setData的動作喔 等一下嗯 對然後你看喔原本我在這裡面寫的是NAND等於KELEN嘛對不對可是呢在編譯過後Svelte幫我把這個值變成了什麼Invalidate對不對所以呢你就可以知道說它這邊的副值並不是只有單純的副值這麼簡單而已而是它會去幫你把你剛剛所做的東西轉換成一個function的呼叫然後透過這個function就可以讓svelte去觸發update那為什麼svelte要這麼做呢我的意思是為什麼svelte不也一樣就是做一個setState之類的然後我們要改變變數的時候我們就這樣寫sys.date然後name等於calend這樣子那我自己的想法是說因為這樣子的變數宣告它是一個最直覺的方式它是JavaScript本來就有的語法本來就有的宣告方式雖然他做的預期的行為跟原生的JavaScript是不一樣的不過呢 比如說我們直接去修改變數本身這個行為呢 是對我們自己的大腦來說是一個最直覺的操作那透過saveState的方式第一個你要自己去呼叫它然後第二個你可能會需要因應可能隨之而來的可能你會想要用useEffect去做一些操作等等然後或者是因為setState的關係所以你要讓你的變數是一個immutable的物件等等那這些東西呢就是會慢慢的去增加我們在大腦裡面的負擔然後等於說我可能寫一個簡單的應用然後假設用react的話我還要知道use effect的各種用法然後dependency要不要加然後沒有加的話會發生什麼事情然後可能會遇到一些不如預期的非預期的bug之類的等等如果你對這個react本身並不熟悉的話那相反的svelte 盡量把這些操作都把它包裝成在邊緣時期的時候幫你做掉你看像這些東西讓你在實際寫程式碼的時候可以不要這麼的複雜好然後呢再來svelte 因為它沒有 wrong type 的 div 的演算法所以它當然也沒有 virtual DOM 的機制沒有Virtual Donor機制呢它就是盡量的去使用原生的瀏覽器API比如說在這邊可能看不到不過沒有關係比如說Insert好了它的它的實作呢應該就是Insert Before這樣子的這個函數的包裝而已然後還有什麼Text那Text的話就是Text Content的包裝然後Element就是Document.CreateElement的包裝等等所以Svelte本身就是盡量的不要再去做過多的包裝然後直接去使用這個原生的Browser API不過這會發生這會衍生的一個小問題是說既然我這裡面的實作是直接用document.createElement去寫的話那麼在這個呃在測試上面可能會變得比較麻煩一點你可能要去設定多一點東西不過現在好像有一個testing librarylibrary然後svelte對 這邊有個svelte的testing Library所以,虽然还是相对的新一点不过大家也可以去看看好我们回来,这边那么接下来我们讲到为什么Bundle Size本身很重要第一个在台湾其实网路是相对便宜跟相对稳定然后又相对很快的一个国家那么并不是每个人或者是每个城市都有非常快的网络可能在台湾4G是一个人人都会必备的网络的速度可是可能在有些国家他们可能只有3G可能只有2G或者是4G还不够普遍所以很多人他们只能用一些比较慢的网络那这时候如果你用这个比较大的bundle size的时候那可能载入你的应用就要花比较久的时间那么使用者呢就会相对的变得比较沮丧就是诶怎么我载入这个网站明明它只是一个简单网站还要花很久的时间那这样子呢就会渐渐的流失掉一些使用者然后再来第二个就是Reade它虽然提供了不错的效能可接受的效能或者是Fuze它也提供了不错的效能不过呢其实并不是每个人都有一个效能非常良好的设备比如说现在大家都在用iPhone大家都在用Mac等等我们现在使用的是相对好的设备所以可能这些的运算资源对我们来说并不是一个太大的负担不過對一些比較舊的電腦或者是比較老舊的CPU或者是甚至沒有GPU的輔助之類的可能在存取你的網站的時候就會有效能上的問題所以這也是為什麼我們要強調Bundle Size的原因當然這邊不是說什麼東西你都要等一下什麼東西你都要還沒有去就是可能你的網站沒有完成然後你就開始講究什麼效能並不是這樣子過往矯正而是bundle size是一個我們可以注意也值得去注意的一個

一個點這樣子好再來呢是心智復旦那心智復旦我們剛剛有講到SPELTS 盡量在語法上多下下了很多功夫讓你在實作的時候可以變得比較簡單一點比如說這邊的IF 的語法那在假設在 READ 當中好了那在fuel當中有這個fee if嘛對不對然後在reel當中你可以直接在這個大括號大括號裡面寫任何的表達式比如說像這樣子is ok然後a component然後再來是b component嘛對不對不過這樣子寫起來感覺會比較囉嗦一點啦因為你不能在表達式裡面寫if所以等於我們都要用這種三元的判斷式那當你的判斷呢大於三個條件大於兩個條件的時候這樣子做就會比較麻煩一點好那這也是為什麼我覺得Felds本身從語法上下手可以讓比如說對一些初學者來說他們可能只是想要做一些簡單的個人網站等等他們可以很快的很輕易的去上手這個框架因為你看喔你如果把這個拿掉它是不是長得就像一般的HTML這邊也是這邊拿掉它是不是長得就像是一般的HTML所以只要有一般的JavaScript HTML CSS的知识然后再加上这一个语言就是Svelte这个框架需要具备的一些知识你就可以马上来写网站这点是我觉得相当不错的地方好再来是Svelte可以应用在大型专案当中吗可以但是呢可能你要考虑另外几件事情第一个当然最重要的就是市场嘛对不对比如说假设我们的公司使用了Spelt之后市场上是不是有足够的这个人才资源他们已有SPELTS的经验然后可能知道有问题要怎么解决那可能相对的在台湾可能还是少一些所以市场会是一个考量再来是生态圈SPELTS目前至少在台湾来说它并不是一个非常热门的前端框架所以呢资源上相对会比较少一点那么可能出现问题的时候你可能就要比较辛苦一点可能还没有人踩过你可能是第一个踩的人那这对个人专案来说可能还好不过对公司的产品来说我们要的并不是这个研究技术本身我们要的是推出一个可行的产品所以这时候Felds可能就不是这么的适合再来就是bug本身Spelt它相对于Fuel跟React还是一个比较新的前端框架那这也就代表着会有比较多的bug可能还在被挖掘当中但是呢我觉得Spelt本身的就架构层面来看它是蛮值得使用在大型专案当中的比如说像Store机制啊你可以很好的使用Store机制来拆分你要的比如说副作用的管理等等你可以把它移到Store当中或者是Business Logic你可以把它移到Store当中然后UI的部分的话就是写在Svelte Component里头然后再搭配Transition等等你可以做到还不错的UI跟UX的体验好再来我们看一下Svelte跟Accessibility在我們實作UI實戰片的時候我們等一下會看到我不知道有沒有儲存我剛剛有做一個這邊就是你會發現啊Feld本身它是相當在意Accessibility的比如說你看當我的Image沒有加LT的時候它跟你說ImageElement should have an alternative attribute他就說 如果你有用圖片的話你就要加上一個可選的文字嘛 對不對或者是呢空字串並不是一個有效的 href attribute或者是井字號也不是然後 javasript void也不是所以你會發現ace felt他會很盡量的去提醒你說欸你這邊少做一些accessibility的考量請你幫我加上去等等或者是你看我再加入一個比如說我隨便打ara然後xxxxx他還跟你說unknownarea attribute對不對他就會跟你講說,這不是一個有效的指假設我打成models他還會提醒你說,你指的是models嗎?他還會跟你講你打錯了所以你可以看到,svelte這個框架它是在accessibility的部分下來非常多功夫的額外一提,這個javascript void 0這個功能呢是我加進去的就是我那時候在測試的時候發現欸好像是Felds沒有特別去警告這一塊所以我就把這一塊給加上去了所以意外的變成一個小小的contribution好那從這邊呢這邊有一個這個Rich Harris在蠻久之前提出來的他是希望说他自己本身是一个非常健全的人但是他希望他可以加入更多accessibility的支援让我们可以去建立一个更好更accessible的网页所以呢很多功能都是在这个时期被加进去的就是关于Accessibility的东西那为什么Accessibility那么重要呢第一个就是我们并不能假设所有的使用者他们都是四字建权的人然后难道这些人就没有权利他们就没有资格去使用网页我想并不是这样子或者是说当我们在讲无障碍的时候可能第一个直觉会联想到的都是政府的网页对不对可是这些呃有障碍的使用者或者是比较手脚手手或者是眼睛比较不便的使用者他們並不是只會看政府的網頁而是很多網頁都會看那這時候Accessibility就會是一個很重要的考量那我們身為前端工程師然後UI是我們實作的那Accessibility的部分當然也會是很大一部分也會是我們來實作那只要我們去掌握這些東西知道大概的运作流程的话呢我们就可以慢慢的去建立这样的风气然后让整个网页的生态变得越来越好所以我觉得Svelte这样的理念是蛮棒的它虽然不是你看这边虽然它们都不是警告这边都是warning的意思它是用橘色但是呢就是会很烦会很烦跳出来跟你说要記得加這個 要記得加那個 等等之類的那最後呢來講一些我之前做過的一些專案這個是我在三四個月之前寫的一個自我介紹的網站那這個網站是用這個spells寫的這邊有寫互動啊 你可以把它點開來等等然後啊如果你打開network來看 你會發現JavaScript的大小只有23K雖然23K是有點大沒錯不過我覺得以這樣來說是可以接受的那如果你去看Reddon他本身還沒有GZIP過的size是100多K其實就還蠻大的嘛對不對看一下Reddon你看minify過後又是35.9kb然後再加上你本身自己的application的程式可能就會超過這個數字好然後再來是build your own app那這個也是我之前做了一個小網站他就是把這一個裡面提到的文章把它做成一個網頁比較好瀏覽這樣子然後你可以點擊Tag來搜尋你想要的或者是你點這邊來切換也可以

這個功能用更簡單,所以它的Bundle Size有更小,只有11.2KB好,再來是動物森友會情報,這個也是用Svelte寫的然後在這邊可以做排序,然後切換昆蟲這樣子好,那大概就是這些啦所以呢我個人覺得spells是一個蠻值得一看的前端框架那在前端當中我覺得嗯,雖然你可能有時候會覺得一下有這個框架一下又有新的框架一下又有这个library等等可能有时候会觉得有点烦躁不过呢我觉得多样性呢是一个不管是在网页也好不管是在软体开发也好或者是甚至到整个社会也好多样性都会是一个蛮重要的事情你总不可能说我今天要写前端我就只能用react然后我今天要写后端我就只能用假设好了假设只能用java然后资料库我就只能用my sql等等之类的可能你并不想这样你当然会希望说这个场景下我用A方案会是一个不错的选择在这个场景下我用B方案会是一个不错的选择我个人是对于这样的多样性感到非常的兴奋然后也希望之后会有更多更多不一样的前端框架来让我们有更多概念上的冲击好那以上就是今天的各种有关于Speltz的经验谈我们下次再见拜拜