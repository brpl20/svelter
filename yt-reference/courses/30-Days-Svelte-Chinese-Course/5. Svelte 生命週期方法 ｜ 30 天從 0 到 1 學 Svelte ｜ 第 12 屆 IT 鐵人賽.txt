哈囉大家好 我是凱開歡迎收看凱開寫程式今天是IT全人賽的第五天啦今天我們來介紹一個比較輕鬆一點的主題是生命週期方法那麼在一般的前端框架當中通常我們都會在原件裡頭定義一些生命週期方法來讓這個工程師或者是使用者可以在對應的生命週期來呼叫比如說在元件被剛掛載的時候我們會呼叫amount或者是在更新的時候或者是在被銷毀的時候都會呼叫特定的生命週期方法那麼在Sphilt這個前輪框架裡頭也有提供一些對應的生命週期方法所以我們今天就會一起來學習這些生命週期方法啦那麼Sphilt生命週期的執行順序大概會像下面這邊第一個在剛開始初始化的時候呢會先執行一次 before update然後呢再執行 amount最後呢是 after update在元件更新的時候呢會先執行 before update再來是執行 after update最後在元件被銷毀的時候會執行 on destroy好那麼我們接下來就一個一個來看吧首先是 amountAmount會在spealt 元件被掛載的時候呼叫然後Amount這個函數並不會在 server-side rendering 的時候呼叫所以如果你有任何你的元件當中可能會直接去操作到原生 Browser 的 API 的話比如說你可能要操作 Windows你可能要操作 Document你可能要操作一些Node API 的話呢你可以在這個 amount 裡頭呼叫好 那麼如果你在 amount 裡頭呢去回傳一個函式的話呢它會在這個原件被 amount 也就是要被銷毀的時候呼叫所以你可以看到這張圖裡面的範例首先我們在這邊設定了一個 timersetInterval然後呢我們回傳一個函式是叫clearInterval 也就是說在這個元件要被銷毀的時候呢我們會去呼叫clearInterval 來讓這個計時器呢一起被暫停好那麼接下來是beforeUpdatebeforeUpdate會在狀態更新後也就是變速更新後然後原件更新前來執行而且呢特別要記住的一點是它會在 amount 之前執行再來是 afterUpdateafterUpdate就是狀態更新後然後原件也更新了之後執行那我們等一下會來看範例讓它更了解說beforeUpdate跟afterUpdate的差別在哪裡好,再來最後一個是onDestroy在元件要被銷毀的時候執行好,那我們就一起寫程式來看一下吧首先我們來看一下onMount,BeforeUpdate跟AfterUpdate的執行順序Mount然後呢 before update呃我們這邊load before update好了before然後after update我們就loadafter所以你可以看到這邊的執行順序是Before Update 先跑然後再來是 Amount最後是 After Update這跟我們預期當中的相同對不對好那再來呢我們來看一下這兩者比較實際上的差異我們可以透過這個觀察一下洞的變化首先呢我們先用這個綁定的語法我們昨天介紹到綁定的語法然後綁定到node這個變數然後呢嗯...假設我這邊先放個title叫做hello world然後呢我在beforeupdate這邊把它印出來Node假設打OffsetWith的話呢會發生什麼事呢他會跟你說你可以發現他這邊跟你說cannot read property offset所以他這邊說跳出一個錯誤說Node是Undefined不過我們這邊已經有綁定所以為什麼呢這是因為回到簡報當中在初始化的時候beforeUpdate會比 amount的執行順序來得早那這是什麼意思呢這個意思就是說在note跟這個實際的動Element還沒有綁定的時候它就會先執行了也就是說在這個時候Node其實還沒有被綁定到洞上面所以Node當然就會是undefined然後它就會說這個無法閱讀無法readPropertyofsetson of undefined所以我們這邊要做一個檢查就是說當我的Node存在的時候我再去執行這個console log你會發現這邊就成功印出來好然後呢我們在Amount的時候呢,去做一個SetTimeout那這邊要做什麼呢?我們把這個Title假設換成Word去觀察看看假設3秒好了比較有時間可以觀察去看一下AfterUpdate這邊的寬度變化你可以發現在這個BeforeUpdate之前我拿到的數字會是Done還沒有更新前的寬度也就是84就是hello world的時候的寬度然後呢AfterUpdate這邊它拿到的數字是動已經更新後的數字好所以從這邊你就可以發現這兩者的不同了那我們不妨觀察一下在變數這邊是不是剛剛剛剛簡報所說的這個狀態已經被更新了我們在這邊把title印出來你可以發現在這個這邊第二個 console 這邊第二次跑的時候這邊是顯示 word 也是說狀態已經被更新了只是呢這個狀態的更新呢還沒有渲染到洞上面那這就是 before update 的效果那麼在 after update 的時候呢是狀態已經更新了同時這個狀態也已經反映到洞上面這個時候就是AfterUpdate好的,以上就是生命週期大概的差異已經使用方式還有他們的實行順序當然我們在之後就是在SpellT的應用篇我們會持續的介紹說生命週期的用法以及要怎麼跟前段UI應用作搭配使用好那么今天的内容就差不多到这边结束了我是KK我们下次再见咯拜拜