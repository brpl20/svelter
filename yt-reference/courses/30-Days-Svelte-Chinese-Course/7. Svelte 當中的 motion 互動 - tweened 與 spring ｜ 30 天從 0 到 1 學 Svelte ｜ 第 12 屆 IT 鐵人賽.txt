哈囉大家好,我是凱開歡迎收看凱開寫成室今天是IT田人賽的第七天今天我們要來講Svelte裡頭當中的Motion創造互動的方式那麼其實在Svelte裡頭它有所謂內建的Motion那這包含了什麼呢它包含了Spring還有Twin透過這兩個功能其實可以做到很多事情雖然今天我們因為時間的關係我們沒辦法介紹太多的功能不過呢希望這兩個功能可以帶給大家更多的靈感那也期待大家可以透過Svelte裡面內建的Motion來做出更好玩的互動好那我們就開始吧首先我們先來定義一下twin是什麼twin可以透过定义两个数值之间的变化然后呢svelte或者是一般来说twin的功能就是说我从100到180假设我想要做一个变化我不想要只是很死板的直接从100然后直接跳到180而是我想要透过逐渐变化的方式比如说从100 101 102然后慢慢跳跳跳跳跳到180這個時候就可以用twin這個功能來試做好,我們等一下也會一起來看一下spill當中的twin可以這樣使用首先你可以從spills motion裡面去import然後twin第一個值是它的初始值第二個值是你可以定一些參數像是direction就是你想要這個twin持續的時間是多久然後等一下我們會提到最特別的地方svelte當中的twin的功能它回傳的是一個物件然後這個物件一樣有三個方法set, update跟subscribe如果你有看昨天的影片的話你應該會發現這不是跟我們昨天提到的store裡面的介面是相同的嗎没有错既然它们是相同的表示呢你也可以用前号这个方式呢来直接存取Twin里的值好 等一下我們會一起示範所以呢svelte裡面的twin呢可以說跟svelte本身是有高度整合的所以用起來也非常直覺再來呢 是springspring的話一般來說會比較少用一點點但如果你想要做一些更細膩的UI上的互動的話Spring可以很有效的帮助你达到这一件事情Spring是什么呢?Spring它的单字的定义就是弹跳有时候在UI上你可能会想要让使用者有这种端端端的效果来加强使用者对界面操作的体验等等等一下我们会来看一下所谓端端端的感觉是什么好那么这个参数呢通常会有两个第一个叫做Steveness刚性刚性虽然用这个中文来表达可能对这个意思会觉得诶 怎么好像有点抽象但是等一下看到实际的范例应该相信大家就会有感觉然后再来是DumplingDumpling就是摩擦系数好那我们就赶快来练习看看吧首先我们先看第一個例子Twin所以呢我們先引入Twin然後呢From Svelte Motion假設呢剛開始的注字是1990年好了是1990年然後呢你可以用這種方式來定義初始值然後呢他這邊有幾個參數第一個是Duration然後第二個參數是Easing那Easing的話我們後面會講那如果你沒有你沒有給的話呢Svelte會幫你做一個他們預設的Easing好那Duration 3000那這邊的單位是毫秒也就是3000就是3秒好然后呢,我在这边做一个setTimeout然后同时我们把它包到amount裡面去兩秒鐘之後呢要做什么事我们直接去year.setsetset成多少呢设成今年2020年好那这个意思就是说首先刚开始在这个原件被定义的时候呢我们先把这个值设成1990年然后呢当原件被挂载上来过了两秒之后呢我把这个年份改成2020年而且不是突然改變,不是瞬間改變而是從1990年慢慢的跳到2020年好,然後首先我們先來觀察一下這個year會長得像什麼樣子你可以看到,它不是一個純數字,它是一個物件然後這個物件有三個方法set, subscribe, update那這跟什麼東西一樣?這跟我們昨天看到的Store裡面的Writable是一模一樣的也就是說你可以透過Svelte當中裡面的前號這個語法來直接拿取它的紙那一樣嘛,這個Svelte會幫你處理這個訂閱的部分,還有原件被銷毀的時候它也會幫你做Unsubscribe的動作等等好,那我們就直接來試試看吧首先呢用前號然後呢year把它印出來欸 你有沒有發現過了兩秒鐘它開始從1990慢慢的跳到2020不過呢你有沒有發現它的那個小數點也會一起跳所以呢我們不想要小數點所以我們用math.floor把小數點去掉這樣看起來是不是舒服很多呢假設我把時間調快一點那麼這個就是twin的效果 所以如果你想要在兩個數值之間做變化然後同時你不想要讓這個變化看起來這麼死板的話呢你就可以用twin來達到類似的效果 那一般來說 比如說如果你在re-arr上面做的話呢 可能第一個你可能要用sys-date的方式然後自己實作一個twin雖然說這些也不是說非常困難非常難實作不過呢就是你還要額外花時間那Speltz本身就已經有內建這個twin的機制所以用起來就會蠻直覺的好那這邊是twin的部分接下來呢我們來看一下Spring我們來看一下SpringSpring彈跳跳跳跳的機制好那這邊呢因為這個程式碼可能會寫比較多一點所以我這邊另外準備了一個比較就是已經有寫好一些啦雖然也沒有很多啦就是呢我先準備一張圖然後我想要對這張圖做什麼動作呢我想要使用者移動滑鼠位置時,這張圖也會跟著一起動假設今天有一個功能是這樣首先我們先不要用Spring用最單純的方式做看起來是怎麼樣呢首先為了方便定位,我先把Image的Position改成Absolute然后呢我们去用这个mouse move去监听它的滑鼠的位置然后我这边呢设定一个变数好了设定一个变数x跟y然后呢每一次mouse move的时候呢我就去把我的ax改成1.client.ax然后position y就改成position y好然后呢我在style这边我可以

做什麼事情呢?我們在style這邊去做transformtranslate然後把我的這兩個字塞進來position xpixel然後proxysy後面一樣是pixel欸?怎麼沒有怎麼沒有辦法動看一下欸他這邊好像會幫我跳語法錯誤所以是要再加一個字串在裡面嗎好我們先看一下他是不是有成功進來好像沒有好那沒關係保險起見我們把呃 mouse move 的處理器改成拆成另外一個函數好了handleMouseMove然後我們把這邊的實作放進來然後這裡面我們就不要寫直接寫死inline function在裡頭我們直接用這樣子的方式好,這個樣子之後呢應該這樣就ok了再來我想要確認這邊transform translate不然這樣好了我們不要這樣寫我們用這種方式寫好了這樣子好好 有了有了有了你看style有給出字串不過呢這邊我們的這是變數嘛所以我們這邊要用前號前面要這樣前號好 有了這樣就可以成功移動它了不過你會發現我的Image好像沒有在動這是為什麼呢?我這邊多了一個帽好,所以大家可以看到欸 不過這樣的定位好像是錯的喔好 我們來想一下為什麼我說要把我的position設在x這個位置,也就是說每一次我在設定的時候現在圖片已經跑不見了我在做設定的時候你看喔它都會設在mouse圖片的左上角的位置會設定在我的Mouse現在的位置也就是說我在這邊要做一些偏移也就是說我要偏移多少我想要在圖片的中間嘛對不對所以我們設定好這個滑鼠的位置之後呢我們還要再剪掉圖片的寬度的一半然後再剪掉圖片高度的一半那這樣子要怎麼做呢刚好前面的内容都可以用上来第一个bind我们要先知道这个image本身的元素因为我们要取得它的高度所以我们这边新增一个新的变数假设叫image好了然后by list image好然后这边我们就减掉image.width除以2减掉image.height除以2好这样子这样子是不是是不是就好很多好的这样子我们就做到这个当我的滑鼠移动的时候呢我也想要让我的图片跟着移动好那这个功能蛮常见的嘛就是你可能想要把图片拖到某个地方然后放开等等可是呢你会不会觉得这样看起来有点呆呆的所以呢我们现在就要透过Spring的功能來完成啦透過Spring呢你可以讓這個物件看起來就是有這種端端的感覺比較栩栩如生那我們就實際來看一下效果首先我們從SvelteMotion裡面引入Spring然後呢叫什麼好了叫Position好了Position然后spring初始值假设我们都先给0就好x等于0然后y等于0然后spring后面可以給兩個參數大家還記得嗎?第一個參數是什麼?欸...stiffness假設我們先給0.1好了那dumplingdum...ping我怎麼一直講dumpling是很想吃水餃是不是0.1好 假設我們都先給這給這樣子之後呢 在這邊我們這兩個變數就不要用了我們就直接去設定就好position.set一樣喔 Spring也是回傳三個方法set update跟 subscribeposition.setset是什麼呢x會等於1.client x減掉image.width除以2Y是1.clientY-image.hunt除以2好然後這邊我們也拿掉這邊變成position.xpixel然後這邊變成position.ypixel好然後我們這邊加一個cursor等於move好了欸 有沒有看到有沒有看到ㄉㄨㄞㄉㄨㄞ的感覺可是這樣ㄉㄨㄞㄨㄞ的好像有點不太自然那這是為什麼呢?第一個,我們的剛性設得太弱所以它就會有點搖擺不定我們把它設高一點好了假設0.5好了,看會變怎麼樣有啦,有感覺比較硬了可是我們的摩擦係數設得太低了所以我們把它調高一點好了0.7好了0.7的話,感覺看不太出來不然我們調低一點 0.5感覺還是怪怪的不然我們這個設成0.1這樣是不是有感覺好一點0.1嗯 感覺還不錯那這個設成0.7看看好 我覺得這樣這樣拖起來的感覺還不錯不知道大家覺得怎麼樣好那麼這個就是Spring可以達成的效果用得好的話呢其實它可以幫助你增加使用者體驗在一些UI的操作上同時呢設計師也會對你刮目相看就是說這個工程師蠻貼心的竟然都會幫我做這種Spring的設計等等那其實他可能認為這個工程是不是實作起來很難可是你發現程式碼也只有這樣而已所以呢透過Svelte裡面的Motion、機制、Twin還有Spring我們只要有效使用它的話我們可以很容易的來達到更好的使用者體驗好,所以請大家務必把這個東西學好對,然後一起做出一個更好玩然後使用者也會喜歡的UI吧好的那么到今天刚好是一个礼拜了对不对我们已经把大部分大部分哦Felds的功能快要学完了那当然还有一些其他功能我们会在明天后天跟大后天继续跟大家来介绍好那么最后最后最后我们来实作一下这个计数器功能不曉得大家還記不記得如果不記得的話沒有關係我們來看一下這樣子它會倒數數到0然後顯示這個時間到對吧好那我們今天想要做的事情就是搭配twin的效果來讓這個倒數計時變得好看一點好不好,那我們就來實作囉首先我們先引入inhold.twin然後呢我想要做的事情是我在這個跟這個秒這邊的時鏡位跟個位數這邊一個動畫的效果好那實作的方式呢我們現在是直接198765321但我想要裁成兩個分佈也就是

6 5 4 3 2 1 0我想要拆成兩個分佈就是說現在不要這樣寫而是UR我給一個URULO然後這邊是實境位的部分然後呢我把每一個給它印出來這邊要用li才對這樣子印出來然後呢我的ul不要padding也不要也不要立式style好然後我的height我希望他是固定的那我這邊就直接寫死呈這個字的高度那當然你也可以直接去動態抓好我們先給他19px看一下會發生什麼事情會爆炸那我們這邊給overflow把所有的欸好可以顯示9的部分好那我們這邊就先只做個位數好了希望大家到最後可以知道我想要做什麼事情好然後呢Countdown是10嘛對不對然後我在這邊想要做的事情是我去宣告一個Countdown他會等於twin然後從0開始duration是300假設300好了好然後這邊不必要的東西都拿掉你也拿掉然後這邊我們讓他amount的時候我想要先設定不要好了 我們twin這邊剛開始就把值寫死好了從9秒開始然後每一次慢慢的減那我們這邊就不能這樣減了嘛所以要update然後cc-1這樣子如果Countdown等於0的話呢就把TimeRule拿掉這邊也一樣那在這邊呢我想要做的事情就是我想要去算它每一次的高度是多少然後呢每次Countdown更新的時候我不是直接去改變值而是往上移所以現在是9嘛對不對所以9然後往上移就會變8然後7 6 5 4 3 2 1好這就是我想要整體上我想要做到的事情所以這邊設成9可能還不夠我想要設定它的index也就是每一個字的高度是19px嘛對不對所以我這邊想要乘以19然後呢這邊的li我每一個人都去給他一個transformtranslateyx不用動了對不對然後是-的喔------所以我這邊寫錯了嗎?對,因為我這邊是自傳,所以這邊要再加一個好欸你可以發現它在動喔可是動的方式有點錯嘛有點不對所以我們來看一下是哪邊做哪邊發生錯誤你會發現這邊每次減它都是減1可是呢 我其實要做的事情是我還要乘以這個字的高度所以要乘以19C-1 C-1啊!對啊 這樣沒錯 C-1 乘以19等一下喔為了保鮮起見我們還是直接c-1乘以19不行然后这边再乘以19就会报到不对啊它每次过来都会做19所以我们19其实不能放在这里我们要放在这里会比较方便控制想一下喔那我们这边就不要就不用再对啦这样我们这边就不用再做了这样子就对了我们在这边countdown就不要再把这个高算进去了然後在這邊乘以高這樣計算會比較單純一點好那總之現在是正確的可是呢你會發現我應該是要從9數到0而不是從0數到9所以我這邊呢第一個你可以做的事情是你這邊就從0到9好那我們直接這樣試試看9765 4 32 10 好了好 那這樣子看起來是不是比較這個比較時髦一點我們把字放大看看放size 假設我給它80px喔 不行不行這樣子的話我這邊要重新計算一次所以現在高度是94.5嘛94.5 然後這邊我們也給94.5那比較好的做法其實是你去動態去算這個高度那我们这边就节省时间就直接写死吧210好6543210好了好我们透过twin的功能来改写我们的倒数计时然后把这个倒数计时的功能变得比较时髦一点点我這邊有一個比較完整的版本不過因為時間上的關係所以沒辦法把全部的實作都做給大家看不過整體上會長得像這個樣子是不是比較有點FU呢所以如果大家有興趣的話就試著用這兩個功能Twin還有Spring來做一些好玩的UI体验那我等一下也会把这个RPL的连接贴到简报以及YouTube还有铁人赛里面的文章里头有兴趣的话也欢迎大家来做参考好那么以上就是今天的Svelte教学啦我们今天就到这边为止咯我们下次再见拜拜