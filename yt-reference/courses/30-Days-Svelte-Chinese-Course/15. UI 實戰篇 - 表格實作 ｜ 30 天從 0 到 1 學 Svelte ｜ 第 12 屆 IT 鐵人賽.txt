哈囉大家好 我是凱凱歡迎收看凱凱寫程式今天是IT鐵人賽的第15天啦今天我們一樣是UI實戰篇然後呢 我們今天要來挑戰的主題是多功能的表格實作那麼表格在前端當中其實還蠻常遇見的對不對當你有一個結構化的資料然後你想要顯示它的時候那很大機率就是用表格 table或者是你要显示这个出账的报表啊入账的报表啊或者是一些这个lock或者是给营运人员操作的比如说搜寻界面等等table都会是一个蛮常使用的UIL所以呢我们今天就要来透过spelt实作一个还不错用的表格那么首先我们来看一下它的功能有哪些第一个我们想要这个表格呢这个原件尽量是可以足够有弹性的什么意思呢我可以应付各种不同的需求比如说今天可能这个报表需要一个表格来对应那我可能可以透过这个原件很快就把它兜出来或者是所以当今天我的报表如果改变了这个资料或者是改变了它的资料形状的话呢我都可以很快去做对应再来第二个就是我们可以透过svelte slots的功能来达到客制化的效果也就是说我可以自由的决定说我表格里面的内容要塞文字要塞图片还是要塞一个svelte component我们透过slots都可以做到对不对再来呢很常见的一个就是对资料做排序那么排序这件事情其实比较多数会就当你资料量比较大的时候可能會在後段做不過我們今天也一起示範說如果是在前段的話你要怎麼去做排序好那我們就開始吧好首先我已經準備好資料了那這個資料是這個我之前在做動物之聲的時候的資料反正就是各種魚的資訊好那我們就來實作吧首先我们先新增一个叫table的原件好了table.svelte然後我們在這邊把它引入進來好 然後一樣我的data也把它引入進來那我們先看一下我們的data長怎樣大概長這樣子登登好那我們就可以來實作啦我們可以先把data丟進去然後就直接硬把這個表格的東西全部都顯示出來然後我們再慢慢做優化所以呢這邊我們透過explore.let data好,然後這邊給table然後table裡面會有that跟tbody對不對tr,th第一個我想要顯示的是魚名稱魚名,魚的名稱再来是它的价格然后还有还有什么出现地点出现地点还有出现的月份好然后在这边呢我们就直接用这个跑回圈的方式each data is d然后d 看有没有可以当作key的东西感觉number好像可以当作key所以我们这边用numberd.null然后呢tr那這邊再跑一次回圈啊不要好了我們就直接把它寫死td d.nettd d.pricetd d.place然後再來還有TD打月份月份的話是season那我們這邊都拿南半球的好了不要好了 北半球好 這樣子好 這樣子我們就完成一個最簡單的表格了接下來我們想要做的事情就是把這些表格的設定讓它變得比較客製化一點所以我在這邊做一個config那我們的config想要有什麼呢我想要有的東西是這邊對應的名稱header的name还有这个它的它的文字对齐要对齐哪里像如果是数字的话通常我们会习惯它是对齐右边这样比较好看的数字那如果它是文字的话就是看你要靠左或者是看需求可能要置中等等所以呢我们想要让它在config里面可以设定再來是是不是可以排序嗎sortable這一列是不是可以排序然後再來還有什麼呢排序看一下還有什麼可以做的你有可能會想要設定它的寬度啦不過我們這邊就先不要然後假設我在這邊再加一個component然后这个component呢是你可以客制化的引入一个spelled component好然后假设我们再加一个formatter这个formatter的意思是说我可以客制化假设我这边有些是1000什么5000的嘛对不对我們可能會想要幫他加一個貨幣的符號或者是加一些逗號等等大概是這個樣子那我們就來做做看吧首先我們先在這邊定義一下我們的table的格式config等於然後我這邊就給一個名稱那為了讓我的表格比如說我現在漁民想要出現在第一個嘛對不對那一個比較好的做法是你可能在這邊就直接再寫一個喔我要讓他排在第一個這樣子不過呢你可以用 object.keys那object.keys應該是有保證說它會按照物件裡面key的順序應該吧object.keys order我們一起來查查看有有有,它好像有走有沒有看到It's iterated in the same order that a normal loop would所以呢假設你這邊是ABC那它就會就是給你ABC這樣子所以呢你可以透過這邊的順序來決定你這邊的順序那我們這邊這邊的key的名稱我們就一律按照這邊的欄位的名稱來做那當然我們也可以再做一些更進階的就是說你不一定要按照這邊的欄位可能就比較沒有彈性我們等一下會再提到好Name,然後Price然後出現地點出現地點Place還有出現月份Season那Name這邊我想要給它表格的名稱叫雲明然後呢它可不可以排序format 的部分的話我們也不然我們這邊做一個比較我們讓它可以接受 HTML 的格式因為這邊的東西是我們自己給的嘛對不對

沒關係 然後我們這邊給strong好了全部都給他變成初期然後呢我們的alliant我想要讓他是自左alliant是left還有什麼好先這樣子那等一下component的部分我們等一下再一起做跟那個排序的部分我們大家在一起做那price這邊呢name我想要給價格然後formatter我們就直接用這個原生的browser原生的方法number formats好,然後align的話我們想要它是右再來place的部分是出現地點這部分的話呢formatter我們就不給沒關係,然後align的話我們要它自裝好了好 這樣子再來是seasonseason的部分我們也讓它置右好了感覺比較好看然後name的話我們給它出現月份好這樣子就可以了再來呢我們把config傳進我們的table裡面好 那在table裡面的話我們要怎麼做呢這邊就不是不要再這樣寫了對不對我們就直接跑回圈 然後configc 然後就直接用c好了反正c就會是一個text啊不對喔 這邊是沒辦法config會是一個物件 所以我們要用objectobject.keys這樣子才對喔然後現在這邊我們先把key拿掉好了好object.keys這邊的話我們就用這個config c.net這樣子好好那我們把key拿回來這樣子就可以了這樣就可以對應到我們要的這個表格的名稱了嘛對不對再來呢我們在這邊下面這邊也是一樣做一樣的事情這邊一樣不動然後拿掉,然後一樣跑回圈然後呢,我們這邊要怎麼做這邊我們用,也是一樣object.keys.config.us然後呢用d.c就可以順利的存取到它的欄位不過你會發現這邊它這邊全部都是回傳object原因是因為呢我們的data裡面season它其實是一個object然後裡面有兩個東西一個是north一個是south所以我們為了要解決這個問題我們可以用formatter來做好,所以呢,我們這邊再加一個小小的判斷就是說,如果這個設定這個,這個欄位的設定它有給formatter的話呢我們就用formatter來顯示資料好,所以我們這邊可以這樣寫c.formatter有東西的話呢,我們就然后我们就跑formatterd好 这样就可以了结果大家都不見了我看一下喔不對啊 應該是這樣config c.formatter然後呢 如果沒有的話D 、C如果有给formatter的话,我们就pulse formatter function这边没有打进来然後呢 因為我們給format嘛 對不對 所以這邊我們給htmlhtml然後 第一個這邊好像打錯了 對好像沒有加前套 對 前套欸 他說這邊是漁民啊 低點 name 這樣子好 然後我這邊就把它全部變成粗體了對不對然後這邊一樣這邊要給d.price然後呢沒關係我們點點就不要理他了然後最後一個所以我們這邊也給一個formatterd.season.north.join這樣子給一個當然你也可以比如說你就sign一個html就塞一個html也可以假設我們這邊就塞一個strong也是要把它變出體好沒創意喔 不過沒關係就把它變出體了這樣子你就可以透過這邊的設定檔來操作你要顯示的資料好,那我们这边想要再做一件事情就是我们继续再判断所以这边可能这个判断是会变得有点长啦所以看你要另外拆成函数做简化或者是没关系我们就直接写函数因为它的if else这边我们就只有做一层所以应该还好else if config.c有component的话代表说我们要用客制化的方式來渲染它svelte componentlist.component也ok然後你可能會想要把東西傳進去嘛對不對所以第一個你可以直接data或者是因為這邊可能是你想要傳入的這個component你想要傳入的component可能可以接收來自各種不同的屬性所以這邊看你要做寫死還是你要另外寫可以那我們這邊就一定叫做data好了然後我們把d給傳進去或者是你也可以把整坨資料都塞進去那這邊就是看大家的設計要怎麼做我們這邊塞D塞這個資料進去就好好的那大概是這樣再來是再來else那我們來試試看是不是真的可以塞component進來那我們這邊隨便加一個component假設假設我這邊做一個小列表好了atList.spelt然後我們這邊就隨便寫我們剛剛是data對不對這樣子data對 data然後lidata.price然後讚讚讚好那我們把這個我們自己客製化的component放過來svelte list.svelte再來我們隨便塞一個塞到出現月份當中component等於list什麼事都沒發生好,什麼事都沒發生,所以我們來看一下發生什麼事情首先我們來看一下

我们table这边是做第一个,它会先看formatter再看component所以如果要做的话,记得就是把formatter给拿掉好,这样子,所以这样子就做好了那么这边的设计其实可能有点不好啦就是到底谁是优先,谁是后那这边还是就看大家的需求把目前的想法跟在這個表格的設計上大家可以怎麼做這樣子你就可以課制化塞你要的component進來了再來我們還少做一個我們希望就算我的name這邊的屬性對應沒有對好的話我的功能還是一樣可以動作比如說我今天做一個1.5倍那我做的事情是把所有的價格都乘以1.5的話 你會發現等一下喔你會發現說欸?如果我沒有給這個的話就會直接壞掉,它會直接給undefined對不對,所以第一個你可以在這邊就透過accessor的動作來做或者是你就直接給formatter也可以這樣子也沒關係,因為我這邊它這邊看的動作是說如果有formatter就給formatter,然後如果沒有的話就看component,如果再沒有的話就直接用這個欄位來存取那在這邊你可能會想要做一個小動作小小的動作是說我們先給一個assessor就是說我的資料要去找哪一個對應的資料欄位那我們這邊就identity嘛對不對直接回傳資料回來然後呢在你的config當中你也可以這樣寫比如說這邊的assessor我們就直接這樣d.price不過這樣一來這邊的formatter就會變成price所以就會有點混淆啊那這邊就是看大家的取捨好或者是你可以直接這樣乘以1.5然後這邊不要寫然後這邊過來else if config c.accessor那你就把assessor給傳進去這樣子也可以然後我們再加一個elseifelse所以這邊就是完全看大家要怎麼設計你的table好這樣子好這樣子我們就有一個還不錯用的table了今天假設你要改標頭的欄位你就在這邊做修改因為這個config它是一個物件所以基本上你也可以從比如說從API去拿然後拿回來這個設計拿回來這個設定檔然後把這個設定檔對應出來之後就可以把這個資料給Render出來等等 你也可以做到 不過當然啦這邊的component你可能就沒辦法用你可能就要用對應的方式比如說 get component然後比如說 list然後你在這邊去實作你要的邏輯這樣子好 那這邊也是一樣 就看大家的需求ok 再來我們接下來要做的事情是讓它可以去做搜尋所以我們這邊假設加一個sortabletrue然後呢我們再加一個comparator嗯 我們是想要讓他b.price剪掉a.price好然後在這邊我們的that這邊我們把它拆出來好了that.spells把config給拿出來然後嗯,然後就這樣OK那我們這邊要做的事情一樣是跑回圈嘛對不對那我們就直接把這邊複製貼上好然後當我去點下這邊的東西的時候我要讓它可以排序嘛對不對所以我們這邊加一個那這邊可能也要稍微修改一下我們用一個spam把它包起來然後排序好那我們這邊可能要顯示一下說現在的排序是什麼sorting等於現在什麼都沒有了然後呢當我按下去的時候clickhandle click我们之前可能要做一个判断是说我们去看一下config里面sortable是不是true如果是true的话呢我们才去加handle click如果没有的话我们就什么都不要做这样子好然后呢这边的handle click你可能还会想要加入一个这个它目前排序的栏位是什么field所以我们这边可以加入fieldField應該是這個喔好那沒關係我知道了這邊我們可能還想要再拆一個component出來叫做 teadcolor.spelt目的是為了我想要把這個呢起來做統一的處理好沒關係好這樣子放過來好這樣子就比較好看一點了那這邊呢ExploreLeadField對不對然後狀態一樣拿過來HandleClick也拿過來好 這樣這邊我們就不用再判斷了然後這邊直接放1 OKsortable好 那我們這邊就不管了 就直接加進來那只有在sortable是true的時候 我們再去做進一步的判斷這樣子好 然後剛開始是NOW嘛 對不對所以我們這邊就要做一個判斷如果現在是NOW的話 我們下一個SORTING等於NOW的話我們下一個要給什麼呢我們給ASCENDING好了然後如果SORTING是下一個要給descending然後再按一次的話就是又變成Null總共有三個狀態然後我們這邊也做一個判斷是說Get text然後把sorting放進來然後我們Get text的實作就是if sorting 等於 noun那就是 5else if sortingsc 等於生序再elseelse就是降序降序ok好接下来呢我们就来试试看

是不是可以真的做出來這邊我們一群裡面就直接放thetcolumn好的那要放什麼呢? field 跟 sortableok我们就直接给我们给field的目的是好像没有用到没有用到的话就不要给没有用到sorry没有用到不要给还有sortableconfig c.sortableOK然後呢在table這邊我們把我們這邊的t換成我們剛剛用的不過這邊可能要改一下if sortable如果有排序的話我們才去把這個排序的文字顯示出來不然的話我們就不用加然後這個uncute可以不要加spam我們留著好了把它包起來好這樣子然後這邊把它引入進來keyheadkeyhead打svelte他說找不到我是不是有些地方沒有打好這邊沒有打好他說config is not defined那我們慢慢來解bug吧thead要傳config進來等一下喔,為甚麼?我的table這邊config我們還缺一個export title然後我們在這邊把它傳進來好了title 等於 config c.name然後呢這邊把這個config拿掉然後換成 title這邊也一樣換成 title好了然後接下來你可以看到這邊價格排序5當你按下去的時候它是升序然後降序ok好 這樣就可以了我們做出一個小功能 排序功能不過它現在點下去沒有任何效果就只是文字會變而已所以我們第一個要做的事情是讓它可以真的去排序那我們就可以呼叫我們的createEventDispatcherfrom spelt然后一样dispatch等于create event dispatcherpatcher 这样子好了然后呢当我们去click的时候我们就我们就去dispatchsorting這邊就可以檢停了但是這邊我們應該還會想做field所以 對 我們再把field拿回來吧field等於c然後這邊會有一個export let field好的,那麼在thead部分的話我們可能會想要去傳一個事件叫onsource然後呢,這邊就onsource然後onsource傳進去然後在table這邊呢,我們可能會想要做一個handlesource這樣子 OK好 那在這邊我們可以得到幾個這個type 對不對第一個我們可以拿到sortsorting 是什麼有sc 然後dsc 跟now另外一個是field好 所以我們可以去針對我們要的field去拿到comparator好 那要怎麼拿comparator呢 我們現在有config對不對然后呢field去拿comparator所以可以这样写comparator如果有comparator的话我们就去做排序好如果有comparator的话就去做排序首先呢我们先把这个data全部呢变成我们要的这个其實也不用我們就直接data.sort我們就直接去做data.sort就可以了不過data.sort好像會改變data本身嘛對不對 所以你可能會想要做的事情是你想要把這個data再複製一份出來然後去做排序排序完了之後就是當排序回到原本的順序的時候我們就用原來的資料來做顯示來避免說我排序排到一半結果原本資料也被打亂了那這顯然不是我們想要做的事情了對不對好所以呢我們可以在這邊放一個這個Data Copy等于data我们就一律都用data copy来做sortcomparatorok这样子然后在这边我们就放data copydata copy这样子好这样子应该有用吧然后thead這邊要把 onSource 放進去好像沒有用field is not defined他說 field 這邊沒有定義看一下錯誤在哪邊?handleSource 裡面field.details好,他說 cannot detailsdetail好這樣應該是可以了然後我們來確定一下comparator是不是有成功拿到有 感覺是有這樣子應該感覺就是有然後sorts裡面傳對啊 也是有傳到還是我們要重新複製才行它現在是好像要重新排序才行然後呢在這邊你可能會想要問說欸怎麼它整排序排到一半那我這邊呢想要做的事情是要根據現在的sorting來做排序if sorting等於asc的話呢是從下面排到上面下面排到上面所以就這樣子等一下喔1.detail.sorting好那現在他是從下面排到上面所以

等一下我改一下這樣子然後else if e.detail.sorting等於等於什麼等於asc的話呢data copy等於data copy.sort然後這個comparator我們要的回傳結果是我們想要讓它反過來那要讓它反過來的話要怎麼做A跟B乘過來我們把它改成B跟A這樣就可以了好,那再試試看現在是下到上欸等一下,它是要說sorting is not defined為什麼下5然後如果沒有任何sorting的話sorting 的話我們就直接這樣子他一直說sorting is not defined是我哪邊有打錯嗎還是好看來這邊有一個小bug是說因為data好像等一下喔啊這邊這邊我們可能要用slice的方式來切或者是直接這樣子來確保說它不會動到data的reference這樣才會是原本的資料升序降序然後再來是5這樣我們就把這個可以排序的這個表格給完成了好的那我們現在來幫這個表格加入一點style首先我們先到這個KT Head喔 這邊然後呢 我剛剛已經加了一點padding然後呢 我們再幫它加一點顏色好了這樣子 讓整個感覺會比較好看一點好 放size的部分我們把它嗯 這樣已經蠻大的然後差不多是這樣了在這邊我們可以做什麼我們想要讓它的對齊盡量可以跟下面的這邊對齊那我們這邊就先一律去製作所以 text-align left這樣它就會製作了好 然後然後我們再回到我們的table的部分table的部分你可能會想要在tbody裡面的tr做背光假設是efffFFFF這樣子然後它有一點點的顏色然後呢現在那個寬度沒有那麼高所以我們td的部分我們一樣給一點padding1515好像太大了上下10然後左右15px不然我們就跟標頭一樣好了也可以好欸 標頭的部分的話是10吧10 好那我們一樣是左右給10這樣看起來會比較一致一點好 這樣子之後我們再加一個TR裡面再加一個NTH Child接偶數選擇器那我們只把偶數的部分加上Background這樣看起來會比較順眼一點不過這個顏色好像有點淺所以我們把它F0好了 F0 F0 F0這樣子比較黑一點好 這樣子大致上就是一個還不錯用的這個表格然後呢假設你今天可能想要做一個onclick的操作那你可以簡單在這邊做一個onclick之類的那當然啦 就是表格這個東西其實還蠻看使用上的情境比如說你可能之後還會想要做一個這個搜尋的功能啊等等的那這邊呢就是交給大家來實作這樣子那這邊呢就是示範一個這個一個基本功能的這個資料表格應該要怎麼實作同時呢我們透過config設定檔的方式來讓整個資料的設計可以變得彈性一些再來我們還想要做的一件事情是看一下喔我們要記得幫他加入caption在table裡頭你可以加入caption那這個caption的意思是說來描述你的表格是做什麼的比如說這個表格是relay表格動物之聲魚類表這樣使用者就可以知道說喔這個表格是為了什麼用途什麼目的而存在的那麼透過caption的宣告screen reader也可以很好地幫你做調整他在進入這個表格的時候他就可以幫你把這個名字也一併唸出來好那當然你也可以再做一點更深一點的操作比如說你這邊就放一個slot然後這樣子也可以對不對把你整個的實作呢轉交在app當中那我在這邊就可以這樣寫hello然後這個表格就變hello或者是你要這樣子h2 hello也可以好那麼以上呢就是一個這個實用多功能表格的教學希望大家都可以在這邊學到一些新東西好的,那麼今天的內容就到這邊結束囉我是凱凱,我們下次再見囉,掰掰