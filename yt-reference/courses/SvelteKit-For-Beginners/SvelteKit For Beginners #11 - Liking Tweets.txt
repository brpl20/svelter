 Hey, welcome back! In this section we're going to implement liking a tweet. So for liking a tweet, we have to check if the tweet is already liked, if so, unlike it and remove the count because it should be unique. If the tweet isn't liked, add the record and update the count. We can maybe add this to our existing endpoint and figure out what action to take from the post request by using a hidden input field like we've seen before, but it's easier to make another endpoint. So if I go here to tweet.swelt and just close the sidebar we can find where is the like action so already we have a form here here is our form we're going to point to home like we're going to use a method post and here we're going to use a hidden input field so we can pass the tweet id so we know what tweet to like on the server it's not that complicated so i can close this file and then let's start by adding like ts inside the home folder so source routes home and then let's just add like ts let me close the sidebar so yeah let me scroll down here and then let's add a post endpoint so you can say const post request handler so we get a nice auto import we can destructure the request from the properties. So we can get the form const form await request form data just like before So we can get the ID by saying form get ID and again type free would complain because this is form data entry value and it like this isn a number what are you doing so you can just say plus and this is going to make you the number so we need to check if the tweet is liked so we're going to do that i decided on the count method here because count is going to return one or zero so we can say const liked await and now also pay attention you don't import the wrong one you want the one we created from rootly prisma maybe i should have picked a better file name it would have been less confusing but yeah it's fine so we can say prisma liked count where the tweet id is equal to the id so what's awesome about this this reads like english so it's really easy to understand right so let me just make space here so if the returned like equals one meaning it exists we want to remove it right so we can say prisma like delete where the tweet id matches id right and then we want to update the count so we can say const count await prisma tweet find unique we're going to find a unique value where it matches the the ID and we going to select likes true right And then we want to update it So it really simple like that await prisma tweet update so we rub it in the table right where id which we got from the form then we going to say data and we're going to change the likes field so we can get the likes count from count likes and you're probably laughing at me because i misspelled this so let me just fix this and yeah let's decremented by one and if we save we're going to get auto formatting and this is really nice so let's just return go here then we're going to return status 303 meaning nothing changed we're not directing to a new source or resource it is so we can say location is going to be home yeah so we say location home because remember in this case we're not using a shadow endpoint we created an endpoint at a different place so we can return home and then this is our case for if the tweet exists so this is our entire if clause here but now we want to implement the logic if it's not liked so we can like it and update the count which is going to be almost the same so we can say await prisma liked create and we just have to pass the data tweet id is going to be the id we're going to to connect the user ID to the hard-coded user, but you can get this from the session. And let me just scroll up so we have space And then again we can say count await prisma tweet find unique where id and then we can select likes true so yeah so let's update our table so we can say prisma tweet update where the id is matching and then we can change the like count right we can say like count likes and then we're just going to add one so this should be perfect and we also have to do the same thing we have to return 303 we have to say headers location home and of course we need to make sure we spell these things right yeah so let's save this and this should be it right so if you go to home and if we read a tweet from bob it's a beautiful tweet. Painting is as individual as people are. Aww. So before that, let me just open the developer tools. And I encourage you, everything you do here, you should log it out and you should pay attention to the network tab so you can learn a lot what is going on. I'm always paranoid, so let's refresh for good measure, right? And then let's clear this out. And this should work if you like it. So yeah, awesome. And we can see here is the network response. Here is the like, with the payload of the ID 7. And this is awesome. And let's see if we can unlike it. Everything works as expected. So catch you in the next one.