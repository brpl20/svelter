 Hi there, so in this video we're going to finish up our crud app, basically do the front-end code. In the last two videos we set up a Vercel using a serverless function. In the first video we did this crud app, it's very simple, didn't do much. And then now in the last one we connected it with Mongoose to MongoDB. So if you haven't seen those, you can see those. But basically it's just a crud app with a get, post, put, and delete. So create, read, update, and delete. Okay, so let's get started with the front-end code. So what I have here is basically you can create someone. So for example, plankton5, add person, and plankton gets added there. Bob13, add person, and then I can edit. So maybe Bob is older, like he's more like 18. Then I can save that, and now Bob is 18 years old. Okay, and this is getting added to my database here in MongoDB. That'll take a bit anyway. You should be able to see that they're in there. And now let's get into the code. into the code. Okay, so here I am in my local, and this is all I have set up. I just commented out some of the code. So let's come here, and basically what we have is our API calls, and these are pretty repetitive for a Quirt app. They're pretty much the same. So we've got a read items, create item, update item, and delete item. So they're just corresponding to what we had in the backend. Okay, so read items, it just fetches, and then here after I fetched, I've got this dot then, so this handle response. So basically, I want to check if the response is okay, and then return the JSON if it is. And if it's not, then I'm just going to get the text, and I'm going to return a rejected promise, which will be handled on the front end. Okay, so pretty straightforward, just kind of boilerplate-y post, just on the stringify item, the item you want to create, person, the ID that you want to update, and then you pass it in here, and then delete time. So basically they have to correspond when I'm passing in here to the backend code and what it's expecting. Okay, so let's look at the app. So I've basically commented out everything I'm going to add and we just have this outline. Okay, so first thing we're going to do is work on the create. Okay, so let me just uncomment this here. So this is kind of this await catch syntax, await then. So we need our spinner here you can get from Svelte spinner and pam install Svelte spinner. So basically what I like to do is have a create promise and I like to reject it. And why do I reject it? It's because I want this to be, I want to show it in the error state. Because if there's an error I want to still show this form but just display the error. basically because I'm letting them do it multiple times, since it's going to, I want this to appear after I've added a person, I have it in the error state like this. Okay, and I'll know if I have an error just if there's an error passed down. Okay, otherwise it's just promise I reject with nothing. So, okay, so I have, this is how I've been doing it. Rather than binding, I just have my inputs and their name corresponds to what I want the field to be in the JSON. Okay, that way I can just have a button and when I click on it it submit this form prevent default and it will create right here Okay so let me get that here create So const item equals getJSON So let look at this getJSON So API calls let me uncomment this getJSON. So basically this will return to me an object using form data and then object from entries.entries. I don't know if there's a simpler way to do this, let me know if there is. But this will return to me an object which is basically a mapping from name to the value of the name and then age to the value of age that I type in here. Okay, so it'll give me an object and that will be item. Okay, and then I create promise, create item. So this is expecting an item and that item is just going to be passed into our post. Okay, cool. Cool. So dot then person res equals, after I've created that item, it'll return it back to me and I'm just going to add it to our people list. Okay. So down here is our people and right here, people promise. So let's get into this now, our people promise. So we want read items, which will just get all of the people and then we'll get the people back and people equals people res dot reverse. So I want reverse so that it's in the order of last created. Okay, so people promise is down here. We've got another little await block. And here I have then, although I guess it doesn't really matter all that much, but I have then because basically it's just going to run once when it's loaded and then it's going to display the people here. Okay. But right here I have basically setting it to this people. That way I can directly, like when I create something, I don't have to recall read items. I can just create it and then plop it right into people. Okay. So that's what I do here. So I create item and then people equals, um, so I put it at the front so that it, so that I can see it. Okay. And then finally I reject. Okay. So again, you know, um, let me know how you do this in the comments, but I'm rejecting it with no error basically. So I get back to this error state. Now, if I got an error, like a real error, then that will be handled right here. So it'll res.text.then and it'll actually pass me an error. I guess I should call this error, but it'll reject and that will trigger, that'll trigger this right here. So I'll have an error that I can show. Okay. But when I'm showing the error, I still want to show the form. I want them to be able to retry if they want to. So that's why I'm doing it this way. Okay. So that's why I have to finish with the reject. Okay, cool. So that is the create promise and that is the people promise, which is just, I get the people and then basically I pass each person object into my person component here. And then right here, I've just got some transitions. I got animate flip and transition fly with a bit of a random fly. Okay. So let's see. Okay. Maybe it's broken because I need a person. So let me import these. We need fly, flip, person, and these here, which are imported from the API call. Okay so everything should be good there Let see So if we come back here let say add someone pat 15 add person Okay, so it's a bit, remember, it's a bit slow in my local. It's much quicker here. So let's refresh and see if pat has been added. Cool, so pat is there. So our create is working. It's just a bit slow here. So that's really slow. But it's just in your local. So if you're using it in production, it won't be this slow. And maybe it's just because I have an error. I think that's what it was. Okay, cool. So now let's get to the person. So a person from the person, we want to be able to update them and delete them. Okay. So we need the spinner. We'll have just a little fade transition. This is our API calls that I'm importing, update item and delete item. And then we're going to have a event dispatcher. So right here we have update item. You pass in a person and their ID object, and then that gets passed to the API. Okay. And then delete item, you just pass in the ID and that gets passed to the API. Okay. So I have not done the best job of keeping these consistent. When I did it in the last video, the API, the way I did it, some of them are objects, some of them are not. But you know, this might be what you run across in actual APIs, not having consistency. But if you're building it yourself and try to make this more consistent, either have them all objects or not objects and have it match here because here it doesn't match with this one. Anyway, this takes an object, person ID, and this one just takes an ID. So from here, we're going to export let person, so that's just going to be the person's age and name. And then we're going to have a state. So I don't know if I showed you this at the beginning. So we have edit, and you can edit Pat, so actually it's Patrick, and then I can save, and now Patrick rather than Pat. Okay, same here, Bob, I could say, sponge, save. I can also edit and then cancel. Just go back like that. Okay. So that's the toggle between view or update. Okay. So again, we have this promise. It's a bit generic. Maybe I should have given it a better name, but it's, this promise is for when we see that purple thing. That means there's this promise pending. Okay. So let me undo this right here. So I uncomment that. So we're waiting on the promise. That's this big spinner, that purple spinner. And again, I'm doing the catch error like this. So basically, if there's an error, it'll show up. But right here, you see I have to return that rejected error so that it shows this right here. Okay, cool. So right here, we've got our person, which just has some styles down there. Not important. If there's an error, we'll display that. So if state is view, then we just want to show this right here. And then if I edit, this is the state update like this. Okay, so from the view state, we can either edit or remove. So on click edit, it just changed it to the update state. So we show this. And on click remove, what we want to do is dispatch the remove. So we're going to delete the item, basically use the API call to delete the item. And once that's done, we'll dispatch remove. And that way, the app that's felt up here can listen for that. Where was it? Down here on remove remove handler and it can just remove it from its list of people So again this is so that we don have to recall people promise every time and refresh the page or something. Okay, so that's the remove handler. So this is just to remove it on the front end, but the person is actually responsible for deleting it in the backend. Okay, so that is removed. Finally, we have update. So here we are in our edit view, in our update view. And I did what I did before. So I have my form and then the, uh, that get JSON function I had. This one right here will return an object from the form. Okay. So I'm console.log and I guess I don't need to do that. Okay. So I get that person updated person equals get JSON from the event. And then, oh, here's another console.log don't need that. Okay. So then update items. So person is this updated person. So basically whatever I've typed into the form and have input here. And then this save, so the save button will trigger the form submission. Sorry, that was kind of out of order. But anyway, it'll update the item and then the updated person. So set person to updated person, basically set this in here. Actually, I should maybe be binding to this person from up above, but this seems to work. Okay. And then I end with a rejection just so that it shows my error state, but it's undefined. so it won't actually show an error. And again, this is because I want to repeatedly be able to do this. I want it to go back to the same view as it was before I updated it. OK, and then I set the state back to view like that. And when I do that, OK, no, never mind. OK, cool. So and then here we have the cancel button, which just sets the state back to view. OK, so edit brings it to update, and cancel brings it back to the view. And then we've got the remove button and this save, which submits this and gets that working. Okay, so I know I kind of went through that fast, but you can look at the code yourself and you can just clone this and try it out. Though you'll have to check out the other videos for hooking up MongoDB. Although you could maybe use this Quart API, this simple one without MongoDB. Okay, anyway, that's it for this video. Let me know how you do things, if you do this a little bit differently. I haven't had to do this in the past. Usually I just call it and then it'll fail. The API will somehow make it fail and I can just like handle that on the front end. So I don't always seem to have to do this, but in this case I do. So anyway, that's all for this video. Have a wonderful day and please like and subscribe. Oh, I guess I should. Okay. Well, you probably already left, but I should probably show you it actually working. Okay, so create person. I'm going to say, although, is it working? Yeah, it's just really slow. Okay, so I'm going to say Bob is 12. That person, well, it's pretty slow here in the local, so we'll say John is 13. We'll see Fred is 17. Okay, and then I can remove. Actually, it looks cool if I remove like this. Since it's slower, I can remove all of them at once. Okay, anyway, I don't know if anyone watched this last part, but now the video is actually over. Goodbye, and have a wonderful day.