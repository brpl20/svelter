 How's it going, everybody? Welcome back, and let's talk about hooks in SvelteKit. So to start us off and to properly build our mental model here, you've got to know that there's three types of hooks files, okay? And that is hooks.server.js, hooks.client.js, and hooks.js. Now, it's pretty self-explanatory what's going on here. This is a server-side hook, a client-side hook, and if you want it to run both on the server and the client, You just name it hooks.js or subsequently hooks.ts, of course. Now, we're going to be focusing on hooks.server.ts in this video just because nine times out of ten, that's what you're going to use. And this is what we're going to be using especially for authentication. And we're going to kind of like talk about those scenarios. So if we hop into our example app, the first thing you need to know is that this does not live in the routes folder. This is going to live in the root of the source folder. And that actually completely makes sense because we don't have a plus sign here as a prefix. When we have a plus sign, that is for a specific and a special route folder. So if you put this inside the routes, it's just not going to work. Now, another thing that's really cool about SvelteKit is that SvelteKit is actively looking for this file. You don't need to create this file and then do some configurations. SvelteKit is looking for this out of the box. And this is the default behavior. We have an event, right? And we're resolving that event. That's it. So if you comment this out, you get the same behavior because this is the default SvelteKit behavior. Okay. Now, kind of just, you know, continue to build up our middle model here. If I go ahead and I don't return anything, yes, we're going to get an error here right inside of our editor. But as you see, we're going to start getting 500 errors. Okay. And that's just because that request is not following through. And that completely makes sense All right And so with this event object you have all the information that you going to need to properly intercept you know a request to the server And that's really what this handle is doing. It's allowing you to kind of get in between, you know, the user and SvelteKit and do whatever you need to do. So when you work with event, you have a ton of stuff available. look at this autocomplete here. We have a ton of stuff that we could take advantage of. So this may be a good time to get a session from the cookies and then maybe do a database operation here on the next line and then grab that user information and then you can return that. And we're going to be returning that through locals. So if you don't know what locals is, it's not local storage. I know that could be kind of confusing. And locals is a custom data object that you can put anything you want in there so the response has some context or the response has some extra data that you want to be using. So let's go ahead and just kind of create some user object. We're just going to kind of pretend that we grabbed a session from the cookies, we made a database trip, and we're just going to pretend that we got back this object. So we're just going to have two properties, name and age. So I'm going to put hunter. Let's go ahead and put 33 here. Okay, we're all set. Now, what I can do is I can say event locals, right, because we want to be taking advantage of that data, the data object. And let's say user, and we're going to assign user that we just created that we just hard coded. Now, TypeScript is barking at us right here just because this is not properly typed. But if you want to give locals a proper type inside your declaration file, go ahead and do so, and then that's completely taken care of. But for now, we're just going to continue with this because we don't really want to emphasize too much of TypeScript right now. We want to kind of focus on the fundamentals of hooks here. Okay and because we are using that locals object we going to have that available in our load function which is really cool So let's kind of take a look at some situations. Let's pop into our routes folder. Let's go into the about route, and you're going to see that we can pull out locals, which is really cool. so right here let's just go ahead and console.log locals and let's take a look at what we get oh and we already got it awesome so you're seeing that truly pass through so you're kind of seeing where this is going you can use this inside this you know individual uh route here um but we could also access this data in other ways and let me show you how we're going to do that so i'm going just comment this out. And let's do this in the layout. So we know that the layout files are going to wrap around all of the children routes. And so if you want this kind of available to all routes, putting this in the layout could be a good idea for you. All right. And it's actually, we're going to go through some examples in a second how this is extremely handy. So just like the load function in the individual route, we have locals, which is really cool. And we know what we return from this layout.server.ts file is going to be available in not only the data prop, but we're also going to have that in the page state, which is super cool. And we're going to show you that in a second. All right. So let's just go ahead and return. And we're going to say user and we'll say locals.user just like that. Okay. So now let's go ahead and grab this from the data prop first Let go ahead and do that So I going to say let data Let me make sure I in the about page Perfect And let me destructure data Okay here we go And let say dollar sign props Okay, perfect. And what I'm going to do is I'm just going to print this out here. And I'm going to be using inspect. Remember, that's a new rune that we got in Svelte 5. And this only runs in development, which is really, really cool. So let me just go ahead and put data right here. And here we go. We are getting the user, which is really nice. And this information is being fed to the data prop because we are returning this inside of the layout. And we know that data gets merged into the data prop for the individual route, which is really cool. Okay, so we have that information there that we could clearly display on this page or add some condition to this page. And so we also have this data available inside the page state. So what I'm going to do is I'm going to import page from $appstate. And what you're going to see here, and let me just kind of add something here to differentiate. We're going to say inside data prop. Okay. We're going to be using inspect one more time. And we're going to kind of label this inside page state. Great. And let's go page.data.user. Okay. So here we are. And as you see, we also have this inside the page state. So this is a really big benefit of working with layouts and pumping data into the layout itself. And so this is how we can get in between those requests with hooks.js or with hooks.server.js. And I hope you found this useful. If you did, go ahead and give us a thumbs up. and I will see you in the next one.