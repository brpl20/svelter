 Hey friends, what's up? Today we're going to learn about one of the most underrated and powerful features of Swell that sets it apart from other JavaScript frameworks, which are Swell actions. And basically Swell actions are just regular JavaScript functions that are called when an element is created. So they give you a reference to the element and then you can do whatever you want using regular JavaScript. So we're going to look at a bunch of examples from this tooltip. So we hover over it. We're using this tooltip library so we can update it. We can say banana and then we're also going to learn how we can update actions as well. Then you're going to look at the model and you probably had to do this a bunch of times. So you need to know when you click outside of this model so you can close it. Well, we're going to learn how we can dispatch custom events. So when you click outside, boom, easy. And then we're going to look at motion. So we're going to use this library motion1. So we're going to make this animation. We're going to see how we can get a reference to it so we can do whatever we want. And lastly, we're going to talk about progressive enhancement with Svelte Actions. So that's going to be really awesome. All right, so I hope you're excited. But before we get started, don't forget to like and subscribe. and you can support me by becoming a patron. For the friends, so as always, you can find the link to the blog post in the description so you can play with the example yourself or read the post if you want. All right, so here I have a simple component. I have the show and content state. So basically I just have here a label which is going to be a toggle checkbox so I can show you the life cycle of the Svelte action so when the element gets created and destroyed. Here we added Brazil. So we can say if show, we can say input bind value to content. So this is just going to be our input and this is just a normal regular div. alright so how do we do this right well first you create a regular function and this can be anything so you can import this from anything and this is what makes it really great and powerful so we can name it greet but you can name it whatever you want like banana right and you're usually going to see this example is going to get called node but i'm usually not a fan of this naming convention you can name it l element whatever you want right so if you're using typescript you can also give it a type if you want but if you're not using typescript just ignore it Alright, so what happens? So the component gets mounted, so we can see that by saying console.log.hi. And now we can also optionally return an update and destroy method. So here we have this destroy method. And then we're also going to console.log.hi. And basically that's it. Okay, so how do we use this action? Well, we can use the use directive in Svelte. So here is something that's specific to Svelte, right? So we just say use colon the name of the action. Read like this. So let me save this. Let's go to this example here. Here we have this action. So I'm going to open the developer tools and when the element is created we should see high As you can see here is high So everything works as expected right Here we have our input nothing important So let see what happens when the element gets unmounted or removed So let me just toggle it again. And now it says buy. And now you can toggle this however much you want. And basically, this is the basics of Svelte actions. And now, of course, this means that you can do anything you want. Let's say, for example, that you want to use the web animation API. Easy peasy. We can reference the element itself, right? And we can say animate. and now it wants us to pass some keyframes. So here we can say opacity zero and then we can say opacity one. So this is just the native animation API in the browser. Cool, now we can also pass it some options. We can say duration, let's make it obvious. So we can say two seconds and then fill forward so it ends at the last frame. Otherwise it's going to get reset. So this is just the same thing as CSS keyframes. This is basically the API for that. All right, cool. So let's save it and let's see it. so now when we do that it should fade in you should see it works as expected how beautiful is this friend right alright but this is boring maybe we want to pass something here so it reflects and updates the value or whatever you have inside so how can you do that well you can pass options to the Svelte action so here you can have an object or whatever you can destructure the values here but I'm just going to pass a single value of content which is going to be of type string and nothing special so now where we have return here we just need to return an update function and then we also give it what is going to update. So this is going to rerun. We also need to give it a type again and basically that's it. So now we can say console log and I'm just going to do it inside of an object so we can see that it comes from content. How awesome is that? So now this content is already bound to the value of this input, right? So basically here is a warning because it says here content. So it's like, okay, this value has to be passed but you can make it optional, right? It's not important. So basically you can pass any parameters you want here. so we can just say content and that's basically it so let me just go to the example here i'm going to clear everything so we see what's going on and now inside of here when we start typing something like hi you're going to see the value of content inside gets updated so how awesome is this so you can type banana or whatever else you want so now inside of your action here when you have this you can reassign it to whatever else you have inside maybe you want to chase some configuration and etc. And basically that's how simple this is. But let's look at another awesome thing you can do with Svelte Action. You can dispatch custom events very easily. So to dispatch custom events, this is just regular JavaScript, right? So we can go to MDN custom event and now this should open So let go to the custom event constructor If I zoom in you should see Here they even have an example. So you can create a custom event. You can name it banana, whatever you want, right? And here they show you. You add an event listener, which you're going to do in Svelte. And then you just dispatch the event. How easy peasy is that? But I'm also going to show you something that you might not expect. So let's go here somewhere at the top. So how do we create a custom event? Well, we can put it inside of a variable. let's name it greet event and now we can say new custom event simple like that we can give it a name I'm going to name it greet and now you can also pass whatever else you want so this can be some data this can be a function but I'm just going to pass this detail I'm going to say hi and then to dispatch it on the element itself you can use the dispatch event API and now we can say greet event and that's basically it so let's save this and now we can use the event listener so you might go somewhere like here so for example here we're going to say on so we're listening to a custom event this time how awesome it is we can say greet so now inside of here you can pass it anything i'm going to pass it a callback so we can say console log high and this is complaining because we don't have types but later we're going to learn how we can even type these things for right now this isn't important so when we go here to our example you might be thinking okay this should work right so let me just refresh for good measure so there are no tricks right and here the element is mounted but we only get the high from the beginning of here. So let me just comment this out. And again, so no tricks. You can see nothing logs out. And that is really curious, right? And the answer why this happens is really simple. We are registering this event after we create this, right? After we use our sell action. So for example, the next update happens on the next tick in the browser or repaint. So for example, you can do something like this. You can say request animation frame. And basically this just accepts a callback or you can use a set timeout with zero. So basically this is going to happen. It's going to tell to the browser, hey, do this work on the next repaint in the browser. As you can see, now when we go to our example, let's toggle it. Now it logs out high. Now this is really inconvenient, right? So to fix it, I'm just going to remove this. Let's just move this event listener before we use the Svelte action. That's basically the fix. That's how simple that is. So maybe a general rule of thumb when you're using actions, just place them at the bottom as the attributes just to be safe, right? Maybe. So we can do this. And now we can see when you go to example again let refresh And how beautiful is this Now it logs So let see how we can also get the details so maybe instead of this callback we can say handle greet so now you have this special function function handle greet so now this accepts a type of event right and this is of type custom event if you need to type it awesome so now we can say console log and now let's see what the event is right? So let's just say toggle. Okay cool. So let's see. Event. It's really nothing intimidating right? Oh so you can see something familiar with your detail. Okay nice. So we can go here and we can say event detail. Boom. Let's just refresh everything so we get a clean slate and now it says hi. How beautiful is this friends? So Svelte actions are great for anything from using JavaScript libraries in Svelte to Sveltefying existing JavaScript libraries. And I also want to emphasize that Svelte actions only work with JavaScript enabled, so they don't run on the server. So let's go over some more practical examples so you understand how to use Svelte actions. All right, friends, so let's look at this tooltip example. So here we're going to use this library Tipee, which is really simple tooltip system. So we can go to Tipee, and of course, as always, when you start out with these libraries, just go and read their guide. So what you have to include, getting started, they tell you everything, how to install it, what CSS you need to include, then how to create Tipee. So here is the usage. So you just create this Tipee thing, and you just pass it the element and whatever options you want. And as you can see, I just have this simple example. I have this input which binds the value of this input content. So the tooltip, and then we're going to create a svelte action. I also want to emphasize, you don't really need to create a svelte action. Maybe you want to create a component tooltip and use that. That is perfectly fine. You can pass whatever props you want here. That's perfectly fine. But you can see svelte actions are way simpler. For this, when you need to reach into the DOM, right? All right, so let's see how we can do that. so let's create another action i'm going to name it function tooltip again it's going to accept an element so we can say html element and then we're going to have options which we're going to type in a second all right so let's create a tooltip so we can just say const tooltip and now we can say tippy so we can import it from here we can say tippy from tippy.js i already have it installed and now we can just use typescript we don't even need a dogs tp1 swat targets okay let's pass it the element what does it want then it wants options okay this is why type script is amazing okay all right so now let's return the cleanup so again when you're reading these dogs let's go to the

 Tip is just get familiar with the methods, right? This might be more advanced if you're not that confident in your JavaScript. But when you go to their methods, here it is somewhere. So, okay, you already know how to make TPN, etc. But always be conscious that you need to also do some cleanup. So if you just read through these methods, right? You can see this is some method destroyed, permanently destroyed and clean up this instance. All right, so let's be responsible. So we can go back. We have a reference to tooltip. And we can just invoke destroy. That's basically it. but if you're using TypeScript you already know every possible method on this way TypeScript is awesome right you didn't need the docs to tell you this and you can just do this boom alright so now let's use our self action and this can be anything doesn't need to be a button this can be a H1 so we can say use full tip and we can also pass it an option so we're using an object this time so we're going to just pass it an object and here we're going to have some options but you're going to see it's not going to work or update that is but let's save everything and let's go to our example so right now it should work it's going to be tooltip right so if i refresh it just for good measure it says tooltip because that's the default value we set here so content tooltip if i remove this content say nothing then nothing is going to be here right so when i hover it over nothing and again if i bring tooltip back then it's going to work all right so how can we update this value well let's just use our update method we can say update what we want to update options that's basically it so now we're going to do this and now set props so it's probably set props you can see set props okay so you're looking for okay how do i update this after i initialize tooltip or tp whatever it is right you can update any prop after the instance has been created and then it tells you instant set props or blah tells you everything right all right cool so now we say tooltip again we can say set props and now just pass the options you passed already. Cool, so let's save everything. Let's see if it works. We go to our example. Here's tooltip. Everything works fine. Let's say banana. How beautiful is this? Now everything works as expected. As you can see, we are missing some styles, right? So again, we can just import the CSS from here. I'm just going to say import. Again, what is the name of our package? Tippi. So now we can say slash. Probably in this. Let's see what is here. Tippi CSS. Boom. That's how simple that is, friends. So you can see the styles looked off, but now it's styled properly. So now you can say banana. And things look great Alright so lastly let type this Alright so how do you figure the type of something like this And basically this isn even Svelte related Maybe for whatever reason you want to move these options outside So maybe you want to have these options right here. But now we don't have any auto-completion. So how can you figure out this type, right? And basically, you already have the type information. If you hover over TP, okay, let's look. It says optional props, right? I hate this hover. Let me just leave it like here. Optional props. Okay, so we're going to look for optional props. and we already see this is some partial props thing, right? But you can press Ctrl or Alt depending on your computer, maybe using Solaris, I don't know. So you can go to Tipeee and let's just click on this thing so we get the entire file. So this is the type definitions. So what did we say we are looking for? Optional props, right? So let's just find it. Optional props and we're already here, right? As you can see here, this is probably a function overall or something that doesn't matter. So you can see maybe here is this partial. We're not really interested in this, but we're really interested in props. So if you go to this T props, again, you press Alt and it leads you to this. You can see props. And then you might look, for example, for partial in this project. And you can find partial anywhere. And basically, partial is just a TypeScript utility. But maybe you don't know about TypeScript utility. This is fine. And you might be thinking to yourself, OK, so this is probably something global, right? And then you just go to your search engine of choice. And you can just say TypeScript partial or whatever. And then it's going to lead you to the documentation. so as you can see utility types okay so now let's find where is partial so now this is how you learn okay what is partial type constructs a type with all properties of type set to optional okay now you learn that partial when you pass it a type it makes all of the options optional right and boom that's how we do it right so we can go here we already know the type easy peasy friends of course it's not easy peasy this is the first time you're doing but once you learn it down you know it forever right friends so we can go here we can say type options now we can use partial and let's rely on auto import we can say props and thank god the auto import works but as you can see you can do it yourself like this say type props and now let's just do it like this so we can also set this to be optional i think or let's just pass it the options and then we can also type it here boom now you get great auto completions for example if i press ctrl spacebar boom now you know everything you can pass here right again you have documentation in your editor thanks to how beautiful is this and especially if you doing this for someone else and you want to publish this library all right so that it for this example all right friends so let look at this model example so here i have this simple model i just open it and now we stuck we can do anything i mean you can add a button here right close it but what if the user just wants to click outside and close it and this is just a simple component i just have some simple state i have this open state here which is set to false by default i just have these two functions open model and closed model and basically i'm just using here this transition scale this is really simple to do in soil just refresh so you can see it again isn't that nice and basically i just have this blurred background and nothing special just some simple styles and if you're going to actually use a model i actually recommend you use the dialogue from mdn but this is just an example and you're always going to need to know when you click outside of something for other examples but yeah basically this is a dialogue and this makes it really easy so you don't have to do all of these shenanigans. And if you look at the browser support for the dialogue, everything is green. How beautiful is that? But yeah, let's just go on to the example. And again, you don't need to be a JavaScript or Svelte wizard, right? Just look up how to do something like this in JavaScript, and then you can just port the code over to SvelteKit because it's just JavaScript, right? And basically, let's just see how simple this is. So basically, we're just going to create a function that detects if you clicked outside an element. And how can we do that? Well, let's just create a function we're going to name it click outside our original right then we can pass it an element we can say html element or whatever and now we're going to create a function handle click i'm going to give it an event which is going to be a mouse event right and then we're also going to register this so we can say document add event listener is going to be click and we're going to pass it handle click and as always we need to clean up after ourselves so we can say destroy and now we can take this line of code you can say instead of add event listener remove event listener that's basically it so now we can work on the logic and now we can just go here and go to create a target element variable and this is going to correspond to the event target so whatever you clicked on right and i'm going to give it a type so typescript as in plain is html element of course and here is the simple part so this is just a couple of lines of code so you can say if the element exists right and the element doesn't contain the target element and that's basically it and now we can dispatch a custom event which we already learned how to do So we can say const click outside event new custom event And we can name it outside or you can be more creative if you want. And again, we can just say dispatch event. And we're going to dispatch the click outside event. And easy peasy, friends. And maybe I should learn how to type. Alright, so as you've seen, this can be like two lines of code, right? So how do we use it? well we go to the model itself right and we can use the action so we can say use click outside that's basically it and now let's for good measure again put the event listener before it even though you don't have to we can say on outside great and now you can do anything so now we can console log outside but you're going to see we have a problem and let me just click on the button and you're going to see if you open the console so now we can click outside so now instead of doing this we can close the model since we have this function so here's a function at the top let me see close model yeah that's it so now we can just use this again we dispatch a custom event so now let's save this and let's refresh everything for good measure so now when i click on this nothing happens and why is that well basically this is because how events propagate and to fix this problem so here in document and event listener click so basically when we click on the document it's not going to this button right so how can we fix this well if we go to mdn and event listener we can see some options here and again it shows the options here here is the type the listener itself so you can pass options or you can use capture and what is capture here is a confusing example but here is a better one let's see i think i had this right here yeah here's bubbling and capturing so basically what we want let me just find this example so here is the capture phase so if you set the capture phase to true so now when we click on the document it's going to propagate to the button itself otherwise it's not going to work then you also have this bubbling phase that works in reverse and this is really a great article if you want to learn more about how capturing and bubbling works and basically all of this complicated and nonsense for just one thing you have to do. You just have to set this to true. So you set propagation to true. And then you go here. And then you also set it for the cleanup. So now let's see if we go to our example.

 let's just refresh for good measure so now our model is going to open how beautiful is this so let's see if everything works let's see if we click outside ah nice let me just close this again let's open and close all right that's basically it so now let's learn actually how to type an action so if you're not curious about typescript you can just ignore this part but if we go for example to the swell docs so you don't think that i'm making this thing up let's see action, SvelteAction, and go here, and they tell you how to type it, right? So here they have this entire section, which is a bit confusing to be honest, but I'm going to show you how simple that is actually. So just so you know that I'm not making these things up, it's all documented here, so you don't have to go spelunking in the SvelteCold or etc. They literally tell you how to do this. So how do you do this? Well, we need to type this function first, and typing a function like this in Tyscript is really hard, so you need to use an arrow function. So first I'm going to turn this into an error function i'm going to say const click outside and you can just quickly turn it into an error function and now we're going to realize why this is and this is because this is the only way that we can type a variable like this so we can give it a type so now we can import action which is going to be a generic so if we scroll up and just see action type action from swell js kit i think this is from swell action actually but yeah if it works then it's fine so action like this and that's basically it so now you pass things to this generic so first you pass it what is this type of element and again we have html element right and now since we don't have any options or prop we can just say any and now for the events since you see this is complaining about this because it's like what is this outside i have no idea you get this super confusing message it's yeah typescript is sometimes fun right but once you do it once and learn it then it's like whatever okay and then we're going to pass this type we're going to create attributes and that's basically it so now we can remove even this from here and it's complaining attributes doesn't exist yes i know i'm worried all right so let's just find a cozy spot here and i'm going to create an interface so you can create a type whatever it's not important i just name it attributes and this is what the docs tell you so now we're just going to give it a type it's on outside which is optional so i'm going to say question mark and then it's a function which returns nothing so we say void but it has some argument, right? Which is the event and it's of type custom event. And to also make this more readable, we can take this quote and we can create a type alias out of it. So let me just cut it. I'm going to go here. And I going to say type click outside action And this is just personal preference You don have to do this but I just want to show you you can do this so this makes things instantly more readable to me so let me just save everything, and that's basically it, so let's see, we created this, okay, we pass it, and now you see, we have this thing here, so now it knows, look at me, embarrass myself, okay, so now you have out inside, okay, awesome, so now you get even auto completion for this, and now let's see if everything still works, right? No tricks, let's refresh. Okay, so now this model what's up pops up and now we can close it. And that's basically it friends. This is how we type Svelte actions. Alright friends, so now that that is done, let's look at this motion example. So what I want to do here, I want to make an element out of every letter and then I want to animate it. And we can use this whatever animation library you want, we're going to use motion1. So here in this humblah component there is like really nothing but the motion import. So what I love to do before I write any action, I just think Think of the API I want to use, right? So even before I write the code, I write the code like it exists. So wouldn't it be nice if we had this element, this can be whatever we want. So maybe you can create any action you want or event that is. So maybe we want a finished event so we know when the animation is finished. So now we can pass this callback. We can say console.log finished. And that is really cool. So now let's use the action itself. So we can say use text or whatever else more creative name you can come up with. So now we can pass it some options. alright so here is what I actually want I actually not only just want to create an animation I actually want to get a reference to the animation element itself so how can we do that well first we can maybe pass some options right so we can have options and later it's going to be typed so you're going to get great auto completion right so this already looks nice to me right and how are we going to get a reference to the animation object inside well we're going to pass a callback which we're going to name action or whatever else you want and now from here we can just structure the animation. And now when we have this function, we're going to just pass it and then it's going to run. So we can do whatever we want here. We can say animation stop, pause or return. Now we have complete control over this. And this is a more advanced example, of course, but once you try it and understand it once is going to be really straightforward. So let's just create a function. I'm just going to name it text and then we can pass the element, which is going to be HTML element. and again now we can just structure these values so we have options and action and that basically it So first we want to remove the whitespace and split the letters so that really simple So we can say const letters We can say element in our text So we can say trim. So remove any whitespace. And then we can split each character. So now we can loop over the letters. We can create the element we want. In this case it's going to be a span. And that's basically it. And we also want to remove any content inside the element. So we can say empty. Alright. So now we can just go over the letters. We can say letters. for each letter and now we can just say element and append it to the inner html so now we're just constructing this string we can say plus equals just so we add to it cool so you can say span class letter like this let me just like that and that's basically it and now we can use template strings you can say letter and this class letter is coming from my styles app css so there it is last letter so it just says display to inline block because span isn't blocked by default awesome and now we just need to use the motion one api which looks very similar to the web animations api because it's actually based on it how awesome is that right so now when we go here we can say animate and now we need to pass it the elements as you can see by the auto completion in this case this is going to be some weird DOM element so we're just going to spread the children so we're going to turn them into a regular array so now we can spread we can say element and what is on the element? well children we don't really have to think about anything else right so now we get all of these letters awesome so now we pass it keyframes so this is just like the web animations API let's set the color to orange red and then we can animate the keyframes we can say y to be 0, 30 and then minus 60, 0 and I also want the letters to rotate. So each letter is going to rotate one turn over 360 degrees. Awesome. And now we can pass it some options. So you can say duration. So we can pass it one second. And then we can also give it a delay which is really awesome and easy to do with motion one. So you can import stagger. You just scroll so it imported stagger. So now to the stagger you can pass 0.1 and that's basically it. And now we can also spread our options so we can pass anything we want here. even though duration is here specified if you pass duration 2 is going to beat it all right so let's save everything and things should work ah how beautiful is this one right so now you can also pass it for example this was duration 2 but maybe that too slow let say 1 and we have repeat also which we can pass we can can set it to infinity and now we can look at our happy little letters Alright let me just remove this and now let work on our callback. So again, after this animation, we can just invoke the callback and that's basically it. And now to get a reference to the animation controls, let me just show you I'm not making this up, right? So if you go to motion 1, if you go to their docs, quick start, they have controls and then basically it tells you okay you get back this object from the animation now you get finish now you get current time now you get duration playback right and etc it's really awesome right all right so let's get the control so we can say animation just like that and now we can invoke our action which we pass right so here is our callback right callbacks are really amazing so here is our action and now we can just invoke it we can say action and we can pass animation or the structure like this and now we have access to it so now if i save we're going to invoke stop on the animation right so if i save and go here you can see nothing is going on because we stopped the animation and that's basically it so now let's also add this finished event and we can say this by animation since we have great type completion we can see okay what does it have it has finished which is a promise we can say then give it a callback also and how we can say element dispatch event new custom event and you can name this whatever you want and awesome let me just comment this out so we can see what's going on as you can see we already use on finish so you can say console finish let me say everything and now open the developer tools and you can see if you refresh again the animation is going to run and finish should be output in the the console and that's it so now you can do anything you want all right so awesome so now we have access to the instance itself or the animation right so that's basically what I wanted to show you in this more advanced example so here's what we can do so to not confuse this is our action I'm going outside the action so I'm going to create the controls or the animation right and then I'm also going to create time so we can control it and then we can make a scrubber or whatever else you want and here we can use our reactive declarations we can say hey if controls exist, then for the controls we can say current time equals time. And again, how do you know this type? Well, just alt click or whatever to the animation and you can actually go to these types here so you can find all these types here. As you can see here are the options, animation options. Okay, then you're like, let's

 Let me try import this and do the types work like I expect. Okay, I can use this type even if it wasn't maybe intended to be used like this, right? But these types are exported for a reason, right? So that's basically it. So now we can go here. Let me just see controls. So now we can type it as animation controls. As you can see, it should be imported. Type animation controls for motion. And that's basically it. So inside of here, we can stop the animation. So we don't want the animation to play. and now we can reassign the controls to the animation reference and that's basically it so now here we can say this if block if the controls exist in which case we can create a range input like this let me just remove everything we can say range and i'm just going to do like this so now we can bind the value to time so whenever this changes is going to update the time in an animation. We can set a min value. It should be zero. The max is going to be control duration. Again, we learned this from the dogs that we can use this. And this is going to be weird because there's something maybe wrong with the API, but they don't really account the stagger in the duration. So you're going to see it's not going to end, but I'm going to show you that before I add this step. And then you can just set a step for the range. So I'll have to use a low number so we can do it like this. So again, we assign this the controls and now whenever controls or the time gets updated we're going to reassign it to controls current time which we have a reference through our call back here and now when we go here let me just refresh and now we see we stopped the animation but now we can scrub through it because we have a reference to the element how beautiful is this reference as you can see here it's not really right because it didn't account for the stagger so i just add a random number here where the duration is maybe you can chalk this into a variable i'm just going to say 0.6 or 0.4 whatever okay so let me save this and now you can see now it matches closer to what we have and that's basically it all right so let's quickly add the types and again if you don't care about types you can skip this part but for you to care about types here is how we do it again practice makes perfect right so we can say type options you can just split this thing apart however you want make it more readable. It's about you, not about appeasing TypeScript or anyone else, right? We can say animation options because this is the options object, right? And now we have this callback which is an action So now this is a function which returns nothing So it like void like this but we have some things inside of here right we have animation which you can type like this so you have to say animation again and this is the part where we give you the type and this is again animation controls that's basically it so now we have this type so now we can create again this interface attributes now we can say on finished and now again this is an event custom event turns nothing awesome and again let's just make this type so it's more readable we can say text action we're going to import action from self action so first is going to be html element that's basically it and now again we have options so we pass the options and then we can also pass the attributes that's basically it so let's return or let's turn this function into an arrow function so we can say const text let's do equals and now so we can say arrow function and I'll just give it a type simple as that text action, boom so now you see everything is typed, options, animation options, actions, it's properly typed as it should, let's just save everything let's look if everything looks okay as you can see it's not that intimidating of course, try these examples out yourself play around and you're going to see it works great, so let me just see everything works and how beautiful is this friends right all right friends so let's look at this forms example and this is going to be a bit cheeky if you're already familiar with swelkit so basically we have this form here and i'm just going to enter something banana as always let me just submit and we should see it's going to get logged here on the server as you can see here is a beautiful banana and let me just close this terminal so how does this work basically this is just a form it's just html right this is an actual server because we're using swelkit right and basically we're using SvelteKit form actions. Not to be confused with Svelte actions. I know it's a confusing name, but this video is action-packed. What can I say? Okay, so we're going to get the value. This is really important why you have to understand how forms work. We have this name value here and that's how we can get the value on the server. So we can say await request form data. We get the data and now we can say value data to get value and now we can do whatever you want, authenticate someone and et cetera and we return this JSON success tool. That's basically it. But as you can see the user experience is not that great And why is that Well pay attention to the page here when I submit this So the entire page is going to reload because this is the standard behavior how HTML forms work So wouldn't it be nice that we progressively enhance this so we can use JavaScript when JavaScript is available so we get a nice user experience and et cetera. And of course we can do that. We can go here and we can do something like on this form, on submit, and we can even use Svelte, Scan the prevent default. and now we can say handle submit and we can do our JavaScript. But this is great. What can we do which is more reusable? Well, of course, we can use a Svelte action. And let me also show you what I want. Again, let's dream this API up together. And here we have my post. Let me just do it like this. So here's what I'm going to use. And this is a bit cheeky. If you're already familiar with SvelteKit, where I'm going with this. But how about we have this use enhance action, which we can pass a callback, right? again we learned how awesome callbacks are so now for this callback let's say that we want to get back the form element and the form data well we can do that, no problem and we can also console log them out so you can say form element and form data so we're going to see quickly where I'm going with this so let's create this action this is going to be function and hence again this is going to be a form element you can name this whatever you want I'm going to name it form element so let's give it a type HTML form element and then this is going to be a submit callback or whatever which we passed right and we're going to type that later which is not important right now and now we can say async function candle submit so good old regular JavaScript right now this is an event which is going to be a submit event and that's basically it so now let's add an event listener for the form itself add event listener what we want to listen to submit of course and we can say handle submit and let's also do a cleanup so we can say return just copy this over and instead of add event listener remove event listener and that's basically it okay so now we maybe have an idea where i'm going with this so now here for the event itself we can prevent default page refresh right so that's the default form behavior and now we can get the form data right now. We can say const data. We can say new form data and we can pass it to form elements. So now from the form element we can get this data So let me show you that Let me go here I going to open the console Type in banana You can see we get the form data All right So now we can get data from this form So again, this is like the same thing as this form data from the request. We just get it from the request in this case. So now let's make a request to the endpoint. And we're making a request to this endpoint, right? So we're going to get back this JSON success true and whatever else, right and now we can say response and we can use the good old fetch cool so how do we know the url well on the form action you can get all of this data so the form action has the action it has the method it has everything so the form already knows what url it needs to submit to and now let's also pass some options again what is the method you can say post but you already have this information from the form we can say form element method that's it and for the body we just send the form data and that's how beautiful that is all right so now we can get the response we can say console log i'll wait you can say response text like this let's just see what we get test so now we get this text where we want to return json let's return json awesome so now you can do whatever you want on the client right so let's invoke our callback right now so i'm going to go here and we can just say submit now let's invoke it and now for submit for the form element i'm going to actually return form element for the form element we can pass it the form element itself right and for the form data we can pass data you can pass whatever you want this way so we're going to get this available through our action right how beautiful is this so now again we're going to invoke handle submit then we're going to do whatever you want to do here is not important i just want to show you this as an example and now we can invoke this callback so now when we console log it out here form element and form data we should see something familiar let me just clear everything so now we're using javascript so again if you didn't pay attention this page isn't going to refresh we're just going to use javascript when javascript is available on the page otherwise we're just going to use the swellkit server right so as you can see we get we get type success and we get the form itself. So this is our console log. This is the form itself. So this is the form element which we return and this is the form data. So now even on the client, we can do whatever we want. And we can of course type this and et cetera, but there's no point.

 it is and some of you who are observant they already know the SvelteKit has this Svelte action already built in. That's right. Svelte actions are so powerful that when the team from the SvelteKit were considering hey should we make a form component for progressive enhancement they were like hey we already have Svelte actions let's just make a Svelte action and what if I told you the same code here if we delete it is going to work. Of course we need to import enhance. So we can go enhance here, import it from app forms. Let's save this. Clear everything. No tricks. Let's say test. Boom. You get the same thing. How beautiful is this, friends? This is how you learn about these things. I didn't invent all of this, right? Just dive into the source code. You can look. This is like, it looks a bit intimidating, right? But you can see this is the exact same thing. So this is export function enhance. It accepts an element. Here it has this callback, which the call submit. so here is just some junk code like if you remove this it wouldn't matter here we have the same thing we've done you can see handle submit you can see event prevent default same thing we've done form data new form data how close this is right you don't even have to be a framework author like this is an action that you could have written yourself right even before it was official in SvelteKit you can see here they include some awesome things so of course you should use their official action instead of doing whatever you were doing right and then they have here check try again the same thing response fetch and etc and then they evoke this callback so this is how you learn about things and how beautiful is this friends right all right friends so i really want you to understand the power of swelped action so let look at some community examples here let close this and now let open some examples So first we going to look at libraries and some utils So let open CodeMirror Neo Drag Neo Confetti Flatpicker and Maskify which are all really awesome So for example if you familiar with CodeMirror which is just a code editor you can use in your project if you want. So here is how simple this library makes it to use CodeMirror. So you can just import CodeMirror from Neo CodeMirror and you can use it as an action. So you can pass it a value, language, or whatever option you want. So you can also get editor-related data and of course, read documentation. So this is how simple it is to use CodeMirror. And then another awesome library, NeoDrag. So you get dragging for free. So you can just go to their documentation. So you can open this. You can see you can just start dragging. And let's look at how simple it is to use. You just install NeoDrag and then usage, boom, use draggable, that's it. Now you can pass it all of these options. And even if you don't write self-taxions yourself, take advantage of the already existing Svelte actions in the community. Let's look at a confetti. Maybe you want to celebrate you learning Svelte actions. Well, you can do with NeoConfetti. So you can open NeoConfetti. It's really awesome. So you can see here are the docs. You can just install it. It's a simple package, right? You can say use confetti. You can pass it the particle count, the force, or whatever else you want. All right, so let's look at another example. Here is a flat picker, date picker in Svelte. So here is a demo. I open the demo. so based on the action you pass in you're going to get a different date picker so maybe you want just a regular date well you pass in use date picker maybe you want a month picker you say use month picker so let see date picker like this month picker you can pick a month maybe you want a date range how crazy is this right so you can select the range where you want a month range picker so you can go january august and that's how beautiful svelte actions are let's look at a svelte action wrapper for masking inputs and basically masking inputs is just so that whatever input formatting the user enters is always consistent so this is inspired by alpenjs dynamic masks or open js masks so let's open Alpen.js examples. So here's how you can use it. So for example, you can only input month, month, day, day, year, year. So whatever I input here is going to be the same format. So you can also do it like this. So you can input any random number, but if you start with 3, 4, it's going to have a different formatting. So if this is something that you need, then have a look at this awesome package, Svelte Maskify. Here's how you can use it. You just say input, use Maskify, and you give it the format you want. Awesome. So let's look at some utils library. And the beautiful thing about these things is that you don't need to install directly these packages. You can just copy paste the code or you can look at them to learn. So let's look at Svelte Action, Svelte UX, and Svelte Put. So here is this repo, which has a couple of actions you can click outside, which you already implemented, long press, pannable, lazy load, and etc. Then you have this awesome library, you have Svelte UX. And this is basically, let me just see, so you can go to here and they also have a bunch of useful actions. So if you scroll to the bottom, they have stores, actions, let's see, input, layout, mouse This looks cool Oh so you can okay so long press movable so you can click and hold and now success repeat to height awesome now it also gives you a movable you can see a lot of these things are similar but you can learn a lot how this works and again this is just regular javascript just by learning this you don't have brain rot from learning something you're not never going to use you can just learn literally how to make drag and drop in javascript and the ux is 10 times better because you're using svelte right you get all of the niceties custom events and etc you can see mouse observer so this is the resize observer i think and yeah you can use resize and then when an element resizes you can do whatever you want which also reminds me of this library so swelled put is really awesome so let's go to sell put you can read the docs and this has a bunch of useful utilities in sales you can see avatar click outside copy drag scroll intersect so i think this is the intersection observer right so let's look at this yeah and everyone knows how a pain in the the intersection observer API is. So again, you don't have to think about this ever again. You just use it like this. Use intersect, on intersect, do whatever you want, right? Boom, how simple that is. I hope you appreciate and learn how powerful Svelte actions are so don't sleep on them. So that's basically it. If you like what you've seen, don't forget to like and subscribe and you can also support me by becoming a patron. Thank you for watching and catch you in the next one. Peace. Thank you.