 Hey friends! Today I'm going to show you some awesome page transitions using SvelteKit. So here I'm just using the regular SvelteKit demo project so we can emulate a real project and don't have to set anything up so just create a new SvelteKit project if you want to follow along and select the demo option. As you can see this is alright but it's kind of vanilla right so how can we spice this up? First thing I'm going to do is open the layout so I'm going to press ctrl p inside the project then I'm going to start typing layout. Let's open the root layout. So basically what you're going to do here we have to use this layout and here is a slot where every page goes right so you can say hello this is going to show for every page and basically in swell kit if you didn't know every page is basically a component so if we can animate components mounting and unmounting we can do the same thing for pages but how can we do this right we have to first know when the navigation happened and then we have to somehow mount and unmount this so how How do we do this? Well, we're going to learn a couple of neat tricks. But first, let's see how we can see when the page changed. So we can use the page store. I can say import page from, it's going to be dollar sign, app, and it's going to be stores, I think. So let's just do it like this. And then I'm going to use this snippet pre, just so we can see what is inside. And we have to prefix it with the dollar because this is a SwellKit store, so this is just syntactic sugar, so we can subscribe to it. And now we get something interesting. We get all the information about this page. So we can see route ID. And now when we navigate, we can see the ID changes to about. Then it's swerdle and etc. And even we have some other options like the URL. So for example, it won't show here. Let me just do a console log. So I can say page URL. And we can get even more options. If I just open the developer tools, control shift I. Let me just save this. And now we can see for the URL, we have host, hostname, ref origin. and we're interested in path name, right? When we change this and if the console log updates, we can do this. It's going to update. And now we're also going to see that the path name update. But how can we create and recreate these blocks? Thankfully, in Swellcade, you can use a key block like this. So you can say key, and then you can give it a value. When this value changes, whatever is inside of here is going to get destroyed or unmounted, and then it's going to mount it back again. So that's how we can mount and unmount pages in this case. And what are we going to use for the value? We're going to use, of course, page. And then you can use route ID or we can say path name like this. And now I'm going to show you what the problem is with this approach. So right now there's nothing going on, but we need to add our transitions. How do we add our transition? We can just add an element. And now we can use a transition from Swell. We can say transition. We're going to import fly. So I just pressed enter and this is imported at the top. Sometimes the import here is weird, so keep attention if you're doing an auto import. It looks fine right now. And then we can just say, let's just say that x is going to be minus 200. And let's just save this. And now, since we're going to update this each time, the key block is going to get destroyed and created again. So let's see how this works. Awesome, but can you notice a problem? Pay attention how we're at home, and let's just make it more obvious. We can say duration, 2 seconds. So what's going to happen, this happens too late, right? Our component is already going to be mounted. So what's going to happen is the about page is going to go through the out transition and then in transition again. So let's see what happens. You can see it transitioned out and then it transitioned again. Ah, that sucks. So what do we do now? Well, basically, this is why this method doesn't work for using the page store. What we have to do is know that the page changed in advance and we can do that using a layout page so we can just send it as a prop again the same path name and then this is going to work fine all right so how do you do that well i'm going to go to the project source routes and now we can create a plus layout ts or plus layout server which one you pick doesn't matter so you can just say plus layout ts and now we're going to export the load function export load function where we get also actually its export function load and now we can destructure the url which is the same thing as we saw from the store so then we can return a url which is going to be the url and what we want from the url path name right same thing we used before so right here we can go and we can delete this let's just remove all this code we don't need this anymore so now we're just going to take the prop export let data and now we can change this to be data url all right so let's save this and let's Let's see. This already looks a lot better, but as you can see here is a problem. Because in Svelte the transition is going to play in and out, both you can see they overlap. Alright, so how can we solve this problem? And basically you can solve this easily, you can just say in, for example fly, and now the duration since it's 2 seconds, give it a delay which is going to be also 2 seconds, And now we can also specify an out, fly, and we can say duration, again, two seconds. We can save. Of course, I put the wrong in. We don't want the curly boys. We can just do it like this. And then let's remove this. And also let's add equals, right? So we can just save this. And now you're going to see, there's going to be a delay for the intro animation. So if you go to about, you can see. Ah, beautiful. So now it works. Of course, this is really slow. So let's put it something 300 milliseconds. And that's really awesome. So you can see if we go to the about, the about is going to show. And we can also make it so, for example, if we enter right here, it's going to go from the left when we enter. But let's say we want to exit on the right. We can say here X200. Let's say this. And now this should go to the right and we should get home from the left. And how awesome is this? As you can see, here is some jank also on the page, so there's probably styles in here, in the body. Let's see. So for right now, you can set something like overflow hidden, save it, and then you won't get this jank anymore. All right, that's awesome. But I also want to show you how you can spice this up and create your own custom transitions. So let me just close this. We don't need layout anymore. So basically, custom transition functions are basically like Svelte actions, but they return a special transition object. So you can create whatever transition you want. So let's create a transition where, for example, this element, when it enters, is going to scale from the left, and when it exits, it's going to scale back to the right. So how do we create a custom transition in Svelte? Well, basically, we can just go here, and now we can say function. Let's name it scale, and now this is going to take in a couple of things. It's going to take a node, which is going to be the element itself. so that's the reference to the element and now it's going to take some options or parameters we can destructure them we can just say delay duration and easing and we can export a default easing from cell kit so it has a lot of easings you can pick from let's pick something like cubic in and this is going to come from import cubic in from svelte easings i think yeah easing so we can point like here and we can set delay to be zero duration default 300 milliseconds and then we can set it to default an empty object and we're going to look at the types a bit later let me just say language type script awesome and also another parameter that you're always going to have is a direction which Svelte is going to do for you but we can just destructure it from options we can give it a default bulk because the value is in out or both and we can also set it to a default object all right so let me show you how simple this is basically the only thing you have to return from this is a special object that has the delay it has the duration easing and now svelte uses css so this isn't even javascript so it's very performant svelte is going to create a css animation from this and you only have to pass it a css function which is going to take t which is means time, it goes from 0 to 1, it's not the duration of your transition, but it's just going to track when it starts and when it's done. And basically this magical number, t0 to 1, you can also apply easings to it, which is just some fancy math and that how you get also easings and etc So the rest here is just regular CSS right So this is beautiful so we can just say we can use the new css property scale so we don even have to use transform and then we can use template literal so this is going to go from one to zero that's it and then we can spice it up by using transform origin so we can say center center which is the default let me save this and let's use this transition so we can go here we can say scale now we don't need x anymore and we can keep the rest because if you didn't know that's how all of these transitions in svelte also work they're basically implemented like this even in the source code which is really awesome how simple it is considering you might be thinking how svelte is this complicated thing but even the source code for these sort of transitions is relatively simple and easy to understand all right so now basically we didn't do anything special here but now when we transition you should see it should just scale but this is really not what we want even though if it's a cool effect you can also do cool things like let me just remember elastic out let's see elastic out so this is going to be springy boing you can see it like this you can have a lot of fun and give up personality to your side but yeah let me just switch back to what we used in cubic and you can also let me just look svelte easings i think there's a ripple with all of the easing function visualization so i'm going to link that in the description give it a second just so it loads oh this is a cool one i didn't know about this but i was like thinking about another one ease visualizer i think that was it yeah from the official svelte site give it a second yeah so you can see here you can pick whatever you want easy now let's Let's see, E sine, cubic. As you can see, these are all just map functions that apply to that zero to one scale. So that's how you get this easing, which is really cool. So I'm going to link that. And of course, everything is going to be linked in the post. All right, but what is a cool thing that we can do here? So how can we transform origin? Say, okay, go from the left and then go from the right. So basically, we can use this direction here. So we can map the origin. We can do something like this. We can say const origin. And now we can just give it values. So we can say, okay, when you're in, it's going to be center left. And when you're going to be out, it's going to be center right. Or actually, let's just say bottom, not center. And then the default, which is going to be both, is going to be center center. All right, so how do we use this? Well, simple. Let's go here. Use a template. And now we can say origin. And let's pass it a direction. How awesome is this? okay so now we can do this and now let's see oh but of course i'm silly and as you can see one down suggest you really have to pay attention what you're typing here so this is transform origin and if we go here we can see oh it goes to the right start from the left how cool is this friends right oh you can have so much fun awesome all right but let's spice it up and we're going to show you something a bit more awesome so to end it off let's create a fun effect instead of scale i'm going to right click i'm going to rename let's name it flush and then i can remove origin since i'm going to use this and we can also use rotate and we can use the turn value in css so we can say t turn so this going to go from 1 to 0, which is going to be 360 degrees, right? So let me just save this. And now I'm going to say that this should be one second here. Let me do it like this. And then if you can see, now we're going to get this effect. And I've also prepared a curious sound effect. So we can also do this. We can say direction. If it's going to be out, then I'm going to play flush. And now when we go to home to about. How beautiful is this friends. Another way how we can place this sound. Since we have already this custom transition. We don't have to use it. But there's also on intro transition and start. You can also play the sounds or do whatever you want here. As again you can read this more in the Svelte documentation. But how awesome is this. So now we have custom transition in Svelte you can impress your friends and co the only thing left is you can abstract this into a Svelte component So let's do that. I'm going to go to the sidebar, routes, and you can create this inside lib wherever you want. I'm just going to create it here so we can say transition Svelte. Let me just close this. I'm going to copy this part over. So we're going to do it like this. add a script and now we just need the key so we can just use the key here and then we can also export let duration and we can have 300 by default actually i can do it like this so now we can go to the duration we can leave it like this the delay should be the amount of the duration if you want to avoid that mistake right but of course depends what you're doing here let me save this and now let's also take flush so we can go here which you can also store in a separate file if you want i'm going to store it here for fun let's see what else are we missing you can also take this pour the sound from here we're also going to need cubic and fly but you're not using fly right so you can just go here let's remove fly let's save it like this so we can remove all of this code we can remove this and now we can go here we don't need this block anymore so this is just going to be slot like before and now we can just import let's see if it's going to autocomplete transition awesome so we have lib transition from swell and we can just leave it here you can name this whatever you want i like to be descriptive and say page transition so we can go here and name it page transition let's wrap it like this and now it's going to want let's see the duration and the key and the key of course is going to be data url and what else did we say duration yes we can give it a duration of one second to override everything and now let's see should work. How beautiful is this friends. ShiftKiss. Alright so that's it friends. Let me just show you the types for this if you're curious about this. If you don't care about TypeScript you can leave right? But let's also just give this a string. So this really isn't that bad to type. We just need a type of params and options. So you can say type params. You can also be more specific. you can say flush params. So delay is going to be optional. It's a number. Then you have a duration, which is again optional. And now you can find this by just pelunking through the Svelte code. So Svelte exposes this easing function you can import. So you can see from Svelte transition. So that's basically it with params. So we can do it like this. Save. And now this should work great. and we can also give it a return which is going to be another type that svelte exposes it's going to be transition config so we don't really have to type this function now it knows about t and also if you didn't know you can return u which is the opposite of t so t goes from 0 to 1 and u goes from 1 to 0 so it's basically opposite of that now we have the params and now we just need to type the options so these directions i couldn't find the exported type for that so you can just do options direction which is again going to be optional so there's in out and you have both and yeah you can also use this if you have an option object here so you can just say options and save this and that's basically it so now we have the snit function we can reuse our beautiful transition is working as extended and yeah Alright friends, so don't forget to like and subscribe, you can find my Patreon in the description and don't forget to join the Discord. And as always, thank you for watching and catch you in the next one. Peace! you