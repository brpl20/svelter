 3D with Svelte you some cursed code. Hello friends, welcome to 3D with Svelte. By the end of this post you're going to learn how to spice up your boring sites with Svelte and by the end you're going to learn how to create this awesome scene with this cute ghost. I mean spooky ghost. I hope you're excited as I am, so let's get started. So what is Frelte? Frelte.js is a popular 3D library for JavaScript that abstracts having to write low-level graphics code yourself and lets you create anything from immersive 3D experiences to games in your browser. I want to show you the awesome things you can do using FreeJS. So here is an example of a portfolio that uses some gsap scroll magic with FreeJS. So if you can see here, here is a room and if you scroll further out, you can just see the awesome example. And you start scrolling and this is really awesome. And you can see this and this is really complicated to make yourself but it's possible right and i guess it's not even that complicated there's like an eight hour tutorial on this on youtube if you're interested it's like really and you can see these things these are like using shaders which is also a spooky term maybe so yeah this is really awesome i really love this part and then it scrolls this text and yeah i can go on forever basically and you can also change the theme so it can be dark and it's really awesome and also here here's a game so you can press start you can control this car and i'm the best gamer ever this is hard but yeah you get the point and you might have heard of other libraries for swelter using free js such as swelter cube which was made by rich harris but rich harris is busy with swelter right now so basically this was just a proof of concept and i think it's even abandoned at this point because what the point Because you going to use Frelth that even blessed by rich carries but there another awesome library swelfry but the problem i have with this it doesn even have documentation which is very surprising to me or maybe i bad and i can find it but yeah this is really not documentation so the one i looked at frelt is the most feature complete very active the discord is very friendly you can ask anything and you're going to find an answer in seconds so yeah this is frelt and it's really awesome i really love the documentation and care to attention and detail. So here is the man himself, the leader of a church, Rich Harris, blessing Frelth. So this is really awesome. And I also have a small ask of you, please go to the Frelth GitHub and give them a star because they deserve it. So go to Frelth and show your support. It's free, doesn't cost anything, right? Just give them a star and join the Discord. So you might be thinking, what is even the purpose of Frelth? Frelth is basically just a component library of wrapper around free.js. So you can write declarative code using Svelte, but this might not mean anything to you what is even declarative. If you go to FreeJS, for example, to their documentation, and here they lead you through an awesome example. And basically, let me just zoom in. See if this is responsive. Oh, it's not. Okay, you'll have to suffer with me. So basically, here is everything you have to do. You have to define the lights, the width. You have to keep track of everything yourself. Let me just see. Yeah, you have to define the renderer, the scene, and this is very imperative code because you're giving an instruction for every step but imagine if you could do something like in swelt in a declarative way which would be way easier but let me just derive this point further to home with you because declarative imperative sounds like something spooky but it's really not so for example let's say you want to make a title so you can say using regular javascript you can say title document create element and then you can say h1 and then you have to say title element inner text let's say for example hello and let me just rename this so I can say title element and then you need to append it to the body so you can say document body append title element and you get the hello this is basically what imperative means you're giving every instruction for what you want to do but using declarative code on the other hand and you just state the desired outcome. So instead of doing this, because Svelte is a declarative JavaScript framework, we don't even need all of this, you can just declare what you want. So you can say hello and Svelte under the hood does all of that imperative code for you and that basically what it means imperative versus declarative Free is powerful and might be intimidating if you never done 3D or game development before but it worth learning as the knowledge you gain transfers even to web development If you want to learn more about FreeJS and 3D in general I encourage you to read the FreeJS fundamentals. This is going to introduce you to shaders, material and etc. everything regarding 3D and this is really an awesome resource if you want. Another awesome thing you can do is play around with the FreeJS editor, so you don't have to even download and learn Blender, so you can just go to the editor, and if this is your first introduction to 3D, then for example, you can just, let's say, let's say the sphere. Here's the sphere, and it's dark because we don't have any light, but let's just raise it up. So the red arrow is the X axis, the blue arrow is the Z axis, and the green arrow is the Y axis. And you can just add, for example, an ambient light. this is going to light everything evenly in the scene. This is a cheap version of global illumination if you're familiar with that. But let's add a directional light and boom you have something on the screen right and you can just play around here you can translate this to FreeJS if you want. This is a way simpler approach in my opinion to get started. And I also want to strongly emphasize that for example if you're going to Frelz and you're maybe reading their documentation you're like okay introduction getting started and you might thinking that this is sparse and it might you because it's still under development, but the job of Frelth isn't to re-implement everything from FreeJS or to teach you FreeJS from scratch, right? The way you learn FreeJS is from the FreeJS side, so reading the documentation, the examples, other tutorials. Just because you're using Frelth doesn't mean you have to search for specific Frelth and Svelte content. You can watch any FreeJS tutorial and translate that concept to Frelth. Let's talk about the setup. I'm using a regular SvelteKit project with TypeScript, which is optional, and then you just initialize the SvelteKit project if you want. I'm going to use pnpm, but you can use npm. npm creates svelte, then install the dependencies, and then run the development server. And now I'm going to install the frelt and freejs dependencies, so you can go to your terminal. I'm just inside a project, then you can say pnpm i, and then you can say frelt core, and then install frelt extras and freejs. And then you can just install that, and additionally, if you need TypeScript types. Awesome, and then I can say pnpm i, I install as a development dependencies types free. So these are the typescript types for FreeJS because FreeJS is an older library. So it wasn built with TypeScript from the ground up And the next step you have to do is not that clear to me and I try to get answers but from what I understand Vite ignores transforming dependencies when using server rendering to speed things up but in this case, we don't want it, and we need to specify some packages like 3.js and Troika 3.txt for using text that they shouldn't be externalized, and Vite should process them instead. So inside your editor, I'm going to close the terminal, Control-P, and let's just look for Vite config. In my case, it's Vite TS, but if you're not using TypeScript, it's going to be JS, And you can just add server-side rendering and no external, and that's it. Basically, you can just paste this over, and you're basically done. And now run the development server, so you can say run there. And your site should be available at port localhost 5173. And I don't have anything in my page. I just have a layout that I added. You can do that if you want. I just made a scene here, and I'm styling this, so I'm giving it an absolute positioning, and I'm going to set a radial gradient background if you want. So basically that's the setup out of the way so you can focus on what's important. Let's start by creating our first scene. In your editor press ctrl p and you can start typing page and this is the only page in the project. So let's start by importing frelt and freejs. So we can type script and then I'm going to do a namespace import all as frelt from frelt core. And I prefer this because when you do something like this you type canvas and then you're going to constantly be fighting imports in your code editor and I often do the wrong one from FreeJS and etc. So it's way easier to do a named import like this and then you know where it's from. You can say failed canvas and this is way easier in my opinion. So yeah this is why I like to do this. So you can say import all as free from FreeJS and then we're going to need So math helpers import all as to say utils from free source math and math utils. And this is going to be it. Everything that happens in your scene is inside a canvas object. So we're going to say frelt canvas. And then I'm going to make space. First, I'm going to add a sphere. So you can say mesh. Actually, it's frelt mesh. And then I can complete it like this. and let's give it some attributes. So we're going to need the geometry. And for this one, you're going to need the FreeJS material. So you can say new free sphere geometry. And now we're going to pass it a radius, width, and height the amount of segments. So we're going to say

 64, 64, 64. And then let's pass it a material. So again, this is going to come from FreeJS, Free. And we're going to use a standard material. Mesh standard material. Awesome. And now we're going to just give it a color. We're going to say white, but you're going to see the problem right now. So it's black because first we don't have any lights and second we are zoomed into the object. So let's add a camera. We can say Frelth. perspective camera. You also have an orthographic camera. And let's do it like this. And I'm going to set a position for the camera. Just like this. And you see why I'm doing it like this. So I can say position. This is important. So the Z axis is zoomed in. So we can say, let me see, X, 20, Y, 20, and Z. So it's also 20. And you can also give it a field of view, which I put at 50, I think. And now this should be slightly better, but we don't see anything because let's add orbit controls. And orbit controls are going to let us rotate around the object and see it. So thank you, editor, but I really didn't want you to do it. So you can say frelt, orbit controls, and then we can do it like this. And let me just see, oh yeah, it imported. It also does weird things like this. Yeah, so let's just save it. And you can see our sphere here and we don't have any material. So even if I rotate it, it doesn't look like anything because it has no light. So you don't really see the dimensions, right? So first let me add an ambient light. And it's going to be basically like global illumination, if you're familiar with that. But this is just a cheap mass global illumination. So I can go here and I can say frailt ambient light. Sometimes you don't get autocompletion, but that's fine. And I'm going to close it. And let me just see. I'm going to say white, even though I think this is the default. And then let's just save it. And yes, it's going to be the default. So we can even reduce the intensity. We can say 0.2. And it's going to be dimmer. and you're thinking, okay, how am I going to see anything? And we're going to add a directional light that's basically like a sun and it also casts a shadow. So we can say frailt directional light. And this is beautiful how declarative code is way simpler than writing the imperative version. But yeah, we have it like this. So we can say color white, which is again default, but and you're also going to mostly see all the time hex color. So you're going to do something like all X and then whatever FFA but I just going to use my web developer colors Thank you very much And I can say intensity is going to be 2 Now if you save it, we can see some dimensionality, right? And now since we have the orbit controls, we can see it all works. So we can just orbit around the object or the mesh, right? So for the directional light, let me just go here. And I can say position. And I can say for directional light, position X is 10. Y is going to be 10 and awesome, that's it and that already looks beautiful to me, shift skills so let's work on by adding the floor, so this is our sphere and again we're going to use frelt mesh and then let me just close it like this, let me just copy over these two lines so I don't have to type everything out instead of sphere geometry this is what you can learn from the 3.js documentation if you just locate it, there is a plane geometry and then for the plane geometry it's just 20, 20. So if you see here, you get the width and height, right? So it's 20, 20, but it's going to be on the wrong side and we need to rotate it 90 degrees. And you see, we can just say, let me just see. For the material, you can also supply options. So here where we have a material, where's the color? Let me just make this more readable color, white. Even though we are going to need this in a minute, I'm just going to say side, and then it's free double side, right? And then we just do it like this. And now we can see it from both sides. Let me just say that this should receive a shadow. So this is how our light is going to work. And now for the rotation, this is something very interesting, because in 3D in general, you use radians, but you can use degrees, but you have to convert them. so let me just say rotation and then if you do something like this you might be saying hey I want just 90 degrees nothing is going to work I mean it's going to work but not in the way you expect it because let me just go to math is fun radians let me just look this up and this is how radians work so basically you have to times it by math.py because this is 180 degrees radians like you have it so it's 180 degrees and then you divide it by 2 and then you have 90 degrees so that how radians work but thankfully we have a helper from FreeJS I think we imported earlier We can just say use a magic number We can say utils what was it I think degree to radians times 90. And this is going to work as you expected. And now let's just increase the Y position of the mesh because it's interfering with our plane. So for the sphere, where was it? It was right here. so we can go position and then we can say Y nothing like 4 and you can see works great and then we can say receive shadow cast shadow and let me just see and now we need to make our light cast a shadow so we can say shadow and if you cast a shadow you can see there's a problem it cuts off and that's because basically I really don't understand it 100% but I think the light itself is some camera so you also have to adjust that and also the shadow has an object. You can pass some options. So you can do that. You can say camera and you can say top and I found that this number works great. So you're going to see everything works as expected. And this is really awesome. Now we can orbit around. Also, let me show you one cool thing. So your orbit controls, you can say auto-rotate, save and marvel at your first 3D creation. All right, friends. So now we have one huge problem and that's basically, right now I have no idea what's going on in the 3D space and what direction anything is facing. The changes we do are almost instant in the browser, but still, tweaking feels like guesswork and I want to spend more time being creative than just guessing numbers. You could use Blender to set up your scene and translate it to FreeJS, but there has to be a better way inside the browser first before you have to learn some sophisticated 3D graphics software. Blender is a lot of fun though and I recommend you learn it. Thankfully, FreeJS provides a bunch of useful helpers and I'm going to use the grid helper. So if we go to FreeJS, let me just see FreeJS. Let me go there. So we can go to the documentation and let's say grid helper and we can go here. And here's another valuable lesson. So how do you transfer FreeJS concepts to Frel? There really isn't a grid helper component inside Frel. So how do you do it? And basically you can see right at the top, it extends line and object 3D. and that's the base class for everything in Free.js. And thankfully in the frail documentation let me just find it you can find object3d instance And what does it say This component lets you use any manually instantiated object that extends free object3d in Frelth So you can use this to extend FreeJS. And this is one of the most important lessons because you don't learn FreeJS by reading the Frelth documentation. You learn it by reading the FreeJS documentation. In this case, I'm going to add the grid helper so you can see a grid and the axis helper so you can see the x, y, and z axis. and it's really simple. So let's go back to our project and now I'm going to create a grid helper and access helper so I can say const grid helper. So just like in the FreeJS code, we can say new and from free, we can say grid helper. We can define the size 20 by 20 and let's create an access helper. So we can say new free access helper and then we're going to give it the size of our grid. And I think this is a bit large, but let's just see. And then remember, we just need to use it. So on top of here, it has to be inside the canvas because that's where everything is going, right? From frelt, you can say object3d instance. And this sometimes happens, this weird thing when you import something, it randomly includes it in script. I have no idea why this happens, but yeah. So let me just close it like this. and then you just pass it. So you can just say object. And then for the first one, we want the grid helper, which we just created. And then let me copy over this line. So for the another one, you just use the axis helper. And then I'm going to save this now and we're going to see we have our awesome grid and we have our axis. So this is the Z axis. The red is always the X axis and Y is going to the top. And this should be 10, I think. So yeah, just do that. And awesome. But if you ever used a game engine, you're probably used to a GUI to control the values. And that's what I really want. And we could use the HTML input in Svelte and bind the value, but I don't want to build some UI myself, right? This is really tedious. And that's why I'm going to use the package tweak pane. So let me just go here. I'm going to say tweak pane, just so we can go to the website. And I wish there was a wrapper. I think there maybe is for failure. Basically, we're just going to quickly define some GUI and then we're going to be able to change the values inside the Redditor. It's like we're using Unity or something, which is really awesome. So I can go here inside the terminal. Let me just close this. You can say PMPMI.

 tweak pane. And we can also install the types. We can say d types. We can say, actually not types. It's tweak pane core. And this is just from their documentation, right? So you can also install this. And then you can start the development server and go on your merry way. Say pnpm run dev. And basically this is it. Okay, so let me just close this. and let me just restart everything. All right, now we need to do one more thing. Because WellKit runs your code on the server and the client, we need to make sure we're in the browser context. So we can just do that by saying, let me just see if browser inside our code. So we can say if browser, and this should auto import. So we can see if browser app environment. Let me just close that. And inside of here, we're going to write our code that needs to interact on the client, right? and then we can import the pane package so we can say import pane from tweak pane and then before I do that let me just specify the all the options for the sphere so we can say const sphere and then we can say position and we can just use the same position as before so x was 0 y was 4 and z was 0. Okay so now we can use this options for the sphere. Let's go to the sphere. Yeah so here was the sphere and instead of this position we can say sphere position. You can even spread this option so you can say sphere and give it the options you want but yeah. Yeah let me do that and then I can save this and now in the browser here if I go So we can define the panel. So I'm going to say const pane. We can say new pane, title scene. And this should be added GUI to our scene, which is really awesome. So now I'm going to add a folder, and this is optional. I'm going to say const sphere controls pane. Add folder, so everything is neatly organized. And I'm going to say title is going to be the options for the sphere. And now we can use the sphere controls to add an input. We can say sphere, controls, add input. And now we can say the object. And this is really neat We can just say position So it going to take the key position and display it So if I save this awesome Now we need to listen to some changes So you can do that using and you can listen for the change event. So inside of here, we can say sphere, controls, on, change. And now we get back an event. And now let me just log out the event. So I'm going to control I, open the developer tools. And now when I change anything, is going to see an event is going to get logged out. So all the values and et cetera. And what we want to update, position. And when we update the position, because it's swelled, right, is going to get updated in the browser, which is really awesome. So let me just remove this line. And here, where is the event? We can just destructure the value from this. You don't need an entire event. And now we can say sphere, position, value. And I don't really want to deal with TypeScript, so we can just say value as any. and now I can do this. Let me just close the web tools and now I think everything should work. So we can just, oh, awesome. We can just move our mesh. You can see here some problems with shadows, but you can increase that if you want. But this is so much nicer in my opinion than having to just guess numbers and et cetera. It's like you're making your own game engine, which is really cool. The last thing I want to talk about is where you can get free 3D models and how to import them. So the site I offer that is Sketchfab and I'm not sure about you, but I'm absolutely in love with these dioramas. So if you're unfamiliar what a diorama is, it's basically like this self-contained pieces of art. Like you can see it like this. And I think it looks really cool. And this is what I wanted to replicate. But basically when you search for this, you have to press downloadable. So it filters by that. And you can download the free ones where there isn't this dollar sign. So that's going to be completely free. And there's a lot of 3D file formats, but the one you want is GLTF or GLB. and basically that stands for Graphics Language Transmission Protocol. Eh, I know it's a mouthful, but yeah. Basically what it means is this is the best format for working with 3D on the web, so it's more efficient than something like FBX and etc. You can download that. But I often find the problem with GLBs from Sketchfab, they convert it for you automatically, so maybe that's not the original one the author created. So in that case, you can just download and maybe learn how to use Blender, which is an awesome open source and free 3d tool you can download that and edit the model easily change whatever you want and then you can export it and I going to show you a bit of that in the next section when we going to make the spooky scene But yeah to use the model inside Frelth let me just find the section It's gltfcomponent, so let me just find that. Yeah, here it is, glt. And you can see you can import, in this case, this helmet. So here's how the code looks like. It's just the gltfcomponent, the URL is the path to the model. you can put this in your static folder slash models or whatever. And that's how simple it is to import a 3D model in Frelz. And also these models come with animations. So if I go to the use GLTF animations hook from Frelz, you can easily control animations using this hook. So if we see the code, here it is. So GLTF, use GLTF animations. And then you can take the animation that's exported with the model. but yeah there's like basically so much to 3d from learning about 3d itself free js game development even some basic math right but yeah i hope you're excited to go on this journey and i think it's really fun before we start working on the spooky scene i want to quickly show you how you can edit models in blender which isn't intimidating and i have no idea what i'm doing in blender everything i learned was from searching and if i can figure it out you can but of course i don't expect you to follow this because I'm just going to show you quickly how you can do it and the models are going to be and not here they're going to be in static so you can go here models you can get the models and you're going to get the same result as me and yeah let me just show you so inside of blender normal like all other software left click to select items really nothing special if you know that you can figure other things out you can press a to select all of items and delete to remove them so in this case I downloaded that cute ghost from sketchfab but there was something wrong with it right and I just downloaded the original fbx file like the author intended so you can say import and just find fbx and here in downloads I had a cute ghost you can go to source and just found the fbx file so you can just scroll in to zoom it out and in blender you can hold ctrl and yeah zoom in so I don't really want this background so I just left click it and delete it easy like that I don't care about these pumpkins, which can be cool also. You can export them separately. You can animate them so it gets spooky pumpkins. I'm just going to remove that. And there are some weird things also with this ghost. There are like two layers. I have no idea what's going on here even. But yeah we can just click on the mesh after I selected that outer layer because I have no idea what it is And then to get into edit mode you press tab and let me just zoom in So now you can just press tab You can select one vertices. This is called a vertices right? And then you can press L on your keyboard to select everything that's connected. Sometimes it's going to happen this if you're like me. And now you can press L and it's going to select everything connected. You can just press delete and let's say faces. And now that one is gone. and now we can do it for these other pumpkins. Let me just select a vertice from each one then I'm going to press L and again this happens because I think I accidentally select something from the ghost. Or I think it's because let me just see or maybe because I'm close to the mesh of the ghost. Well anyhow that doesn't work. Just see. Yeah just do it one by one. Really it's not a big deal. Delete faces because this is going to delete everything if you just say vertices. Okay. Yeah, this is interesting. Okay, so now L. Okay, and that's basically it. So now you need to fix the material. And let me just stretch this out. And here's the material tab. So here it uses some principled whatever. And you learned this the hard way. I removed this. I added some, let me see, what did I add? Diffuse, and that didn't work for some reason. But yeah, let me just say here. Then you go to the base color. And then you can just say image texture. And then you can just load it if you press here. And then inside the downloads where you had cute ghost textures, just get the PNG. And now we don't see anything, but you can press Z on your keyboard and you can get to the material preview and you're going to get something like this. You can even see the rendered. And I don't remember which one I took. It wasn't principled. It was, anyhow, you'll find this out yourself because when I selected the diffuse one, the material didn't work and I literally looked up black material in Blender and the person was using one of these other materials and I was like, okay, let me try that. And wow, surprise, it worked. You can just select that and after you figure it out. And then basically that's it. You now edited your model however you want and you can see you can even make it lower poly to make it more efficient, right? That's also a topic in itself. And then you just go to here and you can just say export and then you can say GLB and let's just do it inside downloads and let's just name it ghost or whatever. And now here, I've seen on other examples, there's like a compression option so you can

 There's this thing called Draco, which can compress it for you, but I don't really have this option, so I don't know what's going on there. But yeah, to reduce the size even further, you can go to Geometry Material here where it's import, because this is going to be basically one file. GLB has all the textures and everything baked in for you. And for the images, you can select JPG so you get the most compression, and then you can just say Export it. And another thing I like to do, so let me just say FreeJS Editor. Now I would like to go through the Editor. And then let me just delete this mesh from before. And I like to say import goes GLB. And you can see if something doesn't work here, then go back to Blender. You can select the material, right? Okay, so basically what the problem was, I think it had some other settings, right? So I removed this thing entirely and basically I re-edited it and now you see it looks normal. So let's try doing that again. We can say export. If I can figure it out, you can do. And let me just import it. And you can see, awesome, it works. And now when you import it in FreeJS, you know it works. Okay, so basically that's it. Let's take everything we learned so far and create a spooky scene. So I left all the imports we're going to need and the grid helper and the axis helper. So let's start first by creating the camera object. Inside of here, I'm going to have some options for the camera. Let camera. I'm going to say position 10. y is going to be 10 and z is going to be 10 and then since i'm going to use an orthographic camera i'm going to say zoom 40 it doesn't have a field of view because an orthographic camera ignores the size of the object if you zoom in or out it's always going to be the same size and because we're using a diorama that's basically isometric it really doesn't make sense to use a perspective camera but you can and it looks great the same and then i'm also going to have a point light so I can say point light. This is going to be the illumination for our lanterns. So we can say x0, and y is going to be 2, and z is going to be 2. And then I'm going to specify a color yellow, so I can say hsl, because I always prefer hsl. It's going to be 100%, 50%. That's basically for the hex code in hsl. So that's for a point light, and then I want to define a go, so I can say ghost I going to say position x is going to be zero y is going to be 1 and Z is going to be 0 But of course I already know this in advance because I done it right And then we need to scale the ghost down, and that's basically all we need for the scene. A camera, a point light, and the ghost. Spooky. And I'm going to do one more thing, and you're going to often see this in tutorials where they change the scene settings or whatever, and one way to do it how frailt exposes it to you for example i want anti-aliasing because otherwise objects are going to have sharper edges so i really want to smooth that out so you can say render parameters and you can say anti-alias true which is false by default i think so i'm going to add a camera frailt and this time i'm going to add an orthographic camera and then remember i'm going to use orbit control so I'm going to do this and I'm going to say frelt orbit controls and remember our object the camera we specified before we can just spread it here so you can say camera it also helps if you spell orthographic right yeah and let me just see yeah because we need to update it here too and now it's not complaining and also now we have an isometric perspective so you can make an action rpg if you want sweet so let's add the models before we add light. So I can say just give us space to work with. So the gltf component is coming from extra. Not like this. Extra. Gltf. If I scroll up here it is. Oh actually I need to import it. Yeah. So after three we can just say import all as extra from. Yes that's frelt. Frelt extra. So that's where that Let me just move that up. And now it's not going to complain. Let me just close it out like this. And now we just need to specify where it's located. And in our case, the model is located in models. And VT is going to do the importing, so you don't have to specify the entire path. It's going to look in the static folder. In the static, let me just show you. Oh, here it is. In the root of our project static, models, here is the garden and the ghost files. But yeah, so you can say models, ghost, GLB, and we can just spread the props for the ghost we defined, right? We just save this, and now we have our spooky ghost where we have no lights. But yeah let me just add another one for the garden Say extra not like this extra gltf URL and then again we can say models garden glb and this is it we really don't have anything special for this and now we're going to add some lights i'm just going to have an ambient light and the point line so i can go here frilled ambient light i'm going to give it white for now so you can see what's going on and i'm going to say actually Let me just save this so you can see it's lit. And then if I increase the intensity, it looks like a day scene, right? So how can we make it look like night? We just need to pass it blue. And now it looks like night. Ooh, spooky. And now let's add the point light. So we can say frelt. Point light. Just close it. I'm going to lower the intensity. And then remember, we already defined point light above. so we can just spread the object and this is going to illuminate the lake. So we can see here, for example, if I made it 2, it's going to illuminate everything. But yeah, I just want it to be subtle. All right, so now I want to ghost to float and how can we do that? We can probably use Svelte's twinned motion, but let's do it the game development way. So we're going to use the cosine and we're going to make it float and I'm going to explain how that works. let me just see I'm going to go here and let me just define a function so we can say function float and we can say time in seconds so we can say date now we get the current time in milliseconds and then we're going to divide it by 1000 so we can get seconds and then this is just an offset because I don't want the ghost to clip the terrain and now what are we going to do we're just going to update the ghost y so we can say ghost position y and then we can do our magic so here we can say ghost position y and remember because it's it's going to update so this is how it's going to work so we can say math sign and this is going to return the sign number in radiance time in seconds and i'm going to use the offset that we defined before and then I'm going to use requestAnimationFrame so I can do this animation and then I'm going to pass the float function in and that just going to loop forever and Argos is going to float but now that we say nothing is happening because we need to call it and since I going to already use the browser let just say if browser you don really have to do it You can just define this outside We can say float Now we going to see our ghost is floating Ooh spooky But how does this really work? I just want to take a minute to explain this. So let me just math cosine. I think this is it. Okay, so you can see here, here's your circle. And the red one on the x-axis is going to be the cosine and the green one is going to be the sine so you can see it always starts at the top let me just refresh this so we get the animation so you can see how this works and the ghost is floating this is really showing how the sine works and i really think this is cool you can even see it in this spring animation so here it's the cosine which is really cool just some basic math right and you can see the sine starts at the top but you can use cosine to start from the bottom so if I go here and let me just instead of math sine we can say cosine and you can see the ghost floating is going to start from the opposite direction from the top in this case and that's basically how cosine works and this is just some basic trigonometry like so this is the plot of sine plot of cosine and I really suck at math but this is like really super fascinating to me and I learn more about it each day so I hope you also appreciate me explaining how this works and I hope it makes a lot more sense. But yeah, let me just close this now. And also same as before, let's add some controls for our things. So we can say camera controls and we can give the point light controls and for the ghost, right? You can probably turn this into a component which would be better. You can even loop over this, but you just want to make it as simple as possible and not complicate things. So here we have float. I'm just going to say again as before, const pane, new pane. You can say title scene and if I save this you're going to see a new pane and I'm going to say const camera controls and then I'm going to add a folder pane add folder and I'm going to give it a title camera like this and now we can say cameraControls addInput, we can pass it the camera object and the position property. And then let's just copy it over like this. We can say addInput, again camera, but this time it's zoom, right? Let me just save this and now we have our x, y and z position and our zoom for the camera. And now we need to update it so we can say

 camera controls on change we get the event back but we can get the preset key which is going to be the key from the object and the value let me just show you so i can say preset key and you already seen the value before so let me just hold on yeah i need to wrap this like that and let me just see i need to do this and let me just save this let's see what is it complaining about. I need to close it here so we can do that and everything should work as before. Awesome. Okay. So now let me show you a cool trick so we can do that. And now we can see position. So he's doing that. And here's the zoom for the camera. We're also going to log, right? And now since we know what the key we're doing, so we get position zoom and now we can just do it on the object. So in this case, let me just remove the console log. So we can say the camera object, and we already know the preset key. So we can say preset key, and then we can set it to the value. And that's basically it. So let me just save this, and TypeScript is complaining, but don't worry about that. And now when I change the position of the camera, you see it's working. And how awesome is this? You can even zoom in, zoom out. And let's just please TypeScript. So let me just create some types here. You can ignore this if you want. So basically I'm going to be lazy. I'm going to say type camera key of type of camera. So it's just going to give me the keys from the objects and that's the only thing I care about. So type it isn't mad. And I'm going to say point light. I'm going to say point light. And I'm going to say ghost right. Ghost key of ghost. And now I can use this. So here we are with the camera so we can say as camera so TypeScript is happy and then for the value because I don't care right now we can say as any and that's basically it so this is going to work as expected okay so let's copy the same thing for the point light and the ghost so I can go here I can press camera controls and then we can just press ctrl d to select everything and point light controls So let see we can say here point light and the point light is going to have a position but it also going to have a color right Because if we go here instead of Camera this is going to be PositionLight. And we also get great TypeScript completion here. Not PositionLight, PointLight. Yeah, we can save this. And now we can see here we have the controls, but we have to update point light controls on change instead of camera we can just say point light as point light and this is going to work so now let's change it to a spooky red awesome you can see it barely changes but it works and you can see we can change the position of the light and how awesome is that okay so let's add it again for our go so we can say point like controls. Copy this over. Again, control D. We can say ghost controls. Then we can say ghost. And let me just pass it ghost. We won't have a color. Our ghost is going to have a position. And the scale, I think. See if we can get auto-completion. Scale. Awesome. And now we can do the same thing. We can say ghost. ghost and now if I save this now we can maneuver our ghost and let me just stop the animation and this is how you would do it otherwise so you can go here and now we can position your spooky ghost however you want you want it like this but yeah and then you have to take these values of course and apply them in your project and there's maybe a better way to do this but yeah so far it's really awesome and now I can enable back the floating and we get the spooky ghost let's also add some post-processing and you can do that easily by using the bloom effect which is infamous in video games but we can basically do it if i go here and then we're going to say let me just do it here so i can say frelt and you can say pass and you can do it like this and now we're going to say pass and we're going to do new unreal bloom pass like this and let's make sure that this is imported so if we go at the top let me just see utils we can say import Unreal Bloom Pass from so this comes from FreeJS, examples from the ESM modules, and post-processing. But yeah, now you have this, and let me just go here. Now we have this. So basically, you can learn this from reading the documentation, but I'm not really sure on this one because we can see what it requires. It requires, let me just see. Can you get some multi-completion? Well, maybe not. New Unreal Bloom Pass, but yeah, let me just. New 3, this is what it requires. Vector 2. And I really didn't find that any value I put in makes a difference, so I just give it 1-1 because I don't know if it wants the ratio or the height, but yeah. and these are the numbers I find that were great so I can say 07 and of course it helps if we close it and then let me just save this and you're going to see oh so that's why we didn't have auto-completion because I didn't complete the import we have to go so yeah you have to go to post-processing and then you have all of these effects so we can say Unreal Bloom Pass and here I can go where we were before so yeah so when I'm going to save this we're going to see the bloom effect and how cool does this look right so we can see the ghost even blocks the light and it looks really pretty another downside of this bloom pass is that it ignores the html background for whatever reason because there's some bug with the opacity i'm not really sure what we're going to fix is by defining the background color on the scene itself this is another cool lesson how we translate 3js concepts to frelt because frelt gives you a useful hook for hooking into the scene but the downside is, or not downside, but you have to use it inside the canvas because it's going to hook into the context of the canvas. Now let me just go to Frelth and let's just find it here. So it's going to be use use use use let me just see here the hooks yeah use Frelth and this is going to hook you into the scene but yeah to do that let me just create a background component so in source routes and it's going to say background.svelte now for the background component create a script and I just going to say again import all as free from FreeJS Import all as frelt So we can say frelt core and then we going to pass it a color So we can say export let color and the type is going to be free color representation and then we can grab the scene from again not from but equal you can say frelt frelt since i'm already using this convention i'm going to stick to it yeah let me just do this and then when we're here we're just going to say hey scene background and then i'm going to set it to the new freejs color so you can do it like this and then you're going to pass the color and that's how you figure it out and how i figured this type out i basically hovered over this and this says that this is free.color representation. That's how I know the type. Okay, so we can save this. And now inside of this canvas, let's see, after the pass, sure, we can go here. Then we can start typing background and this should auto import the component for us thanks to TypeScript. So let me just see, make sure, yes, here it is. Let me just put it here and really don't need this. We goofed it up before. Yeah, so here is the background and now inside the context. so it's going to get the values from the context of our scene. And now I'm going to use a spooky Swellbrand color, orange-red. So I'm going to do this and see control space, we get the color. And let me just say orange-red, or actually this is a string, so I can just do it like this. And I can save it, and now you bypass this bug. And this is really awesome. And that's it for a spooky scene. Alright, so that's it. I hope this is just the start of your journey into 3D and encourage you to learn some game development with Godot. So you can look at Godot. It's really lightweight. It's free and open source. And you're going to learn a lot, I'm sure, and have a lot of fun. And if you're mathematically challenged like I am, I highly encourage you to watch Math for Game Dev by Freya Holmer. She's amazing. You're going to learn more in one hour than you've learned in years of schooling. And math is going to finally make sense to you. And you're going to understand what it's useful for. But yeah, that's it for me. Thank you for watching and catch you in the next one. Thank you.