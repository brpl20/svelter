 One of the coolest features of Svelte is how easy it is to use existing vanilla JavaScript libraries in it. In this video I'll show you two ways of using any JavaScript library with the latest version of Svelte. A quick and dirty way and a more usable way using something called Svelte Actions. I'll also take you through the process of using these approaches with practical examples. So let's get into the video. Alright so we have the Svelte playground here and we're gonna start implementing some vanilla JavaScript libraries into Svelte and I have two libraries that I wanted to show you in this demo. The first one is this one called typewriter.js which does this sort of cool animation effect. The second one is this slider plugin called swiper.js but we'll start with the typewriter one and I'm gonna take you through all the different steps basically of implementing this into Svelte in the correct way. So we'll start by just reading the instructions here and we'll see how they tell you how you should be using this if you're using vanilla JavaScript and then we'll try to port it that thinking to Svelte. So the first thing it's telling you that you need to import typewriter from this typewriter effect library and then you need to do new typewriter and you need to pass it the element ID and the strings you wanted to show and whether to auto start or not. Alright let's try to do this as simple as possible in Svelte. So I'll start here in the Svelte REPL. I will import the typewriter library and I will take this code here and in Svelte if you want something to happen after the component has mounted we use on mount. This is a very classic way of loading things in Svelte once the DOM has mounted. So let's import on mount and I will put the code from their vanilla JavaScript tutorial, basically new typewriter and And this is not going to do anything because there is no element with the ID of typewriter in the DOM right now. But we can fix that. So let's just create a div and give it the ID typewriter. And we'll see that it starts working. So it says hello world, it's animated. Very cool. So this is this is even before quick and dirty. Now we're going to do it quick and dirty in a svelte way. So the first thing we need to do is in order for this to be kind of more reusable, we would like to, instead of using this hard-coded reference, we would like to bind to an element instead. because if we use an element here instead then we can actually make this reusable so that we can have multiple instances of this component in our app and they won't conflict with each other because once you start naming elements then you can only have one. Many libraries, most libraries I would say, allow you, when they have this type of API which is very common where you pass in like a selector. They also typically allow you to pass in the raw DOM node as well and I think that if we were to look through these options we will probably find it, but I have a feeling that this library will allow it. So let me show you then how we would modify this to make it work. So first we need to have a state to hold our DOM elements. So I'm gonna call this typewriter element. I'm gonna make a state from that and then instead of this ID I'm gonna replace it with bind colon this. This is the secret sauce that really like if you're gonna take away something from this video it's bind colon this. This is what makes it easy to implement vanilla JavaScript libraries in Svelte. So I'm gonna bind this element to typewriter element. Now it's gonna stop working, this is fine, and I'm going to, instead of saying hashtag typewriter here, I'm gonna say typewriter element. So what's gonna happen now is that when this, we see that it works, and when this component loads, Svelte is gonna create this div, it's gonna bind it to this typewriter element state, and then in on mount we're gonna create the new typewriter library and we're gonna pass this element that we just created. So this is great because you will be able to have as many instances of this as you want with different options like this might come from props these text lines and so on So very cool So now let kind of try to think of what we have done Okay, so we have made it work in Svelte and we've made it reusable, but we haven't thought about so much about life cycles. So one of the things with all these libraries is that the Svelte is a single page application framework. So typically when you navigate around, you are not actually doing full reloads of the page. Instead, you're just replacing the content without doing a full full page reload. And that means that stuff like state and stuff like variables that you have created, they kind of stick around in the background. So the next kind of step for us to do here is to make sure that we clean stuff up if this component were ever to be unmounted. We need to make sure to save the reference to this to this typewriter we are creating. So I'm gonna I'm gonna create a new state which is gonna also be null and then I'm gonna assign this typewriter to this new variable, this new state that we created. And what I can do is I can use on destroy And onDestroy is basically a function that runs when a component is destroyed. And in onDestroy I can check if typewriter is set and then here I can run any sort of cleanup that I need to do. So like very commonly libraries will have some ways to kind of clean up, meaning like take away their event listeners, take away their background tasks and all this kind of stuff. Unfortunately, this particular library does not have it. And this is something that I always look out for. And I have been looking through this library, but there is actually no way to clean it up. But Swiper has a way and we're going to implement that in just a little bit. So if a library doesn't have a clean up method, I mean, usually it's fine to use it anyway. That just means that probably there's going to be some stuff that isn't fully cleaned up in the background. if you were to like navigate around and remove elements that have this library integration. But what you can do like the very simple kind of catch-all is to do something like this, is to basically null out this variable that we have here. And even though that's not gonna like clean up anything that this library has set up for us in the background, it is going to kind of tell the JavaScript runtime that like this variable is not really relevant anymore and you can clean it up like whenever you want. Great, so this is the quick and dirty way. Let's have a look here. So we implemented the typewriter library and we implemented it using Unmount. Great, so now let's take a look at a more reusable way of doing this using something called actions. And so actions is this thing which you call using the use colon directive and an action can basically accept it's a function it accepts a it accepts the DOM node that is bound to the action which I'm going to show you what that means in a second and then it can also optionally accept other settings which I will also show you an example of so this is kind of like a svelte example like a basic example of how an action should be structured. So let's go ahead and just use this code and make an actions version of this typewriter integration. So I'm going to create a new file called actions.svelte.js. It's very important that it has this .svelte.js ending otherwise you can't use runes, you cannot use this effect rune inside of it. Okay, so basically it's telling us to kind of setup goes here, teardown goes here. So it's kind of very similar to what we did with on mount and on destroy. So let me now move this code and make it into an action instead. So what I'm gonna do is I'm gonna do the same thing as we did before. I'm gonna import the library. I don't need on mount or on destroy anymore and I don't need this state stuff anymore. So instead we do need the the typewriter call. So this is gonna be the setup. So I'm gonna say like let typewriter equals new typewriter and then teardown is gonna be the same as we had it on destroy here. Here we go. And then I gonna move this remove this and then now what do we do Well now we Now we can import I going to call this action typewriter We can import typewriter from actions and then instead of buying this we use use colon typewriter. Yes, we need to export the function and now it doesn't work and the reason it doesn't work is because we also need to change the way, change how the node variable is called here. So here's called node, and we're going to just put it here, and there we go. So I think you see why this is so great, because we can kind of hide all of the implementation complexities away from the actual component we want to use the typewriter in. And now if you, let's say we want to use two typewriters. Now we can do that and it's super easy. Great, but how would we, for example, pass in options or other type of settings that we might need to change the appearance, for example which text to show? You can do that with this second parameter. You can call it whatever you want. I'm gonna call it option. What I I commonly do in this type of scenarios is I will basically kind of pass this through into the constructor of whatever library it is I am implementing into Svelte. So here I might set some settings like maybe I want auto start to be true by default, but maybe I don't want any string to be there by default and I want to be able to set that on a per instance basis. Now this second parameter is actually gonna go into here. So you type use typewriter equals and then here you can pass whatever you want. So this is gonna be the object that is going to be put here into options and since I'm spreading it it's gonna go into this new typewriter declaration. Let's say that I now want to change it. In this instance I want to say svelte rocks instead of hello world. Here we can see that the top one will say hello world and the second one will say Svelte rocks. So that's the second and kind of more reusable way of using external libraries with Svelte. So that's typewriter handled. Now let's go into swiper.js and let's see if we can get that working and we'll see if it's very very different or if it's kind of similar to what we just did with this typewriter library. Let's see what kind of instructions swiper has and we're gonna see that it's it's quite similar to the typewriter that we just did so it's saying like import swiper. Let's do that. import swiper and then it's saying import swiper CSS. Here we run into a little a little REPL quirk so this is not gonna happen in your actual project but the Svelte Playground or REPL, it cannot handle CSS imports. So I have instead here like a little snippet that I provided that's gonna replace this CSS import, but this is not something that you would typically need to do in your own project. We just keep that in mind. So we import the CSS because that's required because Swiper is a carousel plugin so it needs some CSS to be inserted and then it's saying const swiper equals new swiper and if you look a little bit further here it's a very similar API right you put in this like selector and then you put in any options that you need so it's with swiper there's two things that you need to create this new swiper call and we're gonna do it the same way as we did before we're gonna import amount and then gonna paste in the code here. We're gonna skip any of the settings for now and there we go. And then for Swiper there's also a little bit of a requirement of how the HTML looks. So the HTML has to have like a few of these classes which I know from experience so we're gonna paste in the kind of base HTML that they suggest. We're gonna take away some of the stuff that we're not gonna implement in this example like the pagination for example. There we go. So this one has class swiper that's the outer wrapper and then we have dot swiper here that is gonna should work just out of the box. Let's see if it works. Yes it does work so you can see here that it is I'm able to swipe between these different slides. So that's great. Now let's sveltefy this in exactly the same way as we did last time So I looking to create a swiper element and I gonna bind it here I actually in this instance I actually gonna leave this class swiper and the reason for that is that I think that the CSS might do something with the because we have some other like swiper classes down here so I'm gonna leave this class swiper but we're not gonna use it to actually initialize the swiper instead we are going to use swiper element. There we go and that still works so that's great. And then we're gonna, exactly the same way as before, we're gonna handle the cleanup. So let's create a swiper state and then we're gonna set the swiper instance to this state and then we're gonna have the onDestroy function. and swiper actually has a destroy method. Let me see here and what so what this does let's see here so what this does is it says destroy slider instance and detach all event listeners which is exactly what you want because when the component unmounts we want swiper to just disappear and clean itself up. So what we can do here is we check if swiper is set if for whatever reason it it wasn't set and then we can say swiper.destroy. So this will allow and then what we can also do is like if we can console.log here and say on destroy run and then if we open up the console so every time we would change something in the in the code here we will see that on destroy will actually run. So as we saw that was pretty much the same and you know for 95, 98, 99% of JavaScript libraries this is all gonna be the same because almost all libraries have this sort of pattern and as you can see there is so little that you need to do to actually make it work with Svelte. Let's as a final thing actionify this and make it into an action. Before we do that I just want to show you that instead of on destroy here we can clean this up a little bit. An alternative to on destroy is to return a callback from onMount. So what we can do here is we can move this code up here and this is equivalent to what we had before. So in onMount I am returning a function and then here I can do my cleanup code. Alright now let's get into the action version of this. So I set up the swiper action export and then the same way as before, so the way that the Svelte guide tells us to create an action is to wrap it in an effect and basically everything here is going to be the initialization. Here we're going to pass in options same way as we did with the typewriter one so that we can pass stuff into our action if we want to change the options on a per instance basis. When we return from the action effect that's going to run on the cleanup and we're gonna run the destroy code. Now we can basically delete all of this here and we're just gonna import the swiper action. We're gonna leave this as this is like that special thing I was talking about but normally you would just run this here and that would work just fine. And then instead of bind we are going to use swiper action. Forgot a semicolon here and there and now it works. There we go. And then if we wanted to pass any sort of options, we're already kind of prepared for it, all we need to do is just pass options here and they are going to be sent to the Swiper instance and then for the options we would have to look up the API basically what kind of options the Swiper API actually accepts, so stuff like the modules and whatever else it accepts here, direction, loop, pagination, navigation, etc. Cool, so I hope you liked that demo, this example of how to implement any JavaScript library into Svelte and please leave a like and subscribe if you liked the video and leave a comment on if you've tried this out and how you like it and if you want to see any other videos in the future. Thanks so much for watching!