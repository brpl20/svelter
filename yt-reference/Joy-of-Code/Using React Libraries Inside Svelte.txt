 Yo friends, what's up? Today I have a spooky one for you. Alright, I wanted to show you something cool today and that is how you can take a React package and use it inside Svelte. Alright, so I want to take this popular drawing app xCollegeRaw which is specifically made for React and it might sound intimidating but it's really actually simple so today we're actually going to learn a bunch of cool things and this is also a great excuse to learn how React actually works so we have to study the enemy to understand it and then we can use it inside of our Svelte app. Alright, so that means that first we're going to look at the react implementation that i have right here so i just spun up our react app using wheat nothing fancy right easy peasy lemon squeezy we can draw some shapes and etc and everything works beautifully right so we're going to take the same thing and we're going to take it to swelth all right so i hope i didn't scare you too much but before you get started here's a message from our sponsor i'd like to thank this video sponsor you the viewer you can support the channel through patreon or a youtube channel membership members get early access to videos, help shape the content, and a special Discord role. You can find all of the links in the description. Thank you for your support. Alright, so while everyone was busy arguing about the new font on the svelte side, I was busy studying the blade, reading the art of war, I am so ready for this, friends. Alright, so here we have a basic counter example in React. So basically we have this count here, this is a use state hook, and this entire thing is going to re-render once we update it. But what's really important to understand about React also is that that uses the virtual DOM under the hood, there's this common myth or misconception that people have been spreading for years that they picked the virtual DOM because it's faster than regular JavaScript, which is false. They picked it because it's fast enough. So they were like, okay, how can we do this the simplest way possible? Let's just re-render everything, right? Basically, that's how React works. All right, so let's imagine that we have to, for example, import this inside of Svelte. Well, you might be thinking, okay, first we have to transpile this to something else. And this is another thing that you have to know about React. This is called JSX, right? So it looks like HTML, but it's actually not. It transpiles to JavaScript. And if you want to make React people upset, just tell them that JSX is just another templating language. Oh, you're never going to hear the end of it. But no, you don't understand. JSX just functions under the hood when it's transpiled at the end of the day. Yeah, okay, sure, buddy. Okay, but let me tell you actually why this is so cool. Because we actually don't have to transpile anything here. Let me actually show you the output of this component, which is ironically just JavaScript, as the bros say, right? because we can actually see all of this looks the same, but this actually, the template part, JSA is actually converted to JavaScript function calls. So this button is actually react.createElement. Then we give the element that we want to create. We pass whatever props we want, like onClick. So we pass increment, and then we can pass more children. And even if you look at the API here, so we can look at createElement, we can see what it says. So the type, props, and then you can continue passing it on children. So in this example, here we pass it props, and then we can continue passing in children. It's smart enough to split this into different parts. So this is the first child, you press me, then it passes the actual value inside JSX and then another child times. And as you can see, this is just code that we can write by hand. All right, let's actually see how this works. I'm inside VS Code. Let me just open App TSX. This is where I import XCollegeRow. So I have XCollegeRow and welcome screen. So if I nest this inside XCollegeRow, I'm going to get XCollegeRow with this welcome screen at the start. All right, so as we learned, this is just JSX. So we're actually going to do this manual function calls ourselves. And that's easy peasy, lemon squeezy. All right, but how do we initialize our React app? Hold on a second. Can you smell that? I can sense our React app initialization. That's right. So for example, if we go to main TSX, we can actually find that everything happens here. Ah, okay. So what is this? Well, it's importing something named strict mode, which really isn't important for us. We actually only care about this app thing. Basically, the only thing we have to do, we have to import create root. Okay, so now what else is going to happen? Alright, so it's going to query this root element. So this is the unique root element where the React app inserts itself on the page. Alright, great. So now we solved that's already what we do. We just have HTML, right? And everything else. And then we can just say render and boom, we can render some JSX. That how easy that is And if we even go back to index this is the root element that being targeted Alright so with a bit of magic and trickery we can make this easily work inside of Svelte Alright, so I'm going to cd into the Svelte project, and then I'm going to install a couple of dependencies. So I'm going to install the core React package, then we need React DOM for creating the elements and rendering them. And this is the most hilarious part, is that React doesn't even use TypeScript, it uses Flow, because it was made by Meta, right? And then of course, when we're done with that, we can install XCollege. and this is going to take a second because we already have these packages and another thing i forgot to mention is that because i read the docs like a good boy right everyone does this i went to the installation here are the packages okay do i need something else here and i was reading more then i saw integration i got this error that i need environment variables for something and it even has this entire section if you're using wheat then just include this in your wheat config and this is basically what i've done so for example if i go back here let me just start the development server and i can show you this inside with config size well boom i just had to include this and this just means that it's going to use preact for the build which you don't care about anyhow all right so let's actually go to page.svelte and the only thing that i've done is created and imported this xcoldrack component all right let's just do something simple and render a hello world to the screen using react all right so let's create a script tag and then here we're we're going to create a root div. So let's give it a class root, and then we can actually create a binding for this. Let's name it root element. So let's say root element, and then give it a type HTML element. It's really not important. All right, so how do we get a reference to this? Well, we have to wait until the component is mounted, and we can do this using effect. All right, so I'm going to use an effect, and first thing, we have to create a root. So I'm going to say let root. Let's say create root and now we have great type completion from typescript let's just do this and now let's also do a cleanup so i'm going to return a function and on the root you have two things you have render and unmount so you can actually do this and of course you can turn this entire component into a more generic create react component or something else but in this case i'm only going to use it for xcollegraw all right so create root wants something to be passed in right so we can see it wants a container, we can just pass it root element. Alright, so now that we have the root, we can say root render, and now we can pass it our React node. Alright, so how do we create our React node? Really simply, we can just say create element, and then we're going to see it accepts a type, props, and etc, right? So what we want to create, for example, we want to create a h1, and let's say we don't want to pass any props, and then let's also say hello world. Alright, this should be it if I save everything. Let's go back here, and we can see Hello World on the page. Now we're successfully running React inside of Svelte. How beautiful is this, friends? Well, terrifying for most people, I'm sure. Alright, so going back here, you might be thinking, let's just import XCollegeR, easy peasy, lemon squeezy, but you're going to see, you're going to run into a problem because XCollegeR doesn't work server-side, and I'm using SvelteKit and server-side rendering. Of course, if you're just using light-side rendering, this isn't really a problem. For example, if I import xCollegeR right now, if I save this, and if I refresh this, we're going to get an error, right? And let's even see if there's anything in the console. Yeah, it just responded with an error. And then we can actually see it says document is not defined, because it's trying to access document which doesn't exist on the server. Alright, so to fix this, we can actually do a couple of things. Alright, so the first option is that we can ignore this and just work on the component and temporarily disable server-side rendering and then we can actually go back here and we can say something like if browser and then we can actually await this component instead here using the await block and we can then render it conditionally but i don't think it should be your responsibility to know that this component is async or not in my opinion it should just work in a server-side render context or not right so i actually don't want to think about this right let me actually just save this and how we're actually going to do this, we're going to use dynamic imports. So here is how we can do this very easily. You can actually just say const and here is going to be our module and then I going to say import and let just say xCollegeRaw Now we going to remove it from here and now we can destructure it like usual so let just do this and of course we have to await it which is actually going to cause an issue with effects because you shouldn't use a weight inside of effect but in this case it's fine because we really don't care so for example if we make this async is going to complain but whatever we can actually just come here we can say yes ignore and of course you can use dot then if you don't want to use a weight you can create a function inside you can invoke it whatever you want i'm just too lazy to be honest all right so in this example where we have xcollege raw let's like actually log it out then we're going to see now we have this react component this is basically like a blueprint or a description how react should create this element so we just need to pass this to create element and that's basically it all right so inside of here where we're creating this h1 we don't want to create a h1 we want to create xcollege raw all right so so let's just actually pass x college row that's basically it but now we're going to see if we save this and refresh it actually works but it's not taking up the entire width and height right let me actually see root yeah we can actually see it's working it's rendering it right here but we actually need to fix the styles quickly all right so how can we do this let's just go here create a style let's target root and then we're going to say height 100 svh all right so you can actually save this and now we're going to see if i even close the developer tools we're going to see x college raw works beautifully right of course sorry for the flashbang we can actually do a couple of things we can actually go back here and we can say dark mode but of course it's not going to be respected if i reload this so we can actually pass some props right and of course i know this by reading the documentation but in this case how do we pass props we create this x college element and then we can just go here and pass whatever we want and we have the beauty of tie script at the fingertips. Want to do something on change? No problem. Want to change the theme? No problem. Let's set it to dark. And let me save everything. And I'm going to reload for good measure. You're going to see it works as expected. How beautiful is this, friends? You can even actually draw a nice smiley. Okay, this is an awkward smiley, but you get what I mean. Okay, let's include the welcome screen. So if you go to their docs here under the API, there should be components. So they have a bunch of examples here. So here's how you can include the welcome screen. You just have to nested in XCollegeRaw. But of course, we're doing all of this by hand, and it's actually kind of really simple. So the only thing you have to do, let's just import welcome screen. And of course, we know the props to create element is the type or the element itself, its properties, and boom, we can just continue adding children. So we can just go here, and we can just say, actually, we can just say welcome screen. We have to create an element. And we can just say welcome screen. Cool. Let's save all of this. And now when we go back to our example, we can see it works as expected. So now we get this great welcome screen. Alright, let's do something more complicated. So for example, I want to modify the menu so you can actually see at their example how we can do that. We have menu item, item link, custom default items, you can group things and etc. Here they have a bunch of examples, but I actually just want to modify the menu slightly, and we have to do this by hand. So let's see how we can do that actually. Alright, so back in our code example here where we're creating this welcome screen to include more children, we actually just need to specify an array. So we can create an array here and now we can say create element and now we can create the menu. Import main menu and of course not from here. Just take this. I'm going to put it right here where our import is. We can do this and now we can just continue passing more things to the menu. And there's another thing that we're going to get a warning about. So let me actually just see if I open the developer tools yeah if we go to the console and let me just save everything so now we're going to see this error each child in a list should have a unique key prop and basically it just wants us to pass a key prop so we can actually just do this very easily we can actually just pass a key really doesn't matter what you type here and we can actually go also here we can actually see key main menu not menu interesting all right so now where we have this main menu we rendering this and boom we just continue doing this right So we can now also pass an array of children Okay so we can actually go here let create another element and then we can actually say main menu dot default items so you have some defaults here so let's say load scene for example let's give it a key all right so let's say load export and save as let's see export save as image alright so now let's add a separator what is the name is it separator let me just see so you can also add the socials and other things so maybe it's not default it's under something I know it is here it is main menu separator alright and then let's add more defaults so we can go back here what is that one change canvas background okay let's add this as you can see it's really not that bad alright so if I save this and we can now go back here to our example we should have no errors alright great so now we can see we have a custom menu great we have open save to export image and we can even change the canvas background how beautiful is this friends. Alright, so we actually don't want to hard code these props here because let's say for example that we want to make this more usable, we actually just want to pass the props here that we pass to the component. And this is actually really simple to do, so we can just get all of the props using dollar sign props, we can actually even type this, xCollegeDraw has a type for props, very convenient, so it's called xCollegeDraw props. There we go. So if we look at the props and actually go to the type, we actually see it has all of the props on change, we can get the imperative xcollegero api so you can even see what the type here is so when we get it we can actually type it and of course you can do the same thing for these other types if you go here to this xcollegero type we can actually see this is how i found out about this type i just opened this types file and i was like okay what are the props type test xcollegero props boom easy peasy lemon squeezy all right so now that we have these props instead of hard coding them we can just go here and let's just spread them cool and we're going to see now if we save it it's going to be nothing or it's going to be white because we actually didn't pass in anything but we can actually just go back here to our page and now with the power of typescript i can just invoke this and now i get all of this type completion at my fingertips how beautiful is this rent so we can actually just say dark now if i refresh the page you're going to see it's going to be dark and now we can also get the reference to the xcollegor api so it was something like this let me see x college raw api and it's basically a function so you get this api here and then we're going to create this in a second so we can say x college raw api equals api right so let's just create it here let's assign its state oh and of course let's just declare it let and then we can actually see imperative let's see if we can import it great x college raw imperative api that's precisely what i want all right and now you can see we even get this warning because this can be undefined right yeah as we can see it can be undefined so we can actually say type okay leave us alone and then of course we have to use an effect because otherwise this is going to be undefined and now we can do whatever we want using the imperative api from xcollidraw so for example we can say xcollidraw api on change boom and i can for example just pass it console log but you to get a bunch of things here let me just go here you get the reference to the elements you get the app state you get the files everything all right let me also use optional chaining here because this might otherwise not exist all right so now i can press actually save and now i'm going to open the developer tools you're going to see we already get a bunch of logs let me just refresh everything there we go all right so now you have this state so you have the first thing array items you have the app state and then you have files so for example let's say that i move my mouse and it's always working in the background, right? So you're going to see it's always going to update. You can update your state in Svelte, whatever you want to do. This is how you can make React work in Svelte. But yeah, that's basically it. If you like what you're seeing, don't forget to like and subscribe and I'll catch you in the next one. Peace!