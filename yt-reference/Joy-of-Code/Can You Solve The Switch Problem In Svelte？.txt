 Hey friends, today I have a brain teaser for you. And if you're really not interested in puzzle, you're going to learn a lot regardless. So here I have this switch component. So as you know, in a framework like Svelte, you have all your logic styles and HTML in one file. So they shouldn't share state, right? When I'm going to toggle, this one is going to turn on. When I'm going to toggle, this one is going to turn on. And we can see there is nothing special here. It just toggles this active Boolean. But here's my challenge to you. say that this is a video player or audio player and you only want one active at a time. So for example, if I toggle this one on, all of the others should turn off and same is true if I toggle this on, then all of the others should have a shared state, right? So how do you do this? And one condition I have is you really can't change this file right here. So you can't put a loop inside of here and track the active ID. You can only change this one here. So I'm curious if you can figure it out. If you want, pause the video. Otherwise, I'm going to share the solution with you. Alright, so we can solve this problem by using the context module from Svelte. And this isn't to be confused with the context API. For Svelte, this is different. This is the script context module. But first, we need to understand how components work in Svelte, right? Basically, a component in Svelte at the end of the day is a class. So let's see what is that behavior. I'm just going to create a new file. I'm going to name it component.ts. You don't have to do this. So, for example, let's pretend that this is a swell component. So export class component, and then we're going to give it a constructor, and we can say console log hello. So every instance that you make of your component is going to log this hello message, right? So if you go here you can say const component1 new component and let just copy it over a couple of times And basically this is a Svelte component right And now if you were to log in, you would get hello four times, right? But what is actually a module? A module is this file, right? So basically this is all that context module is in Svelte. It's going to be console log. If we type it here, we can just say hi. And now I'm going to open the terminal. I'm going to create a new one. So I'm in this folder. I'm just going to use Dino to run this. So I'm going to say Dino run component TS. And now we should see hello output four times, right? But hi, just once. And awesome, that works as expected. So let's see how this works in Svelte, right? And now I'm going to close the terminal. Let me just close this file because I don't need it anymore. So how can we use this in Svelte? Well, we can go to the top where we can start typing script context module. and we can even add language typescript, which is optional. You don't have to do this. All right, but how is this helpful, right? Well, basically what I want to do, I want to track the ID of the component, and then based on what the active component is, I'm going to toggle this switch on or off. So that's really simple. You might be thinking we're going to declare an active ID and ID variable, but we're going to see in a second why that doesn't work. And Svelte is even going to give us a warning. So let's do this. We can say let active id, we can set it to zero, and then we're going to have an id that we can increment, right? And now we can even remove this code. I just remove this. And now I can say const component id. So each time we instantiate this component, we can increment the id, right? And then we can use a reactive variable. We can say active instead of using the constant right So we can say hey if active ID equals the component ID and this is all great and you going to see we already have a warning and then we can also make a simple function, setActive. And now inside of here, we can say, hey, active ID should be equal to the component ID. And this is what you're going to replace the toggle with, setActive. All right, so let's save this, and this is the naive solution, right? So I'd be thinking, okay, nothing is working, what is going on? And why is that? Let's just hover over it. Active ID is declared in a module script and will not be reactive. Ah, so this isn't reactive. But how do we make it reactive? Well, you can use a Svelte Store, of course. So let's use a Svelte Store. I'm going to go to the top. I'm going to say import writable from Svelte Store. And now instead of using 0 here, we can say writable. And you can initialize this with 0, but you don't have to. I'm just going to do it like this. and you can even use const here if you want. It's really not important. And now you need to use the store. So you're not confused. This is really a reactive declaration. So this isn't a store. This is what people get confused frequently. And I don't blame them because this can be confused. This is just a reactive declaration. This is a computed value. It says, okay, anything on the right that changes, update this value, right? But to use a store is just a dollar sign. And this is basically syntactic sugar. So it subscribes and unsubscribes to the store for you, which is really convenient. So we can say active ID as a store, right? And then we also need to update it here because we're using a store. And now let me save this file and this should work. So let's toggle this one. Ah, you can see now it has a shared state. And how awesome is that? All right, but I also want to show you how this is useful in other ways. But before I do that, I want to show you once again how context module works. So again here we have this component we instantiated four times right So it going to output this component with the title of component four times right and we going to see because we using context module which is basically shared state we can see it outputs high but let see how the compiled swell code looks like which is just javascript at the end of the day and this really isn't anything intimidating here are a couple things we aren't concerned about as you can see as i showed you here is the class that gets generated at the end of the day and you can find here in the module our message that says hi so basically this entire file this component output is a module but let's see how this is useful right so if you want to learn more about module context go to the swell tutorial i'm going to link it in the description and you can see how this is used here so i can start playing this right at the same time but now for example if you want to stop all audio it's not going to work so we can go here we can say show me so as you can see here is the context module. So it pushes all of these audio elements into this set, you can use an array, doesn't matter. And then it exports a function, stop all, then it's going to loop over all of the elements and is going to pause them. So again, if I start the playback here, and then I can stop all the audio. So this may be more esoteric, but it's really interesting and it's really something useful to have in your pocket. As you can see, now you can also use that export anywhere else.