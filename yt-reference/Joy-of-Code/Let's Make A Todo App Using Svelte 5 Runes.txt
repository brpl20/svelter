 Hey friends, what's up? I thought it would be really fun to look at the unreleased Svelte 5 runes to make this simple to-do app. If you're not familiar with runes, you can watch one of my other videos which goes in depth explaining runes, but in this case we're just going to make this simple but awesome to-do app, so as always you can like, subscribe, and you can become a member on Patreon. And now when you've done all of these things, we can filter them by the active one, by the completed, and yeah, we also have local storage so we're going to see how that works. works in Svelte 5 so it's going to persist if I refresh the page and how beautiful is this friends. If you want to play around with this example or follow along I'm going to include a link to the Svelte Lab repl in the description so you can try it out yourself so you can go to this template in Svelte Lab which would create this integrated development environment in your browser so you don't have to set up a local development environment which is really awesome so you can play around with that but yeah let's get started. Alright friends so I'm starting from scratch the only thing you have to do is install the latest version of Svelte so you can do that by going to a terminal and then you can say npm i Svelte at next so this is going to install the latest version of Svelte but yeah I can just show you if I go to package.json you can see here at Svelte you have the latest version of Svelte so let's close that and then let's just open page Svelte and let's just make a h1 tag so you can start our development server again if we go here say npm run dev and it should start the development server. As you can see there's already a bunch of warnings so some things don't work yet with Svelte 5 so don't be surprised because right it's in development. So if we can go here we can see it outputs high. Alright friends so let's get started. I'm going to remove this and I'm going to use this snippet to create a script tag. So you might be used to defining to do this like this but in Svelte 5 we have runes or signals so we can say $ which is available to you. You don't have to import this from anywhere and then you can just say state and pass it the empty array. And this is a lot clearer to other people reading your code because now they don't have to second guess if this is a regular JavaScript variable or a reactive statement, right? And now we can also create some dummy data. So I'm going to have text. This is going to be to do one. And then I'm going to have done, which is going to be false. So let's just copy this one more time. So we have some dummy data for starters. All right, so now we can create these to do's. And let just loop over our to do to do and then let create a to do so now first I going to create an input which is going to be of type of text so this is going to be our to and I'm going to remove this I'm going to set the value to be to-do text so let's copy this over so this is going to be a checkbox this is going to be to-do done of course you can destructure this from here so you can say text done but I actually prefer things to be explicit. So I'm going to leave it like this. And then we can also use the index. And if you want, you can pass the key, but I'm not going to in this case. Alright, so let's save this and let's see what we have here. Alright, so things already look great and this is because I'm already using open props. So if you want to set this up, you can look at the layout, right? But you don't need styles. But speaking of styles, let's add some styles right here. So I can go to style, create this style tag. Now I can say to do's. So CSS grid is absolutely beautiful. We can just say display grid and then we can say gap 1rem so let's just say margin block start so we can use this logical property we can say 1rem and now all the things are going to start looking better so now for our singular to do we can say position relative because I want this checkbox to be position relative my bad I want this to be absolute so this is going to be relative I just want to put this inside of here so it looks nicer so I'm going to say relative and that's basically it Let's also style the inputs. So I can say input. Type text. And I can give it a max width. And some padding. So let's create input. Type checkbox so you can add these styles. I'm going to say position absolute. So right I'm going to say 4%. this and let's see what's going on so you can see it already looks okay but now let's use this trick to center it this is what i often reach to even today so we can probably say top 50 but that's really a problem because it's really not it's 50 plus this element right that's why it isn't centered so we can use this alt trick which is even handy today so we just have to translate the y 50 so if if we translate its Y, it's going to translate 50% of this element, right? So if we subtract that it going to be centered Let me just really show you how this works We can even use the shortcut property So we can say translate So you don have to use transform anymore And then this is going to be the X and this is going to be the Y. So we're going to leave the X alone. And for the Y, we're going to say, hey, do minus 50%. Okay, so now that we saved it, ah, how beautiful is this? Now you can see it's centered. And let me just see here. Okay, so instead of value for checkbox, this has to be checked. yeah so this can be checked do done alright so that's basically it alright so let's work on adding a to do so how can we do that well we can do form etc and here and then we can use input but I'm actually not going to focus on this part let's just ignore the server all the other things let's just use client side javascript to make this to do app today right so I'm just going to do the simplest thing possible I'm going to say input which is going to be again of type text and then it's going to have a placeholder which is going to be add to do so if I save this we can see add to do and now we're just going to use on key down so you don't have to longer use this syntax in Svelte on key down even if you can right it still works but you're going to use just on key down so now event listeners in Svelte 5 are just regular attributes but of course the downside of this for example if you have on submit then your modifiers won't work like prevent default so of course you can still use things like this if you have a form or etc but it's going to use here on key down that's going to be it and i'm going to create a function add to do so let's go up here and then we're going to create a function add to do which is going to accept an event and type script is of course optional you don't have to use type script but this is going to be of type keyboard event so now i just want to ignore everything that's not the enter key so you can actually log this out you can say event key since you have no great type completion so if i go here and open the developer tools i can start typing whatever and now we can press enter so we can see what key has been pressed escape and etc so we can check this right now so we can say if event key isn't enter then we're just going to return so now if i save this and you're going to see nothing is going to happen unless I press enter. Alright, so we just need to create the element, or I can say to do element is event target, so TypeScript is going to a plan because it has no idea what this is So you can say as HTML input element So now when you hover over this you going to get great auto And then if you want an ID and if you're doing like a fun project like this, the easiest way to create an ID is going to be by saying window. So you can use the crypto from window. And then you can say random UUID. So this beats creating a date or whatever else you want. But in this case, I don't think we're even going to use an ID. So I'm not going to use this, but just a useful thing to know. and then we need to create this text so we can say to do element value and now we can say phones none false by default all right so now let's update our to do so how can we do that well we still use reassignment in svelte 5 so we can create this array again we can spread our to do's like butter and then we can just pass the new to do so this can be text done all right cool So let's save this and see if we add a to-do. So you can see it works right now. But how do we clear this, right? And basically, we can just go here and we can say to-do element value and we can set it to be blank. All right, so now if we go here, we can type test, it's going to be added and this is going to be cleared. All right, so that's how simple it is to add a to-do. All right, so next I want to add the ability to edit a to-do. So we can go to our code here and then we can just add an event listener. so we can listen here on input and then we can edit the to-do. And you can see in this case if we want to edit the to-do if we want to pass in something to this function we would have to do something like this and then let's think what do we need for editing the to-do? We need to know what to do we want to edit so we can probably pass it something like index and then we need to pass it the new value, right? So how do we do this? Well we can pass in the event and then we can say here event target value. And this is going to be really similar for checking the to do, but there is something that doesn't sit right with me doing this approach, right? So what I prefer to do, I'm just going to say edit to do, and then I want to get all of my data from the event itself. So how do we do that? Well, we can use data attributes. And now here I can just say data, give it any name I want, ID, I'm going to name it index, and I'm just going to pass it here. and this is going to be maybe two lines of code extra but something in me likes this a lot more but of course you can do you. So now we can go here and we can create a new function we can create function added to do and in this

 case again we're going to pass an event and this is just going to be typed as event. All right so now again we're going to say input element so event target and we're going to say as html input element to a piece TypeScript and get great autocompletion. All right so just like I said a minute ago I just love to pluck things from the event so we can say const index so how do we get the index well it's really simple we can just say input element so that's going to be the element itself and then to get the data attribute we can say data set and then we can just get the index and now if i console log this out we're going to see that this is the case so now if you go here and we can see the index is zero and here that the index is one all right cool so how do we update our to do's and again it's the same we use reassignment so we have the index now so we can say to do's at index so what to do do we want to update right then we can say text and how do we get the value well again we just refer to the element input element dot value awesome and we get here complaining from TypeScript because this is a string write and it expects a number for the index so we can just turn this into a number by saying plus but now TypeScript is complaining just saying oh this doesn't exist what are we doing this might not exist right and you can just say, listen Tyescript, shut up. And you can just use the bang. You're like, okay, listen, I know better than you, okay? So now we can save this and now we can go here and we can update our to-dos. Say banana or whatever else you want. So now we can update our to-dos successfully. And let me just actually show you that this is true. So we haven't talked about effects yet because I'm saving this for later, but let me just really show you. You might be used to something like doing this console log. to do is write and this would output each time to do is update but really don't have this label syntax anymore in 12.5 so we can use an effect and effect is going to rerun everything inside which is a signal so it knows that to do is updated and is going to rerun this function so we can say to do's and let me just save this so now when i add test is going to log out again right we have these beautiful to do's here so when i go and update this it should also log right how beautiful is this right and that basically it for editing the to do alright so let work on toggling the to do as completed and you going to see it almost the same So here we can go to this code and this really isn anything related to Svelte 5 right This is just maybe how we would have done it also in Svelte 4. So now instead of on input, we have to check for on change. This is a check event, right? And then we can just say toggle to do. And again, I don't want to do this where I pass things in. So we're going to do the same thing. We're going to say data index i. And this is not on change, but on change. And that's it. So now all of this is the same. And you're going to see even this function is very similar. So here we have edit to do. I'm going to say function for we're going to do, we're going to pass an event. This is going to be the same, so I'm going to copy over this line. And this line because again it's the same we just want the index so we know what to do to toggle and then we can use reassignment again so we can say to do's at index done so we're going to flip it so we're going to say opposite of the same thing to do's index done and that's going to be it so let me just clear everything right so let me just test this and it should log out because we changed it right so we can see the first one is true and the second to do is false and that's how simple that was all right friends so let's work on filtering the to do so how can we do that well basically we need some new piece of state so here we have to do's but it would be great if we had some method to update a filter and then based on that we can filter the to do's and we can do this using enumerated state and what do i mean by that well basically we can just create let filter so we can create a rune out of that and now we can pass here a couple of things we can pass in all completed or active right And if you're curious, you can watch my other video on using enumerated state instead of booleans, which is really awesome. So if you want to check that out, go ahead. But I'm going to also change another thing. I'm going to remove this and then let's just create some types. And if you're not using TypeScript, this is purely optional. So let's first create to do here. And then we can say text string and done is going to be boolean. And I'm also going to create a type for the filters. so we're going to say filters and let's just make a union here and we're going to say all active and the last one is completed so how can we use types for a rune so we can just use a generic here and then we can say to do but it an array of to do right So we can say hey this is an array And we can just say here filters And that's basically it. So now we have great auto-completion. All right, so let's create the filters in our markup. So we can go here below our to do's. So now I'm just going to say filters. And then first I'm going to create a button. So the first one is going to be all. and now I'm going to use on click so we can do this, we can pass a callback and we can say filter and then we can reassign it but let's actually create a function because it just looks nicer, you don't have to but in my opinion it's nicer and it's really one line of code anyhow so we can say set filter and then we can accept the new filter we're going to be of type filters and we can just say filter equals new filter that's basically it so the same thing you would do in one line we can say set filter we have great auto completion so now we can say all and let's just copy this over two times now we can say active and complete it that's it and also if you want to be a hotshot you can do something like this you can say each and now you can say all active you know my typing so you can say something like this as filter and then you can just use one button here and then you can set filter to the current filter and you can do this but that's really up to you so now this is a lot shorter but yeah all right cool so now if you look at here we have our filters so now let's also log the filters out if we go here to our effect and now we can say console log filter So let's see. So as you can see, all is the default. We can say active, completed, and we can go back to all. All right, but how do we filter the todos, right? Well, we can use derived states. So we can use the existing todos, and we can get another state from them. So that's basically what derived state means. So how do you do that? Well, there is a derived rune state. So previously, your derived state would be using like a colon, right? but now you actually have a rune that's named derived. So we can go here we can say let filter todos and now we can say derived and we can actually just pass a function here so the Svelte compiler is going to see that we are using the signal todos inside and it going to rerun this each time todos updates, right? But instead of doing this, I just want to create a nicer function, so I can say filter todos, and I'm just going to invoke it, and that's going to work perfectly. And if you want to be pedantic, you can pass todos here. I usually like to be explicit in these scenarios but in this case everything is in one file and it's related to to-do so whatever you don't have to really pass anything and I really want to show you that Svelte compiler can track these dependencies regardless so we can go here below set filter and we can just create a function filter to-dos you don't have to pass anything if you don't want and I just want to stress how more powerful this is in Svelte 5 because this works as expected, right? In Svelte 4, you would have to do something more unusual here so the Svelte compiler can see this dependency. But right now, this is really not a problem. We're just saying, okay, to-dos is inside of this. Svelte is going to see it and it's going to rerun this. No problem without weird side effects and etc. So let me just really show you how beautiful is this. So we can go to filter to-dos here and now you can do whatever you want. And in my case, I'm just going to use a switch statement. And we're going to switch on the filter when we change it. So we're going to have a case for all. And let me just remove all of this. We're going to have a case for all. We're going to have an active case. And we're going to have a completed case. Alright, so now if it's all, we can just return the deduce. Nothing special, right? And when we want to pass deduce here and do something else, right? This is really a perfect use case, right? But whatever. And then we can go here. We don't have to use break because we're returning. So we can just for the active say to do's filter we get the to do and we're going to say hey if it's not done and we can copy over the same thing for completed and we can just say the opposite if it's done then it's completed and how awesome is this you didn't even have to think about it just because to do's is a rune or a signal this is just going to rerun and work as expected right so now instead of saying to do's in our template let me just see we can just say filter to do's if I save everything and let's just refresh for good measure so I can just say 1, 2, 3, 4 and let's just complete some of this so this is going to

 to update our to-dos, and then let's see the active to-dos. How beautiful is this, friend? So it's 1 and 4, and then we can see the completed, and everything works as expected. So let's just add some more extra styles here. So below to-do, we're going to use a completed class. I'm going to say opacity, 0.4, and here I'm going to say transition. This is going to be on the two element transition, so we want to transition opacity 0.3 seconds and ease is the default so I'm not going to touch that and let's also give styles for filters so we can say filters and we can say margin block 1 ramp alright so if I save this now we should see we have some spacing here so everything looks beautiful and let's see if we uncheck and we should add this tile here or class my bad so we can use Svelte's class directive so here where we have this to do we can say class completed it depends on what if the to do is done now we can add this and let's see if we mark this as completed so now you should see how beautiful is this friends alright friends so the last thing I want to add is to be able to see how many remaining to-dos there are. So we can do this really simply by adding the last function here. We can say function remaining. You can name it whatever you want. And then we can just return to We going to filter them by the to that aren done So we can see if the to is not done and then we just want the length nothing else So this is going to rerun again each time to-dos updates and now we can just invoke it here in our markup. So we can go here and I'm going to create a p-tag and I'm just going to say remaining invoke the function remaining. Alright. So now let's see if this works so we can add one to-do we can see it updating alright cool so now if we mark this as completed three remaining two remaining so this works as expected and we can see all of our previous code also works alright friends so the last thing I want to add is to persist this to do to local storage so we can see how effect works how it replaces the previous way how we done things so of course as always you can go here to application and then you can look at local storage here but I'm just going to chill out in this console tab and I can just say window local storage so we can peep into this right here so you can see what's going on or you can just say local storage you don't have to use window right and that's basically it so now let's add this and this is really simple so if we go to the top here I'm just going to remove this effect and of course I'm going to type it out just for practice right and the first thing we want to do we want to check if the to-dos are in the local storage or if we have save to do's and then we want to load them instead. So really nothing special here. We can say const save to do's and we can check local storage, get item and then we can check for to do's. So right now there shouldn be any right So if we log save to do this should log out null That it Alright in the case if they do exist so save to do's, you can say if save to do's, and then you can say the to do's are equal JSON parse. We need to parse them because they're a string. So we're going to turn them back into an object. And then we're going to say save to do's. Or you can make this shorter save to do's and save to do's equals json parse save to do's. But this isn't valid JavaScript, right? So we need to surround this with the round boys and this is going to be valid. So now we can remove this and this is it. So this effect is going to run once when the component mounts. So this replaces on mount. and now let me just show you something so we can set or update the local storage each time we update to do's so again this is an effect so it tracks this rune it says okay it can see to do's inside of this and it can update it so we just have to say local storage set item we need to give it the keys and now we need to turn the to do's into a string because we really can store an array in local storage. So you can say JSON stringify and we can pass it to do so now Svelte sees to do and it's going to rerun this. But this is really going to be a problem because we can just rerun this and we're going to see we should even get an error I think let's just see. Okay. Maximum update def exceeded. So basically you ran this into an infinite loop because it updated then it is this part then it updated right But instead of doing this let just move this one line and we can have multiple effects right So we can leave this effect alone We're just saying, okay, run this when the component mounts just once. I don't care about this anymore. There isn't any dependencies in here, right? It's just save todos, which is a variable we created. But we can create another effect. We can say effect. We can pass a callback. And now this is great. So now we can just do this and everything should work as expected. So if I refresh, and let me just look at local storage what we have here. So you can see here we have an empty array and if you want to clear local storage if you're testing this out instead of going through struggles in the app tab or whatever you can just go here just say clear, boom, bam, easy like this. So we can say 1, 2, 3, 4. So now let's see if this persists. So if we, okay. So we refresh the page and we can see our to-dos work as expected. But let's see if this also works. So now this should work. and let's just check local storage what we have here so now we can see this is a string right so this is why you have to stringify it so you can see it looks like it updated right so let's refresh everything ah how beautiful is this friends and you can see this really isn't that much different than Svelte 4 but it works a lot more predictably and your code is much easier to reason about but basically that's it if you like this video don't forget to like and subscribe and you can also support me by becoming a patron Thank you for watching and catch you in the next one. Peace.