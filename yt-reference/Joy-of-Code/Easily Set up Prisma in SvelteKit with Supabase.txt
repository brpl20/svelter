 How's it going, everybody? Welcome back, and let's set up Prisma inside of a SvelteKit application. And we're going to take this step-by-step so we can reliably get this working. So the first thing I'm going to do is I'm going to lean into Svelte's CLI tool, SV, and I'm going to run npxsv create, and I'm just going to call this Prisma app because this is really a demo app at the end of the day. Now, I'm going to get all of these options here. So yes, I want the minimal project here. Let's go ahead and use TypeScript. And I'm just going to kind of click through these because at the end of the day, that's not what we're here for. Okay, so it looks like we are all set. Let me just kind of open this up. Yep, the file structure looks great. So I'm going to go ahead and CD into that. If we don't CD into our application, essentially we're going to be installing things in the wrong places. So now that we've done that, we should be good to go. And so next thing I'm going to do is I'm going to install Prisma. Let's go with MPMI, and I'm going to make it DevDependency, and we're going to go ahead and just say Prisma. Okay, great. So now that we're here, let's go ahead and initialize Prisma, and that's really easy to do. That's going to be MPX Prisma init. There we go. Okay, now that we have already initialized Prisma, we have some new files to play with. So the first one we're going to take a quick look at is the schema.prisma file. So let's take a look here. We always get these notes. I've read that many times, so I'm just going to go ahead and delete that. And we're also going to be overriding these default boilerplate code here. So we'll get to that in a second. But we also get a Prisma.config.ts file. And we're going to be doing quite a few things here to get this working. So right off the bat, I'm just going to go ahead and make that change here before we create any tables. Here we are. Let me go ahead and format this a little bit. Okay, perfect. So we should be all set. And so we're actually going to use a direct URL as well. And you're going to see that in a little bit. And the big reason for us to do that is because, you know, for Prisma to properly run migration files, we're going to need direct access to the database. So if I kind of pop on over to my Supabase database, which is something that I love to use. You could use this with any Postgres database. And Prisma supports other databases, so you do have some flexibility here. You're going to see that I don't have any tables whatsoever. So we're completely starting new. Now, just a little piece of advice here. When you create your database for the first time, you're going to have the opportunity to put in a password for the database or generate a password. I always generate a password because it's going to be more sophisticated than anything I come up with. But make sure you save that because you're going to need that in a second. So in Supabase, I can actually just click connect. And I can click ORMs because at the end of the day, we're using the Prisma ORM. and I can just kind of copy this over here. And as you see I going to need to put in that password So that kind of what I was talking about a little earlier So since I copied this right here let hop on back over I'm going to, let's go ahead. I'll just move this file in a second. Create a .env file. I'm just going to put this in the root of my project here. I'm going to paste this in. So now what I'm going to do is I'm going to plug in my own particular password. Okay, so now that I've done that, we want to start testing to see if we can start talking to the database. And the easiest way to do this is just to create a table. And let me go ahead and just format this a little better. Okay, much better here. So I'm going to say model. So now we're creating a new table here. I'm just going to call this user, and I'm just going to put some random stuff in here for an example. So the first thing I'm going to do is I'm going to have an ID. Now that is going to be a string. And I'm just going to have this as ID. And then we'll say default. And let's go ahead and pass in UUID just like this. Okay, so now that we have this, let's also go ahead and give it an email. Now, it can be a little bit difficult to format all of this, and I'm sure there's a better way of doing it. I just haven't come across it. And if I do, I'll probably make a video on that. And so let's just go ahead and give this unique. And last thing here I'm going to do, just to kind of throw in a quick example, is I'm going to have the name optional. And, you know, whenever we're working with a Prisma schema, if we want to make a particular column optional, we'll just go ahead and add a question mark there. So let me go ahead and just keep formatting this. Okay, here we are. And, yeah, I think we're actually all set. So we're kind of doing this to test whether our environment variables, you know, are being piped through properly so that we can contact the database. and whenever I run npx prisma db push what that's going to do is that's going to push the schema and it's going to update our database in this case it's our supabase database now this is not something you really want to be doing if you have sensitive data because if you make any particular schema changes it's actually you know there is a chance that some data is going to be deleted or squashed and so you will get a warning if that's the case. So whenever you run, you know, MPX Prisma DB push, just, you know, make sure that this is kind of like early days, if you know what I mean. You don't mind if you, you know, clobber anything in your database because you're kind of just getting everything set up. If you do have important information, definitely make some migration files and do it that way. And this is just a setup video. So, you know, we're not going to be covering that here. We're just going to kind of get the bare bones and get everything working. So let me go ahead and run this, and I completely expect for us to have some issues here. So we have this error, missing required environment variables. So I know that Prisma is not properly accessing those environment variables. So what I'm going to do is I'm going to head on over to Prisma config, and I'm going to add some code here. Now the first thing I going to do is we going to do npm i and we going to say dot env So let go ahead and install that Okay great And so right underneath here I just going to add some information Let me go ahead and save this. Now I am getting some type errors. So I'm going to do exactly what it says here in the suggestion. And I'm just going to go ahead and get all the node types. Okay, so there we are. And great, all of our type issues went away. Now, if you take a look at the Prisma schema file here, you're going to see that we're using two environment variables. But our config at the moment only has one, which is definitely going to be an issue. So I'm going to go ahead and grab this just like that. I'm going to save this and let's go ahead and try this one more time. So everything's saved. I'm going to go ahead and push. And so this is a good sign. And here we are. Okay, fantastic. So it says your database is now in sync with your Prisma schema. So let's take a quick trip over to Supabase. And sure enough, I have a user table, which is great. And I have ID, email, and name, which is fantastic. So you see that we already are connecting with our database. So things are looking really good here. And there's kind of just one thing that I want to just mention before going forward. If you're not really comfortable with your table being named user and just kind of adopting the model name, What you can do is you can do a double at symbol and we're going to say map and then I'm going to say users. OK, so this is a way to, you know, essentially name your table however you want. So I'm just going to go ahead and push this again. You know, while we're running this command, just know that this is, you know, a dangerous command at the end of the day. But when you're getting set up and you don't really have any data that's sensitive or important, go right ahead and do so. Okay, so let's take a quick trip over here. And as you see, our table is now users. So we are in much better shape. So the next thing we want to do now is we want to create the Prisma client so that we can use Prisma. Now, we don't want to be using the client on the client side because that's going to be a vulnerability and we don't want to do that. And luckily, SvelteKit is smart enough to start barking at us. So we're only going to be using this on the server. So I'm going to go into our source folder. I'm going to be in lib. And I'm just going to put this in a DB folder. And you can just really name this whatever you want. It doesn't matter. And I like naming this Prisma.ts. Okay, perfect. hot module reloading and you're saving files. You don't want to be constantly instantiating Prisma over and over because then that multiple database connections and it can get completely crazy and you eventually get some errors after you know enough instantiations have taken place So, you know, I am getting some type errors and this is fine, right? This is not necessarily runtime errors. And so what I'm going to do here is I am going to pop open our declaration file and we are going to fix this. So I am now in app.d.ts. So this is just a nice and easy declaration file. And we're just going to give this a type here. So let me save this. And as you see, all of our issues have gone away. So we're in a much better place and we're keeping our types in line. So at this point, I think we're ready to start using the Prisma client and get some data back from the database. And now our database is empty at the moment, so we're not really going to get anything, but we'll get an empty array right off the bat. So I'm going to head on over to routes, and let's just use the homepage as an example. So let me just go ahead, spin up our server, and I'm going to create a pluspage.server.ts file, and I'm just going to kind of paste in this code here. And so really the only thing we're doing here is we're importing Prisma. This is a server file, as you see up here. And all we're going to do is we're going to grab all the users, we're going to console.logit, and then we're going to return users. So let's go ahead and do that. So we should be all set here. And if I just go over and let me see where â€“ okay, we're running on 5175. So let's go ahead and spin that up. Okay, great. So we are seeing the homepage. We're not getting any errors here. And if we take a look, we are getting an empty array down here. So we're actually kind of connecting to the DB, but I want to do a little bit more of a verbose check here. What I'm going to do is I'm actually going to just do this the rough way, and I'm just going to insert a row just to test, and I'm just going to give it some ridiculous values. I'll say hunter at example.com, and we'll just say hunter. Let's just go ahead and save that. Okay, so we do have one row in this table. I'm going to go ahead and refresh this page just to get that running again. and sure enough, I do get all that information that's coming from the database. So you're seeing that the Prisma client is working. We're pulling that data. And now at this point, I would really like to see this information on the screen here. And this is kind of getting outside of the scope of this video, but we're just going to go ahead and make it happen. So what I'm doing now is I am using the data prop. And then I'm just going to go ahead and render out these values here. So if we kind of hop back over here, you're seeing that DB data coming through and we're kind of leaning into that load function and we're just displaying it by using that data prop and showing it on the screen here. And so we have completely set up Prisma inside of our application. There's a lot more to talk about migrations, transactions, a lot of really cool stuff that Prisma offers right out of the box. So I hope you found this video helpful. If you did, go ahead and give us a thumbs up, and I'll see you in the next one.