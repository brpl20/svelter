 Hey friends! We're going to talk about the new version of Svelte just got released, which is Svelte 4. So I hope you have your coffee ready and let's go! Ah, beautiful. So Svelte 4 just got released and it's sporting a new site which looks absolutely beautiful. It has a new documentation which is not a single page application anymore, now we even have a search and this is really awesome. The Svelte Rebble also got updated to CodeMirror 6. And then of course, the best part in my opinion is the Svelte tutorial. And if you didn't know, this uses WebContainer, which is a new technology that lets you run Node in the browser. So not only can you learn Svelte, so you have here basic Svelte, advanced Svelte, you can learn SvelteKit in the browser. So you can go from basic SvelteKit to advanced SvelteKit. And of course, all of these links are going to be in the description. Alright, so let's look at the announcement. So here is the announcement for Svelte 4. So as they say here, time flies. Svelte 3 was released more than 4 years ago. Wow. its eons in JavaScript framework time. But honestly, Svelte is so great they didn't even have to improve a lot of things, but things are changing now. And basically, Svelte 4 is just a stepping stone towards Svelte 5. So as they say, Svelte 4 is mainly a maintenance release. The goal was to modernize the codebase so it's easier to go from Svelte 4 to Svelte 5, but that doesn't mean there's no features because there's a lot of cool features I want to talk about and some changes, including the goofy TypeScript drama when Svelte changed from TypeScript to JS doc. So we're going to also talk about that. And let's go through this post, so let me just see what's new. So performance, they reduce the bundle size since they don't have to support a lot of legacy things. You can see Svelte 4 reduces the Svelte package size by nearly 75%. So the Svelte package size went from 10MB to almost 3MB. And this is really awesome for install times, the REPL, how fast you need to boot up, and etc. As you can see here for the site where they use Svelte, they say they reduce the size by 12%. So another awesome thing is that locale is now the default for transitions. So if you ever use page transitions, then you probably encountered some weird behavior with your animations, because animations are going to play when the parent gets destroyed or removed. So basically you had to use local, which is default now, as I think it should be, and it's going to eliminate a lot of problems, and that's really awesome. Then there's news for you web components lovers. I unfortunately don't use web components, so I really don't know how great this is, but apparently a lot of people are excited about this. So for users of Webcom components, the largest change is an overhaul of the way you sell to author custom elements. So they change how they generated, which eliminates the whole class of bugs and inconsistencies. And if you're excited about Webcom components, then this news is going to be awesome for you. This is one of my favorite changes. They made several improvements to the IDE offering experience So I not sure about you but how many times have you tried to use the auto import in VS Code and it would import some random junk from I don know some internals or etc Or there this annoying thing with TypeScript you just want to go to the code definition, maybe you want to learn how something works, but when you press Alt or whatever your key is, it leads you to the type definition and you're like, okay, this sucks. Well, this experience has been greatly improved thanks to this package that Rich Harris made, so he made this DTS body package. And basically, it fixes type declarations and all these sort of things like imports. As he says, this provides us with a better type declarations and a smaller package. So let's actually see this in action. So you can see here on mount, you will do something like this and it will give you always this goofy import. Exactly. Oh man, I love rich. Okay, so this is the problem that I'm talking about. So you want to just check the function, what it does. You're like, okay, where am I? Especially if you don't understand TypeScript or use that much. You're like, okay, what is even this DTS file? You can see here the import is goofy. When you want to import this fade, then you're like, your tooling basically fails you, right? And also this funny thing where it includes the extension and the end like JS or TS. So basically that has been resolved. And now let's look at the updated version. So now as you can see, let's try this again. On mount, beautiful. It does exactly what you expect it to. good job vs code of course this isn't specific to vs code the svelte language server can be used in any editor so everyone benefits this even if you're using vs code or vim as you can see how awesome is this you can actually go into the internals and learn how this works as i said some people think that's well being a compiler is this intimidating thing but as you can see here is how simple animations implemented in svelte look like and then you can learn about things like this and this is really awesome in my opinion but let's also talk about the goofy TypeScript drama. So many people made a deal out of it for nothing. So instead of me telling you why they made that transition from TypeScript to JS, Doc, let Rich tell you. So basically my position is types are fantastic, TypeScript is a bit of a pain. And what I mean by that is types are great because you get type checking, obviously, preventing it from shipping buggy code. You get IntelliSense, you get autocomplete. And if you hover over something in your IDE, it will show you inline documentation. You know, there's all these really very convincing benefits of using types in your code base. But as soon as you use TypeScript, by which I mean a .ts file, then you have to have tooling to support that. In particular, if you're building a library in TypeScript and you're using that library in a separate project, you can't just go into your node modules and fiddle about with the code base and expect it to run. You're going to have to rebuild the code. And there's all these points of friction that get added when you use a non-standard language like TypeScript that I have come to believe makes it not worth it. So instead, we put our types in JS documentation and we get all the type safety but none of the drawbacks because it just JavaScript Everything is in comments and so you can just run the code And so this is what we do inside the SvelteKit code base and it worked out fantastically And for Svelte 4 we going to do the same for Svelte Because it going to enable us to move much more quickly You heard it So basically Rich says okay we really don like the experience of TypeScript for making libraries But it's really awesome if you're someone like a front-end developer that's not really working on a library. Because since you already have a build step, why not use TypeScript? But it really makes development for library maintainers harder. And basically, that's all that it comes down to. If you didn't know, Svelte could already use this approach as Rich said, so I'm really confused when this was such a huge issue, because people were like, you can't take TypeScript. But they're not taking your TypeScript. They're still using TypeScript, but they're using it over JSDoc, right? And they generate the types, and you have awesome type completion. So Svelte is not abandoning TypeScript. In fact, they're embracing it more, and the point of that change was just to make their lives a lot easier. And also, let me show you that. So here was the pull request, TS to JSDoc. So as you can see here, for example, I just talked about transitions. Here's a transition. So here you can see it still has a .dts extension. But now they just ripped the interface and they replaced it with jsdoc. And if you don't know what jsdoc is, basically this is jsdoc. These sort of comments in your code. They don't have a build step, which makes testing easier and etc. And yeah, this is really awesome for Svelte. So it lets them move quicker and it really doesn't affect you as the end user. And of course, there's a migration guide. So we can see here the minimum version of Node is now 16, so they can shed a lot of legacy things which makes the bundle size a lot smaller. They have some stricter types for Svelte functions, so again the types are even better. And yeah you can read through this if you want. So custom elements with Svelte, they overhaul it and significantly improve, so now the tag option is deprecated in favor of the new custom element option, so you can see this looks like this and if you're excited about WebCom columns then this is for you. deprecated this thing, which isn't really important. Transitions are local by default, which is awesome. So the default slot binding is no longer exposed to name slots. This isn't something you have to consider yourself about, but basically here you can bind props from slots to the parent components so you can use it. And before it was bound by default in name slots like this, which is no longer the case anymore. The preprocessor also got some changes and now they're executed in order, so it's really easier to work with them. Then you have some other breaking changes and then there's also these changelogs you can read. So as I said the minimum supported node version is going to be node 16. Let me look at some other things. So they overhauled and drastically improved creating custom elements with Svelte. They made transitions local to print confusion around page navigations. They also made some great changes they didn't mention in other places like for example now when you use a custom store you need to pass the update function and a set function which avoids a lot of bugs and etc And we already talked about do not expose default slot bindings to name slot and vice versa so they changed that They changed the other which preprocessors are applied So this is one they didn't mention, which is really awesome. Now inside of an each block, you can iterate over any iterable, like set, map, and etc. And this is really awesome. And let me see if there's anything else. So we talked about generating type declarations in DTS body, so now that's going to be even more awesome. and you can go and read through all of these changes if you want. But yeah, that's awesome. So now let's go to the rest of the announcement. So as you can see, it's about the developer experience, as we talked about, which is really awesome. So what is the future of Svelte? So Svelte 5 is going to be the next generation of Svelte. Svelte 5 will be a complete rewrite of the Svelte compiler and runtime. And as I said in this post, Svelte 4 was mainly about setting the ground for these future improvements by adopting modern tooling and dropping support for some legacy versions of various technologies. So the future of Svelte is really exciting. And speaking about the future of Svelte, if you didn't know, at this point there are actually 3 full-time positions for people working on Svelte at Vercel. And people have this misconception that Vercel owns Svelte, but that's false, Vercel just pays the maintainers to work on Svelte and SvelteKit. It's really a symbiotic relationship because Vercel can test their platform features or whatever and make sure that SvelteKit and Svelte is the best experience on their platform so they're really investing into the future of Svelte. Rich Harris already works at Resele then the other person that was deployed at Resele was Simon which is really awesome but the new addition to the Svelte team is Dominic Ganaway and this is an absolute mad lad so he made Lexical.js and Inferno.js and basically instead of me talking about it let's hear Rich talk about what a monster Dominic is. Back when I was mouthing off about how no virtual DOM library could possibly compete against a compiler-driven approach, because a compiler can do all this clever static analysis stuff, Dominic just sort of casually built this virtual DOM library called Inferno, which demolished everything else in the benchmarks, including and that's because he knows his way around JavaScript engines in a way that most immortals simply don't. And yeah, you can imagine what a monster Svelte 5 is going to be with all of these brains behind them and the backing of Vercel. So yeah, the future of Svelte is looking really exciting. I can't wait to see what they're going to come up with Swelld 5. Alright friends, so that's it. You can upgrade to Swelld 4 today. Don't forget to like and subscribe. If you want to support my work, you can become a patron and you can also join the discord server. Thank you for watching and catch you in the next one. Peace! you