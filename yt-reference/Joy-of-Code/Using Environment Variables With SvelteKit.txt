 Hey friends, welcome to an update to one of my older posts, using secret environment variables with SwillKit. So let's get started. What are even environment variables? Environment variables are variables in your system that describe your environment. So for example, on Unix-like operating systems like Mac and Linux, if you type something like echo home, it's going to give you the path to home. It says home, and it gives us the path. And we can also do it for something like echo path, so you get the path to executable files on your system. And this is useful because you don't have to know the entire path to an executable will just type its name. We can set environment variables and they're useful for knowing if you're in a development or production environment or storing API token safely. Here I just have a regular SwellKit project and as I mentioned in the post, in development you store environment variables inside the env file, sometimes you're going to see .env.local and you should add it to your gitignore and at no cost should you expose it to anyone. So you can see here is the env file and that's basically what's going to get picked up and used in your application. And to help your future self and others, it's a great idea to create an env.example file, so you can just put a placeholder and then you can push it up to your repository, so the next person that's going to clone your repository or work on your project knows what they need to fill in. Let's talk about using environment variables in SvelteKit. SvelteKit exposes four different modules for handling environment variables, so you have env.dynamic.private, env.dynamic.public, and you have the same for env.static.private and env.static.public. Of course you can load environment variables however you want, like using import from wheat because SvelteKit is built on top of wheat or you can use a package like but it easier and more secure if you use the built modules SvelteKit provides Another great benefit of SvelteKit managing everything for you is that it won let you expose sensitive environment variables on the client and throw an error since SvelteKit knows about the imports and you get great TypeScript support. That being said these four options might look confusing but are easy to understand once you understand their purpose. Use the static import for variables that don't change. This is what you want most of the time. If you have an env file or store your environment variable somewhere else, the next steps are going to be the same. So for example, if you have this environment file, once you load your SwellKit application, they're going to be loaded by SwellKit and they're going to be generated here. So you get great typescripts report. So if you go to the .swellkit and generate it nbnds, and we can search for this value. So we can say secret API key, and you can you can see it's right here for your, let me see, this is ENV static private. So you're going to see this is also going to be generated for the dynamic one. And you can also find the public API key here. This is how it gets generated. And that's why we have great TypeScript support. And I'm going to show you that in a second. Yeah, so we can close this file. And here we have a plus page TS file. They're just going to use a load function and this runs on the client and server. So let me just show you how we can use the secret environment variables. In this case, we really can't use the secret. And this is a great benefit of using this SwellKit provided modules. So for example, we can go here and we can say import secret API key And it already see here we have great support So I can just say ENV static private But now if you look at our page and let me just open the terminal you can see here it the output. But if I saved it, this should give us an error. And this helps well, it prevents you from doing something stupid. But if I close this and I just use the public one, so we can just go here and if we press control spacebar we can type public API key and now when we say console.log public API key and open the terminal scroll down we can save it this refreshes the page you can see page ts public but what if you want to use the private environment variables you can only do this in private modules or dot page dot server ts files so if i go here so you can just import so for example you can do it like this from and then we can say env and we can say static private write and we also get great auto completion so we can say I name it secret api key and now if I log it out here secret api key is going to get logged into the console and we're not going to get an error because this only happens on the server so let me just save it and we can see page server ts we get back the secret and we get the public api key in page ts one thing worth noting is that the public environment variables need to be prefixed with public underscore and they're going to be loaded from your env file and you can change the public prefix to whatever you want in the SwellKit configuration. Use the dynamic import for variables that change. Sometimes you have environment variables that change and you have to send them from the server to the client Use them only when you need to So you can do the same thing if you have a private one then you can just use the page server TS so you can load it there and it also has to have the public prefix if you using public one So if anything changes you can just import it from the server and that's how you use it. But you should use the static import whenever possible. Last thing I want to talk about is how you can keep your own secrets. You can create a server only module by adding .server to a filename or placing the file inside lib slash server folder to store any secrets here i have for example a secret inside lib slash server slash secrets.ts and i'm exporting a secret and again if you try to import it somewhere like here so we can say import from lib server and then we can say secrets and now we can also complete this we have secret and now we should get an error if i open the console because you're trying to use something secret and just refresh and yeah, you're going to get an error. So this is also going to prevent you from using any other secrets. But again, if I remove this and if I go to page server, we can import it here. No problem. So we can say import secret and we can just add lip here and we can just console log it out. Console log secret and everything should work the same. So you see here is plus page server TS. Here is the secret. Then we have our other secret that we created from the server only module. And then for page TS, we have the public key as before. So that's everything you need to know for managing your secrets and environment variables inside SvelteKit. So thank you for watching and catch you in the next one.