 Thank you. Hi, everybody. My name is Mary Chris Bonzo. And by day, I am advocating for developers at Magic, a future-proof passwordless authentication solution. And by night, I am building a DAO called Women in Web 3. And I'm also taking care of my energy, my plans, my gemstones, and my furry kids. So before I get started with my talk, I wanted to give a shout out to a few people, including Nader Debit. That's because I built this app using his tutorial, but did make a few changes to it. So his tutorial is building a full stack NFT marketplace on Ethereum. So So instead of using Next.js like his tutorial, I replaced it with SvelteKit. And then instead of using MetaMask to buy NFTs or sell it, I'm using Magic Wallet. So shout out to NaderDevitt. That was a really awesome tutorial. And I can't wait to remix it with SvelteKit and Magic. So I also wanted to give a shout out to Sean Mullen. He is one of the guest authors of Magic. He wrote this blog on how to integrate Magic with a SvelteKit app. And this is actually how I first learned about Svelte. So it's very special to me. And I actually referenced this blog a lot when building my app. So shout out to Sean Malin. All right. So in this talk, I'm going to show all of you how I built a magical NFT marketplace. which is pretty much a remix version of both Nader and Sean app On this NFT marketplace we be able to create an account mint an NFT buy an NFT and then be able to see all of the NFTs that we have ever owned So it's going to be a lot of fun. But before we get started, we should probably learn what a decentralized app is because that's essentially what we are building. It is a DAP. And I want to give another shout out to Preeti because I'll be using her diagrams in the following slides. Her diagrams are going to help us distinguish between a regular app and a DAP. So what is an app? We all know what it is. It has a front end for the UI. It has a back end for the business logic. And then it has a centralized database to store the data. And then once we're done developing the app, we deploy it onto a centralized server. And some examples of that are Vercel, GCP, and DigitalOcean. All right, so what is a dApp? As you can see, a dApp still has a front end that we can deploy to a centralized server, but where it differs most from a regular app is the backend. So a backend is going to have a decentralized storage for storing data. And then for the critical business logic that needs to be recorded on the blockchain, we write them on the smart contracts. And then we deploy the backend on a peer-to-peer blockchain network like Ethereum or Polygon or Celo. But in our case, we won't be deploying it to any real blockchains we're just going to deploy it to a local network which we'll learn more about later but yeah these are the differences um so hope that helps and another thing whoa i'm like in this nft realm uh so this is uh one of the nfts that was sold for like so much um by people and i wanted to you know since we're building an nft marketplace we should probably know what an NFT is for those who don't know. And I have this definition by Linda because it's just the best definition out there in my opinion and I'm just going to read it out loud to y So a non token is a unique digital asset whose ownership is tracked on a blockchain such as ethereum so yeah it like having a mona lisa piece of artwork online and it unique and can be duplicated because it's been uploaded to the blockchain and the blockchain is immutable and it's secure because it's a peer-to-peer network so all that tech side is really cool but what's really awesome about nfts is that it introduces this idea of digital scarcity so artworks are finally given the sense of life online that a lot of people are willing to pay hundreds thousands and sometimes even millions for and it's really amazing because it generates like wealth for online creators that i feel like they deserve so it's it's just an awesome um revolutionary technology. So yeah, for those of you who are like, so who cares about dApps and NFTs? Well, dApps and NFTs fall under the umbrella of Web3. And Web3 is pretty much the next stage of web evolution, where decentralization is a key attribute. And so in the Web3 space, you'll find that the most important thing is that control and power of digital identity and data is shifted to its rightful owners, which are the users themselves, right? Us. So once you start falling down the rabbit hole, what's even more amazing, if that's not amazing enough, is that it's all about community, all about creating value for the community, and it's all about the abundance of opportunities that exist. So there's an opportunity for everyone to generate wealth, especially if we are early in the game. And we are, so I'm just really excited to share this talk with all of you. All right, so this is the tech stack that I used. And we're going to go over each and every single one of these. So just hold on. So real quick, Solidity is the language that I use to write the smart contracts. Hardhat is gonna help me build a Solidity development environment to help me test and deploy these smart contracts SvelteKit for anyone who is new I think it worth understanding what Svelte is first. Svelte is more than just a UI framework. It is also a compiler that makes it easier for us to write components. It's kind of like React, but in my opinion, it uses a smarter programming model because it compiles components into petite JavaScript modules at build time rather than doing this work in the browser. So that means that the browser does less work, which means that our app is faster and we write less code. So that is awesome. And so that's Svelte. And SvelteKit is pretty much a framework that was built on top of Svelte. that lets us build Svelte apps like really quickly. So it's kind of similar to NextGIS for React. All right, and Magic is a plug and play passwordless authentication. It's what we're going to use to authenticate users into our NFT marketplace. And it's also going to serve as the user's wallet so that they can transfer funds into it or mints or buy some NFTs. All right, so we're going to need a place to save the NFT image and its information somewhere, and we're going to save it in IPFS, which is a distributed file storage. lastly ethers.js is the library that's going to let our front end interact with the ethereum blockchain or in our case we'll be deploying our smart contracts on the hardhat network so we'll be interacting with the hardhat network all right so now let's learn about the smart contracts that we'll be using for our NFT marketplace. And I'm not going to go into detail about how this is written because it is part of Nader's tutorial. So I would reference his tutorial if you want to dive deeper into it. All right. So this is the NFT contract and what this is going to allow us to do is let users mint an NFT. So what that's going to do is let users mint an NFT.

 means is that their ownership over the nft will be recorded onto the blockchain and we're using this create token method in this contract to do that so we'll be using this on the client side in a bit and then we have the marketplace contract and we have a lot of methods in this contract but the essence of it is this contract is going to let users perform transactions in the marketplace Those transactions include adding an NFT to the marketplace, so create market item, selling the NFT, so create market sale or buy the NFT, and then getting the NFTs. So all these fetch methods will help us get the NFTs that we want. All right, so we're done with understanding the smart contracts of the NFT marketplace. and if we wanted to run it, the main steps that we would need to follow is we would spin up the network. So in our case, it's the hardhat network and then we would deploy the contracts that we wrote. And when we deploy it, what we get back are the addresses to which the contracts were saved in the hardhat network. And we're going to save these addresses in a config file because we're going to need to access these contracts. All right, so that's it for the backend of smart contracts. Now let's see how we build out the front end with Spelkit and Magic and a bunch of other tools that I mentioned earlier. All right, so we have one public page and one private pages that users can access if they log in. All right, so first, the login page. So this is the login page. When the user wants to login, they pass in their email, click login. And their email is passed into this login function, which we're importing from this library. But once we successfully login, we take the users into the Mint page. Before we go there though, we're gonna dive into this odd.login function. So let go into there All right so here is where the login function lives in the odd file And one of the most important functions we're gonna look at here is the login with magic link function, because this is what authenticates the users in. So let's look at this file. So first we are importing the magic client SDK. And then we are calling the login with magic link with the user's email address. When this is successful, we get a DID token, which pretty much gives the user access into the NFT marketplace. It's kind of like an access token. So as you can see, we are sending this DID token over to the login API endpoint. And we're doing that to validate the token. and once it's been validated and everything's good to go we are pulling in the user metadata and storing it into this vault store and so before i move forward i want to see what's going on with the magic client sdk and then also what's going on in this login api endpoint all right so let's Let's see how the Magic Client SDK is configured. All right, so this is pretty much where we are connecting to the hard hat network. And all that is is a local Ethereum network node. And we connect to it by specifying the network URL, which is right here, and adding that into the Magic Client SDK config. config so there it is and we are also using ethers.js here to create a magic provider and all the magic provider is going to do or actually it does a lot of things but it pretty much is how our front end is going to communicate with the smart contracts that we deploy onto the hardhat network. So this is important. All right. Now let's understand what's going on in the login, um, API endpoint. Okay. So in here, as I mentioned before, this is where we're validating the DID token And the reason why we do that So well first of all you get the DID token and we actually importing the magic admin SDK um to help us validate the DID token So we validate it And once we know that it's, it's good to go, uh, we can get the user's metadata and, um, yeah. And then we also create a cookie and pass in the user's metadata in there so that we can persist, uh, the user session across all of the different svelte pages and that's pretty much it um this is all good and just really quickly uh you want to see how the magic admin sdk is configured all we're doing is importing magic and setting our secret key which we get from the magic dashboard and making a new instance of this magic admin sdk so yeah we'll be using um the uh magic provider a lot to interact with the um hardhat network all right so the user is now logged in and they're brought to the mint page and they have a magic wallet but they cannot mint an nft right now because they have no ETH in their magic wallet. So let's fix that. So the way we do that is we're going to use RinkB. It's just a way to get some test ETH into your wallet. And this is how we need to do it for RinkB. So we need to get our public address. And I got that by just printing it out. I got the user address. And then what I do is I created a tweet that includes my public address. And then I added that tweet to the Ringbee input form. And yeah, so this is just their way of making sure that you're a real person asking for some test ETH. So once you get your test ETH, you can check to see your balance. as you can see i have a ton right now so i am good to go all right so we're back at the mint page and uh one thing i want to point out real quick is that um we going to be using this line of code in every page um get auth store And this is pretty much the um the store that defined when we logged in you know um, we put the user's metadata in the store or saved it in the store so that we can access it across all of the different pages. Um, and you know, we are calling it to make sure that the user's logged in. If they're not, then, uh, we pick them back to the login page. and the most important thing to see here on the mint page is that we have a component called mint form so we're gonna dive a little deep into that and see what it's doing all right so before we get into the code let's just understand what's happening on a ui level so when you want to nft you gotta upload a an image and when you upload an image this on file selected function is called and then after you upload the image then you add the information about your nfts and then you click create and this create button calls the create market function and then the create sale function. So let's go see how that looks. All right, so here is the mint form. And let's look at on file selected first. I'm just gonna tell you what it does. I'm not gonna go into detail about it. So on file selected, what it does is it uploads the image onto IPFS and gives us a URL to that image. So we upload an image and then we write the information about the NFTs here, right? And then once we're done, we click create, which calls create market. And what create market does is it pretty much takes the information about the NFTs as well as the image URL and uploads it as a file onto IPFS again. And then once we get a URL as to where that file lives, we can call create sale and create sale in a gist. Oh, this is like where the magic happens actually. So I need to slow it down a bit. But create sale is where we use the magic wallet to mint an NFT and add it to the marketplace. So in order to do that though, these are transactions.

 So we need to grab our Ethereum account or signer using the magic provider. So we're importing it here. And then we're calling its method called get signer to get the signer or that's all that is, is the Ethereum account. And this signer is going to let us access the smart contracts that we deployed onto the hard hat network. So for example, the NFT contract, um, lets us do some things with it. And then, um, we have the, um, marketplace contract here. And it's also, um, you know, that's what, that's one thing the signer does helps us access those contracts. And then it helps us perform changes to our, uh, apps or DAP state on the hard hat network. So, uh, where is it? So we can create a token and then we can create a market item. So yeah, that's pretty much just a bit. Let's go back. All right. So that is the mint form. So after you have finished minting the NFT, the app will take you to the homepage. And this is where all of the NFTs that are available to buy will live. So it's pretty simple. what we really want to look into is this component called nft gallery so let's get in there all right again nft gallery these are the two main functions we're going to look at so once we get onto the home page this load nfts functions get called and then when we click this buy button to buy an nft the buy nfts button gets called so let's go into the code and see how that looks so load nfts this means that we need to get all of the available nfts that exist in the marketplace so we'll be interacting with the marketplace contract which means we will need the magic provider so we are importing it here and using it in these two lines of code And so that's pretty much the gist of load NFTs. All right, now we are going to talk about the buy NFT function. And so we are making a transaction here So we need the user to sign a transaction which is why we are importing the magic provider and getting the signer And so we get an instance of the marketplace contract. And now we can buy the NFT by calling create market sale. So that's pretty much the gist of this part. All right, so that's it for NFT gallery component. Now let's move on to the profile page. All right, so now that we have either minted or bought an NFT, we can see all of the NFTs that we have ever minted, sold, or purchased on our profile page. So if we look at the code, you can see that I have a component for each of these. So let's look at them. all right so purchased nfts um let's see uh one of the most important um functions that we'll be calling uh we already know about load nfts we're just fetching the nfts um that exists in the marketplace um but we're not just fetching any nfts uh we're fetching my nfts the logged in users nfts so um this is important so let's go look into this real quick okay um okay so this is where we're calling uh fetch my nfts so because we're interacting with the contracts again we are importing the magic provider getting the signer because we're getting a specific user's nfts and getting an instance of the contracts so yeah that's pretty much it we're just like loading all of the nfts that belong to the logged user and displaying it okay and similarly these components do the same thing but with small change. So minted NFTs, we're also calling load NFTs and we calling fetch items created And we pretty much doing the same for sold NFTs We also fetching the items that we created And the only difference is that for the sold NFTs we're filtering out all of the items that we created and have sold. So if we look at the code, we'll see, again, we're interacting with the contract. so we get the magic provider, get the signer so that we know because we're looking for items that belong to a specific user, logged in user. And then we are getting all of the items that we have ever minted or created. And then for the sold NFTs, we're pretty much doing the exact same thing except that we are filtering out those that have been sold. Okay, so that is it for these components. Alright, so I hope we had a lot of fun visiting the NFT marketplace. And now that we're done buying or minting our NFTs, we can log out of Magic. And to do that, we just click on this logout link on the navigation bar. And when we click on that link, let's see what's happening. The most important functions we're going to be diving into is the remove session cookie and magic's logout by issuer method. So first though, let's just walk through the code. So we click logout and we are calling the logout function, which we defined in the auth.js file, which is in here. It's very small and all it's doing is making a request to the logout endpoint. And actually it's also clearing up the store. So the logout API endpoint is importing the magic admin SDK so that we can use the logout by issuer method. And what this does is it logs the user out of all client-side magic SDK sessions. And as you can see, we're also removing the cookie and making sure that the user metadata isn't there anymore. All right so those are the major parts that make up the SvelteKit and magic powered NFT marketplace So now let test this thing out Okay so I going to log in And I'm actually going to check my phone email to log myself in. Okay, log myself in. All right, cool. so we were taken to the mint page now let's choose an image to um mint maybe this and we'll call it um first nft yay and we'll give it the price of one eighth Okay, so it's been created and there's my first NFT. Awesome. So you can see that I am the seller here. Let's find an NFT that I don't own and buy it. Hopefully I have one in here. I guess I don't have one, but I've already bought some. So let's go into my profile page and see all of the NFTs I've sold. Here they are. And NFTs I purchased and NFTs I've minted. Awesome. Now, last part is let's log out. Ah, thank you to the universe for letting that work very nicely. All right. Well, thank you for watching my talk. My plan is to turn this NFT marketplace into an NFT funded DAO. So we'll see how that goes. but if you want to stay updated on that project or if you want access to this slide deck or all of the other resources that I use to help me prepare for this talk feel free to follow me on twitter I'll be posting a tweet of all the resources including a link to magic so as a Reminder Magic is feature-proof plug-and-play passwordless auth solution, and it's for all developers. If you're in Web 2, Web 2.5, Web 3,

 Whether you're building a gated community or an NFT marketplace, magic has got your back. So yeah, check us out. And last but not least, I just wanted to say a sincere thank you very much to the Svelte Summit team for giving me the opportunity to get this talk. So yeah, I'll see y'all later. Bye.