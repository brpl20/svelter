 Hey friends! Today I'm going to show you how simple it is to publish a JavaScript library to npm. So the only thing you're going to need is to sign up to npm, so if you already haven't done that, do that now, and that's it! And before I get started, don't forget to like and subscribe, and you can also support me by becoming a patron. Alright friends, so if you didn't know, npm is the default package manager for Node.js, and it's used to host a myriad of packages ranging from front-end, backend to mobile devices, etc. You can find any package on npm. And also npm isn't this serious thing you can upload any package you want so if you have some utilities that you often use library framework and etc everything lives on npm you only have to look at an example of is odd to see that's really not that serious so let's look at is odd so this is one line of code that checks if a number is odd in javascript and apparently it has over a quarter of a million weekly downloads so if you thought this was some serious vetted place where only you can upload professional code and I'm sorry to disappoint you. Alright friends, so let's see how we can upload our package to npm. Alright friends, so I'm logged into npm and let me show you how simple it is to create an npm package. So here in this empty folder we're going to create a separate folder, you can name this whatever you want because this isn't the name of your package, the name of your package comes from package.json. So we can just create this folder greet and then you can open your terminal and you can run npm init which is going to ask you a couple of questions and then create a package.json but I'm not going to do this because a lot of these fields aren't relevant to us. i'm just going to exit out of this and then i'm going to do it by hand so inside of greet i'm going to create a new file package.json and the only two important fields to us are going to be the name of the package and the version so we can give it a name which can be anything you want as long as it's not taken and then we can also give it a version which is going to respect semantic versioning so we can say this is the first version so this is going to be your patch for any bug fix this is the minor version when you add some change and etc and then whenever you make some breaking change you have to bump this version up so your users know okay this version of our package has some breaking changes it has basically semantic versioning but that's up to you that's only a promise npm doesn't really uphold this or care about this and then i'm also going to add some other things i'm going to define the entry point of our application so you don't have to do this but the default is going to be anyhow index.js but if you have some build system for example you build your app into dist or whatever you can say this slash index.js and that's basically what you do but this is going to be required because i want to use the modern javascript import syntax or ECMAScript modules you need to define this type to be module and that's basically it so inside of our sidebar inside grid i'm going to create a new file so this is going to be our entry point and then i'm just going to export function grid which is going to say console.log.hi that's basically it all right but this is kind of awkward to test i mean how are we going to test this we can invoke this function here and then we can go to a terminal so we can cd into greet and now you can run index js so node index js is going to output high or you can say node period which does the same thing and it would be nice if there was a better way to test this and of course there is so we can use something called npm link let me show you how simple this is so inside of your package you just have to run npm link and that's it so you just run npm link it's done and now if you want to see your globally linked packages in npm you can say npm ls you can pass it the link and the global flag all right so now if we pass this we can see ah here is our greet package here so now we can link this in any other project that you want so let's do that i'm going to close this and let me just for now close the terminal so i'm going to create a new folder at the root which is going to be the test folder it's going to be test and i'm also going to create a package.json inside of it because we're using a module we also have to specify here that this is of type module this is the only important thing here because we're not going to publish this or anything this is just for testing right all right so how can we link our package i'm just going to create a new terminal and now we can cd into test so now we inside of this test folder and how do we link a package we just have to say npm link and the name of the package So in this case it going to be greet And then we going to get the message that it linked And this is going to be linked inside of node modules. So if you go to test node modules, you're going to see this arrow sign means it's a symlink. So you can see it's inside of here. So if we open this function here, we can see that this is our code. How beautiful is this, friends? And basically now you can use it just like a regular package. So you can test your packages easily this way. If you have some CLI, for example, you can invoke it globally and etc so to do this let's just create a new file index.js and now we can say import greet from greet and then let's invoke it and we should see our message high so let me just clear everything and then we can just say no dot and it outputs high all right but let's say that you want to remove the link package it's really easy you can just say npm unlink inside of this package where we're testing it so you can say npm unlink greet and this will just really remove it from node modules and you can see there is nothing here but if we check npm ls link global it's still here so you just have to remove this as any other globally installed npm package so you can say npm uninstall we can pass it the g flag and then the name of the package so we do that and then let's check this command again as you can see it's empty so now you remove the link package completely all right so let me show you how we can easily publish your package first i'm I'm going to just destroy all of these terminals. Let me just close these files. I'm going to do some cleanup. So now let's open our terminal. And let's see the into greet. And the only thing you have to do is say npm publish. And you're going to see we're going to run into a problem. So you can see we get this error message that is forbidden. Put are you logged in as the correct user? Well, of course, because this package is already taken. So if we go to npm here, for example, and we look at greet, there's already a package that's name greet okay so what do we do now friends do we come up with some unique name and the answer is no you can use code packages so you can create an organization on npm let me just show you if you go here to your packages you can just see i already have some organizations here and this is totally free on npm you can just say plus you can create any other organization that you have so that's how other organizations have their packages scoped or namespace so they don't have to worry about the package names i'm going to do this under this organization joy of code so that's really super simple and easy and then you just have to give it the name of the organization i'm just going to name this joy of code slash greet and that's basically going to be it another thing of course always add documentation so inside of greet let me add a readme and then you can of course make this a better readme but you get the gist but now we're going to see we're going to run into another problem if we say npm publish we should get an error so it says payment required what do we have to pay for npm oh swipe the credit cards boys but no this is just because when you create a namespace package by default is going to be private private packages npm is a paid feature but thankfully you just make your package public and that's it so you just have to add one flag so you can say npm publish and then you can say access public and that's basically it this is the only command you have to run and now we can publish our package. Alright, so the moment of truth. Awesome, it worked. So now if I go here under my organization, JORF code, there we go. Sometimes the UI is buggy, but that's okay. So you can see JORF code agreed. So now we can see, okay, here is your readme. So you can update this. You can see how simple this was. And if we go here to the code, we can see here is our updated code. This is the same function that we would find as before. So you can add other fields here for the license, keyword, and etc. Everything you're probably used to seeing. Alright, so if for whatever reason you want to delete your package, you're just testing something you can do so you can do it the graphical way by going here to settings on npm and then you can just go here to the bottom and you can delete package so if someone is depending on your package then you have 72 hours to delete your package and why that is well let me just really show you so this package left pad this person historically randomly decided to nuke this package from npm and it broke the entire internet and since then npm said okay we not I not going to let you delete any package from npm from here or now Okay But here is an easier way from your terminal so you can say npm and instead of saying publish you can say unpublish and then you can give it the name of your package so you can say greet and pass it the f flag and this is going to remove your package and actually i should give it the proper name not greet it's namespaced under your code great there you go and this will just remove the package for you or friends you've you've seen how simple it is to publish a javascript package to npm but that's not enough because in most situations you're going to want to need typescript linting formatting and some way to test your code and this is where svelte kit comes in if you're not familiar svelte kit is a meta framework built on top of svelte so it's the same as nextjs nuxt and remix but for svelte so how can a meta framework that helps us with routing and etc help us with packaging well there is one cool feature that svelte kit has and is this packaging system so if you just create a regular SvelteKit project by saying npm create Svelte, you can pick some interesting things. So you can select the current directory, and then we can pick here from these options, we can pick a library project. So now instead of source routes being the public facing part, the main part becomes source lib. So now you can run npm run package, and you can package your Svelte library, your JavaScript library, whatever you want. So you can press library package, and then we can select, okay, we want TypeScript, and you can use spacebar to select all these options. This is how really simple it is to set up all of these tools. You can say ESLint, Prettier, Playwright, and VTest. And now we just need to press enter, and then you can install dependencies and go on your way. But instead of doing this, I'm going to show you an actual project I need to publish to NPM. So here we created this SVG animation library in Svelte in the previous video. So this is something I need to publish to NPM, and I'm going to show you how I can do this using SvelteKit. Alright friends, so here I have this motion library that we made from scratch in a previous video and there is just one thing i want to stress out and that is that you should work on your documentation and you don't really need the full documentation that you can host if you have something simple like this you can just write your documentation here but make sure it's actually good one thing i really want to see from documentation explain what your project does it might be obvious to you but it's not obvious to a lot of other people so just explain what it does maybe what is the motivation and here is something also great you can just upload the video here so if you're editing this readme on github just drag a video file and a picture says a thousand words so someone can play this and they can understand okay this is something for animating things right keep it simple as possible installation boom done please provide an example so we can test it out you have so many wonderful reports from swell stack blitz and etc so you can just create an example opening stack with boom let's get going right just let your user test this library to see what it's about provide a simple example and etc and of course this documentation can be fleshed out but this is just something quickly that i put together so let me show you how we can take advantage of swell kit to publish this library all right so i created this library template let me just show you where things start here we can open the package json and you can already see i namespaced it to the organization i want to publish this under which is any motion which is the presentational framework i worked on if you want to check this out you can just go to any motion and you can view this right here if you need to make slides on etc want to make explainer videos you can make this sort of thing so this is just a library i made to complement animating in any motion that's basically it let me just close this so you can see i'm going to namespace version who cares type module i supply the license mit a lot of people are going to be worried if you don't have a license because they want to use it they want to fork it and etc so just include a license you can just slap an mit license or whatever you want here you create this simple file license and that's basically it and then i added some extra files so this shows in the npm information i added the repository information i added some keywords so it's searchable right and that's basically it there's nothing that's special here here i change this export fields to default this is by default swelt if you're publishing a swelt library so the swelt tooling can pick this up and know what this is but if you're using something that can be used outside swelt like a swelt store in our example you can just say swelt default and here this files field is going to tell npm what to publish to npm actually because you have a lot of files here right we not going to publish all of this to npm so it says okay upload this ignore the test inside and etc and that basically it so let me show you how this works so by default when you create a regular strategy project your routes are the main public facing part of your app so you can use this now as your implementation you can use this for your testing ground and etc so you can just say for example I'm using PMPM here, but it doesn't really matter. You can say PMPM run dev, this is going to open the development server. So you can make your docs, make examples, whatever you want. But let's actually see the heart of this. So your lib becomes the main part of your Svelteclet app. So as you can see, here I have this index file where I'm importing everything. So this is something you have to do. And unlike in regular Svelteclet projects, you have to specify the ending of the file because that's just how node module resolution works. You can't really use any magic here from your bundler that makes you not specify the file extension. So even if we look at page.svelte here, we're importing from $lib slash index.js. So this is something you always have to specify. And you can read more about this in the Svelte packaging documentation. But yeah, this is what we do here. So here I just have this simple parts of our library, which is CINL. I'm just exporting some functions here. Then I have some utils and et cetera. And then this all has to be exported from this index.es file in your lib folder. As you can see here, I have just some simple tests, nothing special. Okay, so now what you can do, you can just do npm run package, or in this case, since you're using pnpm, you can say pnpm run package, and this is going to build the library to be published to npm. So this isn't going to publish to npm for you, it's just going to build the package. As you can see here, it creates this disk folder. So if I zoom in, you can see it already created types, it transpiled all of our JavaScript files to TypeScript and everything looks great. And you might see these testing files are also here but it's going to be ignored by npm since it's specified in package.json. And of course the same as before you can test this library out by saying npm link and then you can link it inside of another project the same as before. Alright so let's publish this library. So I'm just going to collapse everything so it's not confusing. We gave it the proper namespace so you can check on npm here. If you go here let me just go packages here i have this organization i have one package here i want to add one more so i don't have to worry about the name because it's already taken right all right and once you're sure that everything is right you can just publish it the same way as before so you can say npm publish and remember it's prior by default so you have to pass this access public flag and this should publish to npm for us all right so give it a second and that's it so now we can see if we refresh this you can see give it a second or minute to update you can see version 0.1 so we can see it's under at any motion slash motion so you can go here you can already see why it's so important to have a readme so people can see it also on npm you can see here is the hosted file that i put the video on github which shows like this here because npm doesn't render videos right you can see here it already has these beautiful instructions so you can just say npm i at any motion slash motion it's going to work. Here we have these fields I include in package.json, repository, homepage, you can see the version, license, MIT, the size of the package, when it was published, and etc. And that's basically it. And now even if we go here to the code, we can go to the disk, and you're going to see the test file was ignored. It just uploaded this package, so it didn't upload your entire SvelteKit project. That would be insane, right? So basically, that's how simple that is. And now using SvelteKit made it a lot easier to have all of this tooling and to package and publish our library to npm. And And that's basically it, if you like what you've seen don't forget to like and subscribe and you can also support me by becoming a patron. Thank you for watching and catch you in the next one. Peace!