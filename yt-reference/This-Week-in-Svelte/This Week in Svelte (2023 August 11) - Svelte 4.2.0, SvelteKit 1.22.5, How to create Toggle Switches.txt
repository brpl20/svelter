 Hello everyone, welcome to This Week in Svelte. My name is Enrico and my co-host today is Paolo. Welcome everyone and Paolo. You got it. And the agenda is the changelog, quick facts and announcements, a community showcase followed with discussions and questions and answers related to Svelte and things happening around the Svelte Discord. Let's go. Changelog time. let's bring on the chat so in the change log an hour ago this just in breaking news svelte 4.2.0 the minor change includes moving svelte html from language tools into core and load the correct element types so i presume this is like coupled with the vs code svelte extension so that the typings are both correct and consistent. I just found out about it right now. And now you did too. In SvelteKit, yeah, pausing for suspense. In SvelteKit, we have 1.22.5. There's a fix to make server assets available during Vite preview. This took me a while to understand, but my analysis says this is about importing images for example using vt import syntax like import something.jpg if you do this within a plus server.js file or plus page.server.js file for some reason there was a bug in which vt preview would not load those static assets but now it should and just a side note vt preview or i think npm run preview if you're running a spell kit application the whole point of this is to preview the built sveltekit site in a folder called .sveltekit. So some of you may have seen this folder. This is where sveltekit assets are built when developing, but they do not represent what goes on production. So Vite Preview isn't 100% production-like, but it gets you pretty close to it. Yeah, also you should probably run mpn run build before, otherwise it will not work. Yeah, to do a true production test, in the case of something like adapter node or adapter static, you run npm run build, and that typically puts files into a git ignored build folder. And then from the build folder you can run node build in the case of adapter node But if it a static site you can run a simple server like Node serve or an NPM package for that Interesting notes And of course, upgrade UNDG to 5.23.0. When will UNDG be at version 11? Maybe someday. Oh, that would be cool. That would be a cool day. Even better, 11.11.11. I hope I'll be around when that happens. and we should throw a party when that happen we will and that's the change log now quick facts and announcements so for announcements not much i just want to make another public service announcement please use buttons instead of form controls for immediate actions so what do i mean by that. Let's say you have something like a checkbox. Input type equals checkbox or radio. Radio is a better example. And sometimes you have an onChange listener in JavaScript. There we go. OnChange. And it does a function call or something. If this onChange is meant to submit a fetch request or do something, such as an immediate action, this is kind of breaking the contract for screen readers because screen readers expect this to accept an input but not submit anything. Instead, you should use buttons for immediate actions on the page. So for example, if you're changing the theme and you have a drop-down menu, it's better if that drop-down menu is a selection of buttons rather than a select with options because a select is just a form input. You can use a select so long as right next to that select you have a submit button that submits it to a API request or a form action. So that's all I wanted to share. If anyone has questions about that, let me know. Later in this meetup, maybe I'll showcase what a toggle looks like, time permitting. Another note? Yes. A question actually I have is, like sometimes you actually want something like an auto-submit to ease the user experience? For example, if you are doing some filtering and you have, again, a select for a filter or a radio for a filter, and how would you handle that case Like you will just not doing it or there a better accessible way of doing that Good question So for the radio example as well as the select example all you really need is an accompanying submit button. So if you have a radio selector, next to that radio selector, my advice is put a button right after it saying submit. So selecting something for a dropdown select shouldn't actually submit anything, but the button next to it should. So that's the first recommendation. Secondly, you could convert the select into a set of buttons. And I've seen some design systems do this. It's fine as long as you follow the contracts of the roles. Sometimes you have like a div, and inside the div you have some very special buttons. And this is like a pseudo select, but really it's just a drop down of buttons. This is fine too because the buttons will tell the screen reader, hey, this is a submittable action. And when it comes to radios, another thing you can do is use CSS to change something on the page. Something you have radio buttons that sort of act like a tab switcher, and depending on the user's radio choice, you want to show different form controls later in the page. You can actually do a show-hide thing with CSS only based on the status of checked. I think it's checked in the case of radio buttons. So that's a thing too. Does that answer the question? yes kind of kind of but if anyone in the chat has any use cases or concerns let's talk about it this is something I care a bit about I don't think a select or checkbox should auto submit I think that if they are buttons with a certain role contract then yes those can just immediately submit because they're buttons so if they're not buttons then just do a typical form flow which is form element and submit button Okay, got it. Thank you. And that's it for quick facts. Hopefully that was quick enough and factual enough. Moving on to today's community showcase. Please join us on the stage. Hi, thank you. My name is Rene, Rene Fournier, and I'm sharing the utility I made a few weeks ago to help me and maybe help others when developing SvelteKit projects or Svelte projects that contain over time like many components that perhaps you no longer need So for example these are two applications that I built in the last little while year And if you look inside a project directory this probably looks similar to what many of us have, which is a source folder with a lib, components, and then in this case, many, many dozens, I don't know, 100 components. And sometimes you make a component and then you think of a better way to use it or you discard it and and then you you know you go back to your project vs code and you do the old command p and try to find that component that you need or you want to open up. So I wrote a little utility called Molly. And what Molly does is scan through your Svelte project and look for all of the components that are not imported anywhere and then gives you a list of of those components and then offers to move them not delete them but move them to a directory not in source but in the project group called unused and and then if you want to you can you can undo it running a little script or eventually you could just delete them. So the idea is, well, it's pretty simple. Molly helps you tidy up unused svelte components in your project, which some say sparks joy. So let me give you a little demo of how Molly works. And to be clear, on NPM, it's little Molly, because Molly was already taken. So let's go to here. Here is a... actually, let's look at this one. Okay. So, to install Molly, maybe that's actually where to start first. There are a few ways. We can install Molly, little Molly, globally, or as a dev dependency. I'm going to do that. So we'll

 I used npm so it's going to take longer. Here let's. Right. And we can also run it using npx little molly. So let's try that way. Okay, so in this project, what Molly does is scan the source folder, looking for unused components and found quite a few. So there are a couple dozen. Do I want to move these to unused? Say yes. And so it moved them to the unused folder, which looks like this. So here we have in our project all of the components that in this project are not imported anywhere and they're in unused. Now if I did this and then I think, well actually I want them to go back to where they were, I can do that pretty easily by running the undo script. And before I do, notice the haiku. You get a random haiku. Unused files depart, space clears for new creations, tidy projects hard. If I want to undo these components being moved into unused, just run undo. oh wait a minute oh sorry underscore and there they go away they are they go back to where they were except it's complaining about some okay this is on an experimental branch usually it works but i'm doing a demo So that is Molly in a nutshell And are there any questions Great Thank you for presenting So it seems to me like oh by the way feel free to share your repository and scripts in the chat. So it sounds like Molly does some helpful cleanup in your projects. I would imagine if you're writing a lot of custom components and you're not consuming a design system of sorts, you'll likely run into dozens of components in your projects. I think that in Vite projects, if they're not being imported, it won't cause unnecessary bloats to your production applications. This is more so a code-based cleanup tool, right? Exactly, yeah. The tree shaking that Vite does, and I talk about this in the repo, handles it. So this is not about bundle size, efficiency, or performance. This is just, you know, command P, and then, you know, you see a bunch of components that you're not using anyways. they don't need to appear there. So it's just a question of tidying up the code base for your own cognitive benefit as a developer. Very cool. And I like how you move things to an unused folder in case someone wants to preserve or refactor those components for later use. So it's not immediately deleting things. It's just moving them out. Exactly. And it actually never deletes anything. You can delete that yourself in unused. And then if you want to undo, it creates a bash script and also for windows and mac actually the windows one might have an issue i'm working on it with another developer or a user who reported an issue but if you if you run the undo script it will move the components back to where um whatever uh nested folder inside of source or lib that they were before. So it's non-destructive and undoable. Yeah, it's very cool. A question I have is it works just with Svelte files or with files in general? At the moment, it's only with Svelte files. So the source, if you... Here, I'll show you the source. I mean, it's in the repo, but... But I actually wonder what you think, because I only develop in SvelteKit now. I used to write in React. And I think there no reason why Molly couldn do the same thing with React and Vue They all component libraries or frameworks or whatever So it's just scanning based on the extension. Well, in one case. And yeah. Yeah, I can see why it's deliberately for Svelte files. Because they're single file components, You can scan static analysis using the extension because every component has a default export. But in React, you can have multiple component exports in a single file. Or in the case of JavaScript utilities, you may also have many named exports, in which case you'll probably need some more robust AST traversal, which can be a bit of work, but it may be as useful to some people. Either way, we're saved by tree shaking, but cleaning up unused functions, that's an interesting problem in itself. yeah thank you and and i you know this i thought i thought about what you what you said and i'm i haven't used react in a while so i wasn't sure if that would be a a rabbit hole too deep to to dig so yeah just yeah i mean i actually just asked no for react because i think it's illegal to talk about react here but i mean it's fine no it was more about like for example if i have some TypeScript file that I have lying around in my.project. And maybe I had a store stored somewhere and I stopped using it. And I wonder if these could help find me those files too. Right, right. Yeah, there's definitely room for improvement. One other thing that I encountered is the undo script. This week I had a user report that it didn't work. uh for him and he was on windows and if you're not using uh wsl and windows 10 or 11 then yeah bash isn't isn't a thing so uh rewrote molly to create a batch bat version of the undo script so oh and one other thing that i i am happy to include is um there are no um under features Yeah, there are zero NPM dependencies. So everything that Molly does is using built node APIs So which was an interesting experience because often when you writing things it easy to reach for something that you maybe don't need. So, yeah, I saw that you even had like custom ASCII code for the, for coloring the console, which is interesting because as you've said it's easy to reach for something like chalk or something else which maybe you don't need it because maybe you just want a couple of colors so you are bringing a whole load of dependency and that also has security concern because obviously every dependency that you install port comes with another load of dependency so very cool yeah that's an excellent point yeah and and i i don't know what your experience has been but i often when you have a even a simple project and you change node versions or you change architectures npm complains that such and such wasn't built for this architecture So, yeah, I feel more and more if you can do it in vanilla Node, it might save you time in the future. yeah cool and thanks pal for bringing up the security feature it's not necessarily important to be 100 dependency free but there's a big helpful implication there with security because dependency bombing is a thing in the node ecosystem and their tools getting better better at preventative security auditing versus like reactive security auditing because when you run npm audit and you see vulnerabilities it's too late you got them now you got to deal with them but preventative auditing is inspecting applications, looking at their dependencies, and clearly little Molly has none. Speaking of preventive security in Node.js, I want to do a quick shout out because I think it's really important and it's a really cool project. It's called Socket, socket.dev, because usually we are used to something like Snyk that basically warn you about reported vulnerabilities. And instead, Socket took a different approach and actually analyzed MPMP.

 packages. They are also using artificial intelligence, but we don't go to their truth now. But it's a very cool project and can really help you with, even with, how can I say, with vulnerability tests that are not directly in your package, but in their package dependencies. So very, very cool. Okay. And with that said, thank you so much, Rene, for presenting. Thank you. It was a pleasure. Cool. And now we're going to head back to this week in Svelte. Moving on to this week in discussions. Usually discussions are pulled from the Discord chat, and sometimes they're sort of like in subtext. Usually people are asking certain questions and they come up in a certain frequency. And then there's this underlying discussion that can be had about that. And this week's discussion is, when learning about web development for the first time, there's a lot to learn. What would you consider to be universally useful advice for beginners? Universally useful advice, because I can only imagine, like, there's, in some ways, web development has become more complex nowadays, but in some ways it has become easier. And the question every beginner has is, what do I learn first? What order do I learn? Do I need to be an expert before I can build a website? And there's a lot of tech influencers now more than ever. Like the past three years has been a skyrocketing boom of tech influencers, all saying a lot of things. So my question for everyone today is, what would you consider to be universally useful something that isn't too opinionated, but can help someone in the long run. And I have a few points to get us started. One of them is for me, if you're learning front-end and full-stack, this is, of course, this week in Svelte. Svelte is a front-end framework. So I'm going to have some bias towards front-end advice. Things are slightly different if you're learning back-end or APIs or databases. But for front-end, I think the best way to learn is by staying motivated and building a project that's meaningful to you. So for example, a replica social media application, if you don't have any ideas, because those will cover most of the full stack concepts And you can get started once you have a general grasp of what needed especially HTML CSS and JavaScript And when you begin it usually starts with like some small projects Getting something onto a screen is the most important, to me at least. If you're learning HTML, for example, get a notepad open, type in HTML, get that onto a screen, get a hello world, and then you build on top of that from a basic example to a more robust one that's more compliant and following standards and everyone feel free to join us on stage if you'd like to pitch in your universally useful advice or you can just type in the chat and i'll read it out loud yeah definitely starting from the root i think is something very important because Because very often people tend to, especially these days, people tend to just jump on the new cool thing, even if they don't know the roots. And I think that might be detrimental because at that point is already too late. Maybe you start to see things that you don't know that is not the normal. example, when I was starting to learn React, for me, the fact that I was able to write HTML tags inside a JavaScript file was mind-blowing. And I didn't even know how to replicate these things. Like, I used to go to the React homepage just to be able to write JSX because I didn't know how to set up the whole thing to write JSX inside my local environment. So start from scratch. I think it's a good suggestion. And obviously the other suggestion that you mentioned is very important because if you try to make something that you care about you will be 100% more motivated like if you are doing a to-do list maybe if you need it but if you are doing something that you don't care about you will very easily get bored and just leave it while if you are doing something that you really need it can really motivate you Yes I think it a balancing act When it comes to motivation what I love about web development is the feedback loop for learning is extremely small Because as I showed here, writing a bunch of HTML in a text file will get something onto a web browser in seconds. The feedback loop is very small. There's no inherent compile step. There's no months of learning just to get something onto a screen. you can get something on a screen in minutes just with like four lines of code. The hard part is building on top of those concepts and deciding, hey, should I learn how to run before I learn how to walk? Should I jump into JavaScript or should I jump into Svelte before jumping into JavaScript? You'll definitely face some issues. So it's a balancing act of getting that feedback loop to a small time, but also pledging to yourself that you'll go back and learn the concepts in not their entirety, but adequately enough so you can build on top of that foundation. And that foundation is a very, well, it's an infinite process because we're learning even today. Like I've been developing for over 10 years and I'm still learning every day. All of us are constantly learning. And being able to train ourselves to learn as efficiently as we can takes a while. It takes a career time. And that's what you have to aspire towards. Not towards shortcuts and quick solutions, but towards a better way to teach yourself things. Yeah, also because, I mean, the ecosystem is constantly changing. So even if you know 100% of JavaScript, which is impossible, like tomorrow, you might not know anything about it because the ecosystem is in constant change. So the very smart thing to do is learn how to learn. And that's very important. Yep, couldn't agree more. Let's look at the chat for a moment. captain writes learn one thing ends oh sorry learn where one thing ends and where another begins the boundary of what the document object model versus the browser versus apis versus javascript language you should build real things solve real challenges as they come up and don't get stuck just watching tutorials don't get emotionally attached to any tech or framework they all go away eventually but learn the principles behind things exactly that's a good point because if you follow the tutorial which may or may not be up to date that hand experience might become a crutch of sorts where you not actually being curious and learning You just following what someone else tells you to do And if you get in that constant loop of following someone else guide then you don nurture that skill of seeking information on your own and learning from it So that's a trap to avoid. And I'm being... Also, don't forget about the fact that tutorials are a bit artificial, we can say. Like, obviously, if you're following a tutorial, you might think that the people running the tutorial are super smarter because they don't make any error. It's not like this. Like, they are actually prepared for doing the tutorial. So, obviously, they will not make an error on stream, on video. but errors happens and it's completely normal and being able to overcome those errors is another important skill yep not this is not to say that all tutorials are bad that's not true there are some excellent video producers who are making great tutorials the important thing really is the mindset when you're watching a tutorial and there's a concept you don't quite get just keep note of it and come back to it later on your own time and research for example if someone on the tutorial shows you how to make a startup a node.js server then and you don't quite understand it but you like the feedback loop that's okay follow the tutorial start that node.js server get something working and then in your free time go back and understand why that works what is the node.js api why did that server start with that command and then you can build on top of that it's all about the mindset more so than the content you're watching yeah absolutely and the reason I have learn.svelte.dev on screen is because maybe I'm biased, but I feel like the Svelte kit and Svelte tutorial here on my screen on learn.svelte.dev, this sets a really high standard for tutorials on the internet today. There's nothing, well, more and more we're seeing more tutorials like this because this is sort of like a golden standard. It's got a code editor in your browser, it's got a live web view of what's being rendered, and it's actually using Vite and web containers in the browser. So this is like the full stack editing experience, and you can completely skip learning how to set up a code or text editor or installing node modules. This gets you straight through the lessons of Svelte in the most efficient way possible. So if you're learning Svelte today, this is definitely the very first place you should take a look at. Yeah, also I want also to say that in my opinion,

 learning Svelte is also important because it's very, very close to raw HTML, JavaScript, and CSS. So there are differences, but while you learn Svelte, you can very well learn JavaScript, HTML, and CSS. That is also true. Svelte is, because it's like HTML-like, it's actually closer to web standards than most frameworks. So when you learn with Svelte, like learning how to run before learning how to walk, Svelte actually does nudge you in the direction of HTML. It nudges you in the direction of standard CSS and also standard JavaScript in many ways, not completely, but very, very close to it. So you can actually go back and forth between Mozilla Developer Network, learning HTML and CSS, and then back to Svelte. And you'll find that the concepts are almost 99% the same. I mean, I will even stretch it because actually, if you're learning SvelteKit, you will actually learn a bit of Node because like SvelteKit, just use normal requests and response. So that's cool too. Okay. So I guess to wrap up, the universally useful advice is really having the right attitude and mindset. attitude, mindset, and techniques such as pledging to go back and review concepts. Because understanding the concepts that happen between the actual artifacts, like when you write actual code in HTML, what do the HTML tags represent? Going back and reviewing those concepts is part of teaching yourself how to learn things better. So it's not just about doing what you're told or believing what you see. It's also about like going back and validating the facts, the concepts. And on this show, we bring up things like accessibility all the time because the question we ask ourselves is why are we doing this? We don't just go in and do it because it works. We have to do it because it works for someone. It works for something and why it works. So it's all about the mindset and the learning mindset. Yeah, definitely. Captain Wright, two kids have it easy today. Back when I was walking uphill to school, we had to wait till we came back the next day to find out what had or hadn't compiled. Yeah, people used to have nerf fights and sword fights while their code compiled That kind of true today Compiled languages are a thing but it much faster now necessary xkcd quote yeah feel free to put that in the chat you know which one we're talking about let's move on okay next up is this week in questions and answers mostly relating to Svelte so if I don't mind I'll get us started with a toggle switch demonstration. It should be right here. Okay. So the question that we're answering today is toggle switches. How do I make them? What are they useful for? And I've got you covered. So here is what I hope to believe is a very accessible toggle switch, and I'll walk through why that is. Sharing it in the chat and bringing the chat back on screen. So what's going on here? A toggle switch is, this directly relates to our conversation earlier about like form controls and submitting things automatically or instantaneously. The flaw of an input, submitting things instantaneously, is it doesn't quite tell screen readers that this is a button action. Same with a select. If this were to auto-submit, it doesn't quite follow the contract of the select role. But here in front of me, we have some toggle switches. A toggle switch like this one is meant to be a button. When I click on it, it switches on and it is in the on state. And when I click on it again, it switches off. A switch is only doing that. It's a binary state of on or off. You can change the label if you like, but it should only ever be on or off. So let's walk through how we built this. We have two examples here, a synchronous example that does an immediate effect, such as like changing the parameters of an on-screen application. We also have an asynchronous example, which is like in a CRUD application where you're changing something in a backend, and you're waiting for that fetch request to complete. So the asynchronous example down here, I click on on, it has a loading state, and then it completes. I click on off, it has a loading state, and then it completes. That was an artificial one second delay, but that should give you the gist of it I can even change it to two seconds in case that was too fast One two on One two off And now here the switch So let go over these features One, content represents toggle state and labels do not change. The label is this thing up here, dispense french fries. And if I switch it to on, it's not going to suddenly say, now dispensing french fries. If I switch it off, it's not going to say, no longer dispensing french fries. Because it doesn't need to change. This is a binary state, and it should only represent the positive action, which is dispense french fries. Okay, I want that on. We're good. Accessibility is not just about control or keyboard access or screen reader content. It's also about initial content. What is the content you're presenting? Number two, screen reader announces switch so a user has an understanding. This is more correct on Safari, but I can also demonstrate it here in Chrome. because VoiceOver on macOS is designed for Safari. So I'll show it here with that caveat. One, two, three. Is it here? Brave is not responding. Brave is not responding. Brave is not responding. Brave is not responding. VoiceOver off. One, two, three. Okay. brave is not voice over off no problem let's let's show this in safari it's gonna work better there anyways maybe i should ask some questions so yes what would you like to ask everyone's welcome to ask questions as i go through this but i will go through it was just because when i ask questions something doesn't work and then when i get the answer something work oh you have the magic power. Yeah. By the way, I did enable dark mode for this demo, so it should work. I have some CSS down here. Yeah, it works. See? Because the Svelte REPL has a .dark class on the body, so I just changed some CSS variables for dark mode. We're good. Let's try that screen reader again one two three voice all right we're good so first thing I'm going to use my keyboard to tab onto the first toggle switch and the screen reader should react to that State You are current Dispense French fries There we go It now says dispense French fries off switch. It says the label, and then it says the state, which is down here in code. ARIA checked. And then it says switch. And that refers to the role on line 37. Role equals switch. If I press the... Dispense French fries switch. If I press Enter or Spacebar, it now says Off, Dispense French Fries, Switch. If I press Spacebar again, it says On, Dispense French Fries, Switch. The Enter key also works. Since this is a HTML button, Enter key and Spacebar both work. And there you go. That was the Enter key. I'll put VoiceOver off. The third feature is Button has inbuilt interaction behavior. So that was about announcing the switch role, which is special. we had to put that in manually, but also the enter and spacebar keys work. If this were a div and you had to build a toggle switch from scratch, you would have had to manually written a key handler for spacebar and enter key in order to fulfill that switch contract. But if you use an HTML button, it's got you covered. Easy. Finally, ARIA labeled by prevents the button contents off and on. So inside the button, we have the words off and on, but we don't need that for screen readers. We just need that to be displayed visually. So visually, I can see it says off and on, but the screen reader doesn't need that. To fix that, we use ARIA labeled by on line 39. So on line 39, that refers to the ID of line 32, which is the label, and the label dispense french fries gets read instead of the words off and on. If I delete this, the screen reader will say dispense french fries off on switch, and it's just a lot of redundant information. And then some other notes, content can be in any binary language, such as unset or set, disabled, enabled. I happen to be using off and on, but you can also use other sorts of binary language. Keep in mind cultures and right to left languages. Currently, I have the positive state on the right and the negative state on the left. In some cultures and RTL languages, you may want the opposite effect because usually, at least in Western context, when you have a confirmed dialogue, usually the OK button is on the right and the cancel button is on the left. So I'm following that convention, but you may not necessarily want that in your applications. So keep that in mind. Now let's look at some Svelte code. The props don't matter too much, and this is not

 perfectly designed either, but it does get the job done. You can always design different colors as long as the contrast is high. You can design a spinner instead of a loading text. Like here, I wrote switching, and that's not totally pretty, but you can also use a spinner with the right labels and implementation. Let's extend that to two seconds. And finally, to finish up, Let's look at the code. So the switch itself is a button. It has an ID, which is corresponding to the label above it. The type is a button. By default, an HTML button is a type of submit. But by me changing it to a button, I'm also informing the behavior. I don't want this to submit a form or do anything else. I just want it to take an immediate action. That's why I chose type equals button. Now a role, in general, this attribute in HTML is a promise. When you give something a role in HTML, it doesn't come with the features of that role. It just tells a screen reader what kind of interactive element this is. I'm telling the screen reader this is a switch. And then the user of that screen reader has to understand, okay, this is a switch. I know what to do with this. I can press space to toggle it on or enter and toggle it off. But in order for the enter key and space key and the off state and the on state all to work, that's up to us. Setting the role equal to switch alone does not do that. It's just a promise. and we're fulfilling that promise with our interactivity. Line 38 is ARIA checked, another necessity for the switch role. So by filling that switch contract, I need to put in ARIA checked. And that's passed in using local state enabled or external state. Because in my asynchronous example, I'm using the switch component. And on line 33, I'm binding enabled. And I'm setting the async enabled state externally. The application's handling this because it's asynchronous. this. Whereas in the line 24 switch, the instance switch, I'm letting the switch handle its own state. That's just what I decided to do. And feel free to ask questions in the chat or come on stage and I finish up here We have a CSS class ARIA labeled by to hide the contents of the button and of course, our click handler. So when we're handling local state on line 43, we're setting enabled to the opposite of what it was. If this is an asynchronous switch, on line 42, we have a short circuit. So if it's asynchronous due to a prop value being true, we immediately return, and it does not change the state internally. Line 45, we're forwarding the click handler so that the application can control the click interaction and handle external state. So there's a couple of svelte features right there. And then down here, if it's asynchronous and loading, we'll display a loader. My loader happens to just be text, and I'm using aria-live equals polite. Let's bring back the screen reader and show you what that does. Three, two, one. VoiceOver on Safari. Toggles dispense crisps. All right, so now we're on dispense crisps. This is the UK edition. Right now it's toggled on and it's a switch. If I press enter, it says switching. And now it says off dispense crisps switch. Pretty cool. So the reason it uses Aria Life Polite, this is like a second level priority of overtaking the screen reader. So as soon as it's in that loading state, it has to tell me something. Let's toggle it one more time. It says switching. on dispense crisps. Even though I am focused on the switch, it still displays this div off to the side that says switching and ARIA Live reads it out loud to me, even though that loading text is not focused. So that's the power of ARIA Live polite. I can do assertive, but I don't recommend that. If I do assertive, this is going to read the loading state aggressively. It's going to stop every other sort of announcement and just focus on that announcement instead. So that's why I chose polite. I don't know. Cyril in the chat writes, try Canada. It might just say sorry ten times and then fail. I don't know. Who knows I stick with polite And then finally we have some CSS The CSS itself is not too special but I did make some personal design decisions here I have a very thick border, lots of high contrast. I chose black and white because it's always easy to prototype in black and white. And down here, my decision for the on-off state was to use an actual attribute selector. So when the role is switch and ARIA checked is false, I want the first child, which is the off square. to be this color and this background color. And if ARIA checked is true, I want the last child, which is the on square, to be this color and this background color. You don't have to do it this way with attribute selectors, but it does give a lot of determination to the CSS. It's like, oh, I intentionally put the CSS there based on ARIA checked's values. So that's the end of it. And with this, you have yourself a toggle switch. Does anyone have any questions? This is this style of writing CSS. I tend to see these referred as semantic CSS. It's an idea from B1, which is very cool guy. It's killing around a lot of discords. And it's I think very cool because it also kind of invites you to write accessible HTML to make these semantic CSS work. That's right. I was sort of subconsciously following that rule. But yeah, semantic CSS selectors does sound very fitting for the purpose of drives. And a question I have is, is the, like, you are specifying a label with the for attribute, and then you also specifying the labeled by isn that redundant or is just better to have it double What better way to answer the question than to show you I going to comment out line 39 Well I can do that Let me just delete it. I'll just delete it. So now that the ARIA labeled by is gone, let's see what the screen reader does. VoiceOver on Safari. At least on Safari. Obviously, when you're testing screen readers, it's very important to test JAWS as well. We covered this in the last meetup. JAWS and VDA. They all have slightly different behaviors. So let's go over this one. So now it says on, off, on, dispense French fries switch. That's a lot of stuff. And if I press, if I click on it or press enter, now it says on, off, on, dispense French fries switch. That's really confusing. So if I bring back the ARIA labeled by, I guess, Paolo, your question was, does the for attribute in the label do this for you? And clearly the answer is no. The screen reader doesn't really regard that because when I'm focused on the button element, it doesn't look for the label in a backwards sense. I think the for attribute is more of a forwards capability if I'm focused on the label itself. State. Switch. This is interesting. Controls. Let's try one more time. state you are dispense crisps dispense french all right now it says dispense french fries off switch so because i'm using aria labeled by to go back to the label instead of reading the contents of the button it's now only reading the contents of the label above it instead of that very confusing like on off on switch and then on off on switch you're like what is it on or is it off yeah pretty good okay that's the switch well thank you for watching the switch demo and that is it we'll see you next time