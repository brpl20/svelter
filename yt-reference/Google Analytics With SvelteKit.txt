 Hey friends! Today we're going to learn how to integrate Google Analytics with SvelteKit, so let's get to it. So let's set up Google Analytics first, and if you already know how Google Analytics work, and if you have your measurement ID, go to the post and check out the code for SvelteKit, then you're done in two minutes maybe. But yeah, for the rest of you who are curious and who never set it up, let me go over the process, how I figured these things out in the first place, because you always look up for these things and tutorials, but you really don't think about or learn how to read documentation. So the first thing I did was do a search for the Google Analytics documentation and that led me to this page and from here it's really logical so you can set up Google Analytics, go to website and web apps and this is where things get a bit confusing. Billion dollar company by the way. So we can go to get started and then you can go to get started Google Analytics. So you think one of these options is for you, even the web app, but no, you have to go to set up analytics for a website or app, which leads you to a totally different page. And here is going to give you some instructions with pretty pictures, which are also included in the post. So let me close that. And another thing is we need to think about what we want. So the first step is to get Google Analytics working and that's fine. So the next one is what you really want to do. So we want to measure the views. And then if we look at this page, we can see how to So we need a couple of things so we can go read, uh-huh, measure views, right? So we can go to this and this is going to help you figure out how to set up measuring page views. And this is really a nice way so you can learn how to read documentation so you can be self-sufficient so you don't need to constantly look every single thing up, right? So this is really a thing you have to practice. Maybe you waste a couple of minutes or if you can't figure it out, then just look it up, right? So assuming you have a Google account, the next step would be to go to your Google Analytics. So analyticsgoogle.com. And you might be prompted to create an account here. And the steps are going to be the same. But if you aren't, you can go to the admin. I already have an example account here. And I'm just going to use some dummy data because I don't really have a real site to show you this on. So you can go create account. And then let's give it a name example. And you can turn these things off depending on you We can go next give it another name this is just your currency for google analytics and etc google analytics is free so you don have to worry about paying for everything so yeah this is optional so you can just say create sign your soul to google we've read this entire thing right yep yeah then let's create it so here is the data streams you have to add so data streams is something new i think to google analytics for and if you get lost always remember that these options are going to be in your properties column right here which you're going to do because you need a degree to navigate this user interface to be honest so yeah we can go to the data streams and here you can pick web and this is going to create a data stream so i can just give it the name of my site this is an example and then let's give it an example so here it shows you what it tracks so page views scrolls etc but you can configure this and yeah let's just create the stream and now you're going to be in the web stream details pane but remember if you get lost whatever click on data streams here it is just click on it and you're going to get to the same page trust me this is confused yeah so this is the only important thing and don't worry this isn't private this is exposed to the client anyhow so this is the only thing you're going to need and when you get your measurement id you also can read about how to add it to your page under the tagging instructions so you can add a script to your site like this which you're going to do in a minute but yeah let's do that in cell kit so in swell kit here i'm using a regular project so nothing special and let me just go here in the post we're going to create a nice component so we can include it in our layout so it's included for every page of our site right so inside the source folder let's create a lib folder and then we're going to create analytics well so lib and let the exwelt and then we can also install the types for the gtag manager so if you go to your terminal to install types when the library is in type you have to install external typings yes so i'm using pnpm but npm works the same so we can say install development dependencies types gtag js yes you can just install that and it's going to be awesome having type completions so you're not in the dark, right? Yeah, and then I can close the terminal for now. So let add the analytics so we can say import We going to need the page from the Svelte Store So let see app stores and then we going to use this reactive block which is going to run this code inside every time page url ref changes right and this is if you're unfamiliar with how svelte works and these curly boys are also optional you can just type this or you can even use a ternary if you want but yeah i think this is more readable so gtag is located on window gtag so we need to make sure this isn't undefined because swellkit executes your code in the server and client context so you might get into weird issues so we can say if type of g tag isn't undefined and then we're going to change the config for gtag and then you can just include your measurement id so you can go here you can copy it over you can store it in an environment variable up to you right yeah so we can do this and then for the third argument you're going to pass some options and thanks to typescript you can press ctrl spacebar and you're going to have some auto completion you're going to see we have page title so we get this from the document title and i think google analytics does this already but let's just make sure right it won't hurt yeah so for the page path we need to say from the store that's why we use the dollar sign page url crap and every time this changes is going to rerun this block so yeah that's it for that we just need to include the script in our head so we can for example go to app.html we can include it here if you want but i want to keep things neat and tidy in one place so if i scroll here we can see this is from the documentation so we can say They svelte head. And then we can just copy over this entire thing. Yeah. So if you remember, here it is. And that's how we can read the documentation and get to these conclusions, right? Yeah. So we can include this. This is going to auto format. So another interesting thing is the function g tag. So remember, this is on the window, but you might be thinking it accepts arguments, but how is this possible? So this is really an awesome short JavaScript lesson we can go into, if I remember how to do it right. So for example, let's say we have a function gtag and it returns I don know just an empty string It not important So you can say console dear so we can get the properties because functions are just objects in JavaScript Yeah so we can say gtag and we get back the object So you can see on the object, there are arguments, which are none, the color and the length. So let's see, if we go here, we can say gtag and we can say argument and it should return argument, right? Actually, it's not going to return because we're already returning this, But yeah, you get the point, right? If we go here, for example, let me just function gtag. If we say console log arguments, remember? And we can do this gtag. We can say argument and you should log it out, right? And that's how that works. So yeah, that was a brief tangent, but very interesting, right? So let's close this and then let's continue. So we can add this to our layout because we want this to be included for every page in our application. So if I go here, here's how simple it is. So we can go to routes and then create double underscore layout dot 12. Let me close the sidebar. Yeah, let's say the script tag. And let's use automagic imports so we don't struggle. So you can just say analytics. When you press enter, TypeScript is going to know where to import it from. Yeah. And also don't forget your slot. So it displays on the page. we can save this yes so let me start the development server so you can see what's going on and if i go to localhost 3000 here it is so if i open the developer tools let me just so you can see it so pay attention we're in the head and here is our script that we included in self-head so another thing i want to mention to you if you go to console you're going to see fail to load resource error block by client and this is because if you're using an ad blocker or a browser like brave that has this shield here your google analytics script is unfortunately going to get blocked and there's nothing you can do about it but yeah now you can get your data you might have to wait half an hour so you can go to your analytics just close this and if you go to reports you can see real-time data among other things if you go here give it a second and yeah that's it So that's how easy it was to set up Google Analytics with Cellcate. Hope you learned something and catch me in the next one.