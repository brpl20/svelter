 Really? Okay. Alright, alright, well, I'll, um, I'll, like, I'll put subtitles or something. So we had the first video where it was me and Kevin just, like, trying to fix the AV, and then the screen froze. You saw it, right? I watched that one. So clearly we're learning our ropes as a meetup, but we'll get better. Okay. So, all right. So introducing SSG. I'm Swix, Sean, and yeah. So the whole thing of the whole explanation of this is why Zephyr isn't good enough with a nice big X for what it is. And so let's explain a little bit. I have no idea what people's levels are. Do people use Sapper, know what Sapper is? Who doesn't know what Sapper is? Yeah? Okay. A few? Okay. So there's Svelte, which is the framework that compiles on the component level, and then there's Sapper, which is the server-side rendering sort of wrapper around all of this, and it works on a recommended structure, which is available in the Sapper template repo. and the way I mean obviously we care about server side rendering for SEO and performance the way that Cypro works is that a person a viewer comes in makes a request to the server knows how to route it accordingly then it prefetches that data that's obviously very important if you want to pre-render anything so it prefetches that data then it renders the page and then it sends the page back out to the user so that's the rough flow and that's fine for a server app. Sapper's whole goal is to be a Next.js clone from the React ecosystem. That's fine for a server rendered app, but it's not so fine for static sites and that's something that I care about given where I work. And so Sapper has a static export mode, which is kind of like a second thought, like an afterthought. It's kind of slapped onto this because theoretically, So basically, if you have that server flow, then the only thing you need to do is static export of files which means no running server You just export everything to HTML files and JS files and then you host it up on a wonderful service which you can pick on your own accord And the idea is simplicity, right? So to layer on static export, the only thing you need to do is have the save and crawl extra functionality on there. So you have that running server going on, and then you have an entry point for requests. You go through all of that. You generate the page. Then you crawl through the generated page for other links, and then you just crawl and crawl and crawl and crawl to the rest of your site. Yeah? And that way you generate this map of your entire site and export individual files for every single one of them. And this way, when your user hits that page, they can hydrate and all that. I trust that you get it. Okay, so because I don't have time to explain more. But definitely come up to me afterwards if you have questions. Okay, so the first thing I ran into when starting to explore Sapper for static export is this race condition. I have reported it. Basically, the idea is that different parts, like that flow seems to make sense until you actually figure out that parts of these move at different speeds. So the requests are very cheap to fire off, but saving actually gets bottlenecked. and Sapper kills itself or terminates this process. Let's not use that word. Sapper terminates the process once all the requests have been fired. Unfortunately, saving takes a bit more time to save. So we had, I immediately, me and a couple other, like we're trying to push static export up to a few tens of thousands of pages. You get into this situation where you fired off all the requests and you terminate a process, but you still have some pages left to save and the process is terminated, so it just doesn't save anything. So you're left with incomplete data. So we have an issue there, and there's a PR. That's the first issue. The second issue is also the bottleneck of the prefetch. Basically, that's a very expensive operation. You're going out to the network. You're consuming API calls. Some of these things are consuming headless CMS. Like, you have rate limits on these things. You can't make an API call every single time you're hitting one of your sites. And a lot of the ways that, a lot of the demo examples basically hit an index and then search through the index and then get more details on that particular item within that index So that reasonably slow This is fixable Basically split it up You do a pre step at the start Get all the index data, save it on disk or something, and then it's slightly cheaper to prefetch the data. Obviously, you can only move things around. You can't really sort of decrease things, but you can definitely reduce duplication by shifting all indexing up front. There's the other thing about the file structure. So they recommend the file structure is that you're co-locating your data endpoints alongside of the Svelte pages that will be consuming them. This isn't a hard requirement, so there are ways to fix that. But I did find there's a little bit of boilerplate to work with. So that was a bad slide. So as I was sort of working through this, I actually wrote a blog post about this, and I called it Bad Ways to Get Data. And this is more just like brainstorming because the whole premise was that Sapper was supposed to be extremely fast at server rendering, right? Like it's a template language. You're just concatenating strings, and it's supposed to be really, really fast. And I found it like 100 times slower than Gatsby. So I was trying to figure out why that was. And so I was kind of working through the math. Actually, even worse. Yeah, no. Well, no. Anyway, I don't know what the math was. And then apart from the data workflow, I also had issues with the boilerplate. Svelte's whole motto is do more or less code. And there is a lot of boilerplate in the default Sapper structure. So I was like, there's an opportunity to get rid of that. So that's the premise I approached SSG with. It's a zero, it's right now it's a zero config Sapper overlay, specifically focused on the problem with static export. It has, it ships some default rollup plugins just because it's zero config, right? So let's just move the defaults a little bit towards what people want to use. So I add preprocessing in, which means you can use TypeScript in your script, as well as MDX, MD specs, because of Penguin. And ejectable defaults, we'll talk a little bit about that, and then reusable data plugins. So these are the standard things that you want to see in a static site generator. Um, I recently learned how to name squat on NPM. So, uh, it actually is NPM, uh, the SSG package on NPM. Okay So um so regarding this boilerplate thing I can you can actually just reduce a lot of defaults and consume it subsume it all under a single dependency and that the SSG dependency right there so that you only work on your code, right? And the stuff that you want to customize, you eject, and then you shadow that. So this is a very, very similar philosophy going on in Gatsby, and I think it should be more prevalent in a lot of our tooling. Like, you're not doing anything special, don't have the code. Right. That's a very simple principle. Okay, so this is where we have the live demo. I broke my own demo because I've been working on this thing. And this is a foreign laptop. But I have stuff running, and we'll see how far we can get. Okay? But no promises. Okay, so... The what? So my work laptop is in the shop because the hard drive crashed. so this is actually Oleg's laptop yeah alright so also ooh nice so oh dear okay I'm trying to I always try to make an emphasis that I'm starting from complete scratch so I just created a meetup repo right I'm going to cd into that meetup repo and I'm going to open it up with code and I just like to me this is the ideal sort of developer experience and it's something that I happen to work on daily so I just gone all the shortcuts on my computer isn't working got it sorry I already took over your system okay um so so empty empty folder everyone's familiar with this uh should i should i switch to a light theme are people okay with this let me let me try because i've been told that light theme is usually like the best uh especially for a demo yeah all right what that's too bright I'll just do that. Well, no, no, it's fine. Ah, OK. Sorry. I mean, OK. Stress out. All right, I'm stressing myself out for no good reason. OK, actually, I'm going to sit because there's no point in me standing. So I'm going to yarn.

 So the first thing is yarn init-y, yarn add SSG. So that's the SSG folder. And it comes with some defaults that you'll probably want to have in a static site. So I've just kind of bundled this in. So it is heavier than a regular Svelte app. I should probably work on that as well. But right now it's an overlay over a sapper. And eventually the goal is to actually get rid of sapper. if it's worth it. I'm not sure yet. So single dependency, that's the idea. And there are two commands that you want to run, which is a script, npm scripts. I hope people can see this. Okay. So start, it's ssgdev, and then ssg export for the build. Ah, you do have spectacle. Build, okay. and so the the basic idea is that this is a zero config sapper overlay right so i should be able to specify my source my routes and say index.svelte and say do you have your oh look at that no hello world booyah actually let's put in some svelte in this script let text equals to svelte and then yeah so people are familiar with this mode of development I really like the authoring experience just because it really feels like you're writing regular HTML except for the templating bit okay so So, moment of truth. Oh, okay. So I did not manage to rip out the config. So I have a config, but I assume the config everywhere I go. But I'm just going to let it be empty right now. This works in my previous option click. Hey! Right so for nothing you get a you just write your code right Single dependency and you get that experience So I think this is the kind of developer experience we want to slowly move the ecosystem towards And then let get a little bit more going. So we have, okay, well, so there is an ejecting system. So yarn SSG eject. And this gives you a bunch of files that are being shadowed internally. Some of these are being shadowed. So there's a rollup configuration inside of there. There's a client.js, server.js. If you use Sapper, you'll be very familiar with all of these files. But what I'm going to do is I'm going to pick out some SSG specific files. So I'm going to pick out this, this, this. And I think I'm happy with that. So that will copy it out and scaffold things. I'm also going to have a simple readme. I don't know. Hello, Svelte Society. This is new text. I don't know. Okay. Just to show you it's markdown. And heck it, why not? Let's have some code in there. console.log.wat. Okay. So, I'm going to get rid of this index.svelte that we had before, and I'm going to rename this to sample index.svelte. Let's see. Let's look at what other changes I've done over here. So, this is the scaffolded component that I had. And the only thing, the only difference, your shortcuts are different from mine. The only thing different, So I forked Sapper to add this component. So Sapper has a dist.fetch method to go fetch data in the preload section. Remember in that diagram I showed you? I wrote a simple little overlay over that fetch method to restrict what you can do so you can only fetch data from SSG. So here we're going to fetch the default data. By default, it gets the SSG core data. The core data plugin basically just goes through and looks for anything marked down and just consumes it as data. and processes it for you. So I just wanted this to be zero config. Originally, this lived as a separate plugin that you set up by yourself. But I was just like, that's good. I'll just provide it for you. And we're just going to request the index by default. If we wanted to request anything special, for example, like on this details page, we can request the ID by the slug of that ID Okay so I think this is runnable Let try So what this does is it goes through, sets up that data pipeline that I talked about, and the core data plugin goes through for all the readme files in your project and then exposes it. So let's see what this looks like. so I've basically just logged it out over here and that's an indication of what the index is the idea for me I'm not 100% sure about this one but basically the idea is that indexes should be easy to query and then the details can be as expensive as you want so I had a very and this is relevant here because when I'm processing this readme file, this readme file not only has markdown processing, but it also has code in here. And I added some extra niceties to add syntax highlighting to this code. And that actually takes a lot more processing time. So you do not want to do this all the way up front because that would just make your processing time very slow. And it's hard to parallelize. You want to have a cheap index and then you want to have each individual request perform that work so you can parallelize and you can defer that work as well. so the big reveal I guess is if I go to slash readme let's see let's see if I can fix this over here I'm not I'm not a hundred percent confident let's see what the error message is no file for readme found what are you talking about Because it's not lowercase. It's still a lowercase. Uh... In the JSON it was lowercase? No, it's uppercased here. So one way to debug it, I'm still exposing this sort of data fetching thing, so you can actually do some console logging of the data fetching coming in and out. I'm just not really sure that... Let me see. It could be that, but I do look up my slugs. So I'm actually tempted to hide this inside of the default server that I provide. Oh, the slug is small lowercase. You're right. So clever It not even his thing and he already figured it out Read me Can you not lowercase it Wait, what's... It's not the end of the world if I don't figure this out. Ah. Okay, so how do I have to clear cache? Yay! With some... I don't know why this happens. But the idea is no configuration. I have readme transforming to data being read out in a very flexible format in these pages. So that's the idea of a data pipeline on top of SAPR. In future, it could be extended to other frameworks because why not? And there's a whole other, there's other stuff going on as well. So what else I want to cover with you, so this is obviously in production in my own site where this is, you can actually see how I use it for my own site. You have a question? Can you just recap really quick that page so this is static file this? yeah this is just all rendered all there yeah yeah how do I do this? there's no yeah see h1 although this is not the best I mean that doesn't yeah this is the best tell that you can actually see everything in just the HTML request. Yeah, so I mean, that's server rendering. That's the basic, and that's what you get from Sapper. So the base benefit is this is a zero config overlay over Sapper, and then the other thing is the data pipeline that I'm trying to demo here. So it is available on my own site. So there's a plug-in system. You can write your own plug-ins and make it more extendable, and this is how I made my own site, And I did the bulk of this work in September. And I basically run the whole thing kind of, you know, on the standards in a Netlify Jamstack manner. So that's pretty cool. The Svelte community site is also...

 running on this as well, and you're welcome to come participate. And this is, by the way, a great way to learn about community stuff. So if you want to look at boilerplate, a code... Oh, I just went back for some reason. And the idea is this, right? This is all managed in a static file, but we can pipe it through JavaScript, and through JavaScript we can do dynamic elements as well. And that's the virtue of the whole new dynamic approach. that me, Gerald, and Bud, and a bunch of other people here work on on a daily basis, that there is no running server. It's cheap to host, and that's so on and so forth. Okay, so just to cap this off, because I feel like I've gone on long enough, the pipeline is I really want to... I don't think it's ready for launch yet. I really want to get to the point of incremental builds, and this is kind of the big kahuna of static site generators where if you have a lot of sites, you're building every single page every single time, and that takes very long. It's expensive and slow. So you want to get to a point where if there's just a... You want to store the index. You diff the index, and then you only run the diff through the whole system. So it's theoretically possible, just no one's prioritized it. I might as well just prioritize that. And v1, I think I want to explore dropping sapper. And part of this is the goal of delivering zero kilobytes of JS for people who don use it I think that something that Rich is interested in as well I interested in reviving Sapper Studio to go along with this because I think that's a really good authoring experience as well. I'm interested in going for speed. What I have, the index data slice thing, is basically a shitty implementation of GraphQL. So I want to explore using GraphQL for that as well. As well as full MND compatibility because I'm like 90% there. and then in V2 I want to do other more advanced stuff that we don't have to talk about yet but I want to use their plugins yeah because why reinvent things and you know Zach Leatherman who created Leventy has expressed interest in adopting Spout as one of the templating languages as well so I don't know where that goes we might merge or we might just have different visions. We might just take some time to experiment. Sure. Yeah. Yeah. Yeah. I mean, you know, absolutely. I think more people should experiment in this place. Honestly, I'm doing this because no one's done it yet. So I'm just kind of scratching my own itch. Also, it's just like really cool to like dig into sappers, internals, and fork it for yourself for your own needs. I think it's a great way to learn. All right, so, yeah, npm install SSG. Thank you very much. Any questions? I can take...