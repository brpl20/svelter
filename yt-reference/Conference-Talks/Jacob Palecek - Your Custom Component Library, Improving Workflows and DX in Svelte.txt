 Hi, my name is Jacob and Ivan previously talked about his colleagues that he convinced to like Svelte. I'm one of those people. In general, my background is more in systems engineering and backend development, but Svelte was the first frontend library I used that I actually enjoyed. and the reason was its extensibility which is the topic of my talk a bit it's your custom component library how you can improve workflows and the developer experience in general in svelte so what i'm gonna do is first a little bit what is a component library what are those things for those that don't know why did we build our own library well calling it a library is a little bit of an overstatement but it's very useful utility and a little bit on how it works and finally some type of get inspired that should show how easy it is to build things with svelte especially on the tooling side so what's a component library for those that don't know um history ladle storybook storybook being of course the most famous one are really useful tools that basically allow you to view and test and use components that you build in your front-end application in isolation both for testing but also for communication with clients and the status quo in Svelte and that's been sure apparently the status quo in Svelte when we started the project that we have for our customer currently Storybook was supported but it didn't work well that only changed recently when they started to fully embrace VIT but at the time it didn't work it was pretty clunky and alternatives exist like Histoire which is much better but still it asks quite a lot of develop a lot from developers if you want to test your components you need to put in a lot of stuff manually and as I said storybook is now a little bit better it supports Vita out of the box but if you look at the UI it's pretty clear that's a screenshot of a storybook example that this is pretty heavyweight it asks you to put in a lot of information and we wanted something much more lightweight so even the modern solutions actually don't take advantage of all the things that you can do with Svelte. That's an example of Histoire. For example, here, if you want to have a little bit of the source code visible in your library, you still need to manually add it. You say const source equals that, which seems a little bit of a hassle for a developer that actually just wants to write code and not write documentation because that's no fun, which is really why we built our own. For the customer, the Svelte project we have is pretty critical, it's really important to them, which means minimizing external dependencies and libraries wherever we can, because it's not supposed to run once, it's supposed to run for many years, being maintained continuously, and the fewer dependencies you have, the better it is. As I said previously, the solutions at the time weren't all that well supported, and we still wanted to have the tool to have some direct feedback with the designers, and because some of the features are really complex, we wanted to have a way to test it in isolation first. And it turns out, writing a library like that is much easier than you think, at least in Svelte. So that's the screenshot connection cancelling again. But the obligatory Eterotech ads, if you're looking for a job, hit us up. We're always very, very happy to find talented developers. And I'd like to show you a little bit what we call Sveld Stage, which is the public version of our small internal library that we just recently published. It's super minimalist, which is a nice way of saying it's still a work in progress. It's very much developer first, so it's not about pixel peeping and design necessarily. And you can find it under this link, but more on that later. As I said, it's still heavily work in progress. Don't depend on it fully yet. And it makes some assumptions like using TypeScript. Though again, why wouldn't anybody use TypeScript if you have an argument? I'd like to hear it and prove you wrong. And only basic features implemented, but quite a few cool things around the construction. I'm going to show you some of those later. And we had a few design goals in mind, partially because Storybook exists and we didn't want to reinvent the wheel completely. We didn't want to do that from scratch again. So we call it a stage not a story To make it really clear we talking about something that is developer focused and is supposed to help you during development more than in two years when you want to see what components you do have so the goals were flexibility extensibility and customization which once again boils down to it doesn't do all that much but it gives you interfaces to connect to and really if a feature doesn't make development go faster it won't go in there because that's what we're focused on it shouldn't be bloated and it shouldn't be heavy weight and the goal that i personally said for myself was you should be able to learn the library in 30 seconds because we are you know the pain of being having a library dumped upon us that in and of itself requires us to spend hours and hours and hours the people that learned redux know what i'm talking about for the first time um so here it goes 30 seconds um to install it you go npm install save dev, svelte stage. Why dev? Because it's a development dependency, so it's a compiler, you only need it during development. You have a convenience script which will in it everything you need with svelte kit, with the routing. You go npm run dev and then that's basically it, you create your stages. A stage is just a regular old component that ends in dot stage dot svelte and you can use our pre-built component which will give you a little bit of a nicer UI and show you some additional information for props and with that out of the way we go to the scariest part of any presentation a live demo so if we so here we say we create a new app we say up here it creates as you see i tried this before so the usual excuse works if it doesn't now directory not empty. Do you know? Then we'll go. We'd like a skeleton project. Yes, we use TypeScript because of course we do. We do use use lint because why not? We do use Prettier because why not? And playwrights, well, let's skip playwrights. For you. So let's go in to the project. Let's open that up. Go npm install. I'll update you later. At least, at least, right? What's a cache and can anybody tell NPM people about it? Okay, so it worked. It installed, it exists. That's a good start. And now we see under routes, which we previously learned, is really important if you want to actually show something. We can create the routes where this will actually be displayed in your app through the convenience script. So it'll tell us it's finished up setting up Swatch stage. We can see we have that already here. And from now on we can just create our components. Let's say we have a components folder. And let's say because it's the obligatory example, we have a my button.swelt which really just has one prop. Let's say it's a text, which is a string. And we'll export the event handler too, just because. And the text, and that's our component. Let's say we want to style it now. Usually we'd create a random temporary page, really quite a bit of hassle. So what we'll create on the side is a stage file for it. So we'll call it just myButton.Stage.Svelte. And we'll say, let's use the integrated component. So I'll import that for us. Now it'll complain that we need to give it a name. In this case, it's just a required prop. Call it myButton And then here we are free to i am text from stage what you can also do at this point is specify props externally so what you can tell the stage so you have a nice overview later on you can say that the props really is just the key value pair object in this case you say the texts is i am a text from stage of course you can do this in script and link it all together so it's more convenient let's run the whole thing you see skeleton project i typed too hard again and we can see on the left side there's a navigation pane where we can just go through the through the routes showing all the different things and here we have the stage from my button we see it if we click on it you can see the props events in this case i didn't specify we could here also go the events is just in this case click and it returns undefined because we don't return anything in this case i probably messed something up I'm not defining that. But in any case, I'm going to go with this little blooper. But you can see it's actually pretty simple, and it works in real time with hot module reloading because we're in Vite. So if we create another stage, say second stage, let's vote. And we don't actually need to use the pre-built component. It'll just pick up anything it finds there. Also with hot module reloading, of course, for developing the whole thing with the styling. So to continue on, the point I want to make here is other than download my library and start on GitHub until it eventually becomes maybe something usable is how does this work? This is actually really simple. And it's based on Vite. So VIT, for those of you that don't know, it's a development server that's running. And that does a lot of the work together with Rollup. And what we do is we use a feature called internal globbing, where we just import anything that ends in .stage.swelt. What you get in return, you see that here in the comment block, is just the route to the component to the actual file. And the promise, in this case unknown, it's a promise that loads the import. So we're talking about a resolver. So what we do in the background for this application is we say the load component function is this specific one that I want. We parse that out back on the server and create a tree. And we just say just load it. In this case, as default any is just to stop TypeScript from screaming at me. And we return the default export that we have as we would with a regular sweat component. And then in the markup underneath the library, we can just say, await, load that component and give me the return value and just integrate it into Svelte directly. So, as you can see, that's 90% of the magic of such a library that most people would think, well, I need to either download this if it exists and works or I can't use it. So, by all means, build your own libraries. And that's what I want to stress here. Improve your DX through your own tooling. And really the SvelteKit toolchain with VIT, Rollup and Svelte is extremely extensible. And it's most likely 20 lines of code that allow you to do something that's really incredible that you previously couldn't in other libraries and other frontend frameworks for that matter. And probably you don't even need to understand it all. There's so many examples and so many tutorials you can go into. And if you really do need to understand it, the good news is it's really well documented. So if we want to say, let's improve this library right here with the code example from previous, where we said, oh, you had to put it in manually, which is kind of a pain. Why would I copy paste things? Why not import that directly and automatically? Because the developer, it's developer first. As a developer, I shouldn't have to do this. So the goal here is that below each of those components in the terrible CSS that you see, it shows us the source code that we actually put in between the stage component tags from previous As I said his draw for example doesn support this yet although as far as i know they working on features that go into that direction and it supposed to be an example of how easy tooling really is that's the second demo set up so if you're here we want to get in the sweat kit project and in this case we're in the vt config because we're going to build a viet plugin and adding a plugin is really really easy we just add it to this array and usually you think a plugin is a whole large component your plugin is a few lines of code it's really just an object it's really just an object with type script to help us we can say that the name let's call it demo and because i've hints on what i need to actually have there we need to enforce pre because what we're supposed to do here is we're supposed to take the files that wheat wants to read when you request something take them and transform the code that's what we're currently doing we're trying to build a pre-processing plugin really for our own code and what we then do is we say let's transform this which is just really a function that gets the code and the id id being the path and then return something so what we need to check first we want to make sure that it's actually a stage component that we're transforming we don't want to mangle any other kinds of things so we say if the id that ends with dot stage that's felt and we need to return something so otherwise we just return the code as is so what we do here next is we need to find out we said previously we wanted to have we wanted to have the content here so we want to find out these things and really what we get in this function is just a string it's the code that gets read as a string and we can manipulate it as we see fit it's string manipulation that's all the tooling really is and it's important to keep in mind here i created this regex but for brevet is safe because i'm running pretty long i'm just going to copy this code over now but really we can see it's it's pretty simple we check it does it really end with that then we just use a regular expression to find out the things we delete the debug code from two hours before and we just insert in this case we'll just insert a string which has changed the template as is And if we do that now, we go to stage. I did forget to say, thank you. And we see hot reloading, even works on developing your own plugins. Thank you for the tip. And we see the code is here. And we just built a preprocessor that goes over all your files, reads the code, does a manipulation, and that's all that. And it was how many lines of code? Like, I said 20. In this case, it was less than that. And that's really the point I want to drive home. Build your own tools with Svelte. It's really simple and actually really... It's a good feeling when you build your own tools because you don't depend on anybody externally. So what's the roadmap for the library I just presented? Really, we want to have a little bit of a more beautiful design, have some doc improvements, some quick search, theming. I'll let you read the rest and community suggestions. So if you have any ideas of things that you want to see that maybe annoy you about Storybook and you want to have developer first, let us know or just open up PR directly. That's the whole point of open source, right? With that, I say thank you very much. and I hope you build your own libraries tonight.