 hey friends today we're going to learn how to spice up your boring site using the view transitions api as you can see here i have this boring old site nothing special but how can we spice it up so for example if we go to somewhere how can we animate this page transition smoothly so like you have on your mobile apps and etc so that we can notice the changes in our application state right and also when we have some user interface like this micro interactions how can we make this more interesting and animate these elements with ease. And thankfully, we can do this in a couple of lines of code thanks to the View Transitions API. And if you're not familiar, the View Transitions API is a new browser API that lets you easily create animated transitions between different states in your app. That's right, it's not only great for page transitions, but any change in state in your app. So let's look at the first example on this page. So here you have this buttery smooth page transitions. In the past, you had to use something like the flip animation technique, which I covered in another video you can check out if you want to do impossible layout animations which wasn't easy until now so the view transition api makes it easy to create state and page transition not only for single page applications but also for traditional multi-page applications in the future so how does it work well basically as you can see in this example it just creates a snapshot or an image of the old and then the new state now let's see how it works here they explain it it this is the API you say document.startViewTransition you make your DOM change and that's basically it it takes the image of the old element the image of the new element and then it crossfaces by default but you can use CSS to change that transition so as we can see here they show in these examples they explain how this works so basically there is a new pseudo element view transition so as you can see by default when you use the view transitions it has this tree so view transition then it has this group root you have these two images which are root so you get the old one and the new one which you can target with css and they even explain how this works so this is basically an overlay so the old one gets animated from opacity one to zero and the new one goes from opacity from zero to one creating a crossfade and they also by default use this mix blend mode which really isn't important so we're going to explore how this works and how we can implement this in our cell kit application and as you can see here they show you how you can target at it and customize it further. Alright, so before I begin, don't forget to like and subscribe because it helps me out a lot and you can also support me by becoming a patron. Another thing worth mentioning is the Vue Transitions API browser support. As you can see, it's supported in all the Chromium-based browsers, so your Chrome, Edge, and etc. It's not supported yet in Safari and Firefox, but they're working on it. If someone is using a browser that doesn't support the Vue Transitions API, we can just ignore the Vue Transition and the site is going to work as usual. So there's really not a problem there. We can just progressively enhance the user experience all right friends so i'm excited to get started so here i have this project and as always the link to the post is going to be description which includes also the repl so you can play with the code your heart's content all right so how do we get started here i have this project i already started the development server and i created this navigation component which i renamed to view transition just so it's obvious what it is and this is what you can include in every project you make and etc so i just created this so you don't get distracted by anything else so here i'm just going to create a script tag in the navigation component so remember what i said that to use the view transitions api you just have to say document start view transition that's it you just pass it a callback and that's basically it so now basically it's going to take snapshot the old snapshot so it's going to take a picture literally and then you can make any dom change and then it's going to take new snapshot and it's going to perform the transition for you but if you want to do page transitions we somehow need to know when the page change right and the data is loaded so we can use a special life cycle navigation function in cell kit called on navigate so let me just remove all of this code and then we can say import on navigate from app navigation all right so we can just invoke it like this we're going to pass it a callback and we can also take navigation from it and now we can do the check here we can say hey if document start view transition it doesn't exist return as you can see here we get a typescript error and why that is because the view transitions api is so new the types don't exist yet so if you want to ignore this error you can make a comment you can say ts ignore or you can say ts expect error i think and then you can leave a message here to someone else reading your code if you want but i leave that up to you i'm just going to say ts ignore all right so now we have to return a new promise so when we know that the page is done loading this is just how the onnavigate api works so we have to say return new promise again we're going to pass it a callback and we're going to say resolve and then we're going to do the transition so we can say document start view transition and now we're going to make this async remember the callback from before awesome so now we can So we can resolve this. And then you can say await navigation complete. So basically we have to wait for the page to load and the navigation to be done so we can do the page transition And if this is intimidating to you don worry you just have to write this code once and now you can reuse it across all of your projects And maybe in the future SvelteKit makes a higher level abstraction which you can import from the library. But as you see, this is not that bad and it gives you full control over the view transitions API. And also my bad, we need to invoke this. But here again, we can just say yes, ignore. Of course, if you're using TypeScript, if you're not, then just ignore this. All right, so let's save this and boom, that's it. Now you have page transition. Let's go back here. And now you can see a simple crossfade. How beautiful is that, friends, right? Let's actually see what's going on. If you open the developer tools, you can open the animation tab. If you don't have access to the animation tab, go here to these dots. Then you can go to more tools, animations. Let me just move this up. Okay, let's do this. So now just pause it here. I'm going to put it at 10%. So it's really slow motion. okay so you can go to explore and now nothing is going on in the page because we captured that animation so now you can scrub it here you can see it's going to replay so now you can see this crossfade in real time so this is really a super easy way to debug your view transitions look at this how beautiful is this it's literally two images and if you go to the elements even ah okay this is what you usually wouldn't see because we're capturing the animation or we pause there so you can see here is the view transition the group image pair and we have old one and the new one which you can target using css so let me show you how we can do it let me just clear this i'm going to clear all this so we get back the control of the site actually let's see what's going on 10 yeah okay awesome so now let's go back here here are my global styles which are just import in the layout like in a usual cell kit app and then let's just go somewhere here yeah before this so now we can target this so we can say view transition old root now we can say view transition new which is the root and now we can change this by setting animation duration we can set it to something like four seconds so now this is going to be super long okay but instead of using this to debug your view transitions just use the animation step which is really powerful so let me show you another cool thing let's say for example that maybe you don't want page transitions if you're doing just some stage transition etc well basically you can just go here and on the root you can say view transition name which you're going to explore later so you can set this name to anything but another value is none so we can just set it like this and now here you won't get any transitions how awesome is that friends okay but let's make this more interesting so you can go actually to this post and here they have a great example they included some keyframes so you can do any transition you want this is really awesome so because they're just two images you can do crazy things like a crossfade for that star wars swipe effect you can do the batman logo transition whatever you want so this is like really crazy i'm just going to copy this over and let's just override this so we're creating a keyframe which is going to be fade in fade out so here you have slide from right this is really subtle so i'm going to change this to 100 so it goes completely off the screen and then i'm going to say minus 100 and then you can see again they're targeting view transition old root and view transition new so here's the animation they're using two animations it really only looks intimidating but this stupid cubic bezier they're using a custom easing but you can do this whatever you want and they just use fade out slide to left and then for the other one again it's going to fade it but it's going to use slide from right okay let me just save this and let's see what we get here so we're going to get a dramatic effect so as you can see it looks a bit obnoxious but yeah i just wanted to show you that example our header is also transitioning with the entire page so how can we fix this well we can go to the header here and we can separate it from the rest so we can go to header here and we can just give it a view transition name so you can go view transition name and you can name it whatever you want header banana like all this is going to are just going to separate as you can see here now when we're going to transition ah now our header is no longer included here and let me just go to 10 here i'm going to clear everything and pause it just so we see what's going on. Awesome, here we are. So you can see here is our transition. And now we can see the view transition here. So now we have a group root and here we separated the header into this. Maybe I can zoom in so you can see it more easily. And you can see it's the same thing. So now this also has an image pair which you can manipulate whatever you want using the old and new pseudo selector. All right, this is interesting, but let me just clear all of this. And now let's animate this marker, right? Let me just put this here. All right. So now I'm actually just going to remove all of this because it's annoying to me personally, but you can do whatever you want. So yeah, we don't have to do anything fancy here. I'm just going to remove the example I used. So everything works the same as before. So see this marker here above our navigation. What if we can animate that? It just an image right And we easily can So pay attention it just teleports like Goku in Dragon Ball right so we can make this more interesting and how can we do this well I can go to the same header file so where is the marker that I'm using here it is aria current page before all right so how do we do this well we just add a view transition name how awesome is this friends we can just say view transition name and you can give it any name I'm just going to give it an active page name just so the view transitions api is aware of what it needs to animate and now when i go back here pay attention to this let's actually make something dramatic we're going to go to planets to about and you can see it fly over maybe it goes like and how awesome is this friends all right but how can we animate elements that aren't the same so for example if you go here to mars maybe i want to animate the title and the image swooping in so when i go here to our planets i just select mars and then i want the image and the title to transition and we can do that easily but we need to give the view transition name a unique name which we can do using css variables so first i'm going to go to the route for the planets and then i'm going to assign a special unique name for the image and the title so i'm going to go here and here is going to be my routes so here i'm looping over the planets so i just need to give it a unique name which can be done we can use style and now we can set the planet css variable so we can name it name right which you get from the loop so we know it's unique but we're also going to have an issue because we need to give the same value here to our title so basically now it doesn't know what to transition so we need to give it something more unique and let's rename planet title so we can go to planet here and we can say image dash and here we can say title dash all right and that's basically it for the first part so now we again need to assign the view transition name i can go here where the container is actually i need the planets so here i have planets targeting the planet and now i can also target using css nesting and target the title like this all right so we can say view transition name and now we can just use the css variable how awesome is that friends all right so let's copy this line over so now we also need to do that for the image you can see here is the planet image right here so we can just say view transition name pay attention is not title now we're going to use the planet so now we can inspect this element as you can see zoom in so you can see so we have images class earth whatever name earth style planet image earth and same for the title title earth but you can also use any name you want all right so now when we transition this for example mars now we need to assign the same names for the elements that are unrelated what are going to transition to from the old to the new image so i can do that by going where i have my planets in this route so here i have all the individual planets when we navigate and now here we're just going to do the same thing so now we just need to find the title where is h1 so let's go here we can say style title it's a title dash and i'm going to say planet name which is going to have the same name awesome so now we need to find the image and do the same thing so here is the image let's just go here at the end and it's going to say style planet in this case and i'm going to give it the same identifier image dash and i'm going to use planet name all right so now we also need to give it a view transition name so if i go here to the image i can say view transition name let's use our css variable planet and we also need to do the same for the title so i'm going to copy over this line again so let's see where is the title h1 h1 you probably already saw it and yelling at me okay here it is h1 again pay attention so it's not planet it's dash dash title all right so let's see if this works so if you go to the planet we're going to see i thought the transitions okay so let's go oh how awesome is that and of course this title transition is annoying to me personally i was doing it to showcase the view transitions api maybe don't overuse the view transitions api maybe this should be a fade in or something else i would honestly just animate this image of the planet here and nothing else but i just want to show how cool it looks because you can go anywhere else you can go to saturn and we can also see what's going on here actually let me just first go here and i'm going to clear everything here and now let's go to 10 let's pause everything so we can go to mars let's record it so we can go here and we can see what happens so this is how you can debug what's going on with your view transitions and how beautiful is that friends all right that's awesome but the view transitions api isn't only useful for animating page transitions but we can also animate state transitions now let me just close the developer tools and as you can see here we can make a reservation to mars i just have this fake loader i just have this button here so here i using a numerated state this is why i tell you to not use Booleans for state because of this look at this So we now define all of the states of our button which is either loading success error And now this is awesome because in our styles, we can go to the button and now we can style this however we want depending on the state. So I don't even need special wrappers. I can just say data state when it's loading success because I have this SVG here, which is just an icon. So this is nothing special. This is just an if which checks the state we're in. it just displays something based on that. As you can see, this is awesome because you can use the data attribute. So now we can style everything based on the data attribute. How beautiful is this, friends? And this is why this is so awesome. And basically here is the logic I have. So I'm going to set the state to loading and now I'm going to flip a coin. So 50-50 if it's going to be success or error. So let's just check it. I make a reservation. So no tickets available. and awesome so how can we make this better we can make this better using the view transitions api so let me show you how you can do that so maybe you're thinking okay we just go to the button here to the styles right so here is the button and you're like easy peasy already a master at view transition so you can say view transition name and you can give it a name like reservation button or whatever and you're like okay now let's see and it doesn't work and why that is well basically this isn't a page transition right we need to use the view transitions on a state transition and how do we do that well basically it's one line of code also so now I'm going to go here I'm going to just create a function transition so we have our usable function and then you can pass it a callback I'm just going to pass it action and if you're using TypeScript I'm just going to give it a simple type it returns nothing and again we're going to check if the document start view transition exists So start view transition. If it doesn't exist, let's just return. Otherwise, we're going to say document. Start view transition. And we're just going to pass it the callback like before. And that's basically it. And as I said before, you can use TST ignore. You can phase this so it doesn't bother you. And basically that's it. So now we just need to use it. So now here where it's state loading, and it's going to say transition. so whenever you change your state pass it the callback and we're going to say state loading awesome basically that's it so now we need to change this for all the other occurrences so let me just go here i'm going to pass it a callback transition and we need to pass it a callback like this this is going to be state success let's just copy this over so you don't have to do the same thing this is going to be error and here we need to change it to idle so let's go here so after three seconds whatever happens we're just going to go back to idle all right so now you can save it and you should see it works but not like you expect so let me just make a reservation it does something weird like what is going on here and basically by default is going to try to preserve the aspect ratio which you can change because these are just images and we can target using css so in our css we can go here you can do this in your global styles whatever i'm just going to do it here because it's coped to the component so we can use the global property from swell and we can do it like this we can say global html because the pseudo element is on the html so we don't have to put the entire element inside here and now we can say view view transition alt so now you need to give it a new name so you can say reservation and then let me just copy this over and now old rename it to new reservation so now we're going to ignore the aspect ratio and you can do it by setting width 100 you can say height 100 all right so now we can save this and let's see if it works so now let's make a reservation oh look how cool that transition looks like and it's only a couple of lines of code right so now let's flip the coin and let's get a successful reservation And how beautiful is this, friends? Alright, so the last thing I want to mention is respecting the user's preference for reduced motion. Someone might suffer from motion sickness, or maybe they just don't want any animations on the page. In which case, you can go to the post here and just copy over this snippet in your project. So you can go to the global styles, and I'm just going to copy it here. And also remember, prefers reduced motion doesn't mean no motion. So you can set some more sensible values here. But if nothing else, just set animation to none, and that's basically it. And in the future, because of the View Transitions API, we're going to see a lot of obnoxious sites that have everything flying around, but just be respectful, right? Because that really won't make your site look great, but obnoxious, just use it where it makes sense. For example, as I already said here, maybe I wouldn't animate this title in. Animating the planet alone is enough for me. Alright, so that's it, friends. If you like what you've seen, don't forget to like and subscribe, and you can also support me by becoming a patron. Thank you for watching, and catch you in the next one. Peace! Thank you.